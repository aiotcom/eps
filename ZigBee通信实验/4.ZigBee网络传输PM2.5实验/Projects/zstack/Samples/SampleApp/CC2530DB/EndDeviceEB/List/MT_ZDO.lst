###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.10338/W32 for 8051         18/Dec/2020  11:23:24 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Components\mt\MT_ZDO.c   #
#    Command line       =  -f C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ #
#                          —È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Sampl #
#                          es\SampleApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wE #
#                          ndev.cfg (-DCPU32MHZ -DROOT=__near_func            #
#                          -DBLINK_LEDS) -f C:\Users\Administrator\Desktop\ep #
#                          s\ZigBeeÕ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Project #
#                          s\zstack\Samples\SampleApp\CC2530DB\..\..\..\Tools #
#                          \CC2530DB\f8wConfig.cfg (-DSECURE=0                #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFF11                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116 "-DCONST=const __code"    #
#                          -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE     #
#                          -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100            #
#                          -DRESPONSE_POLL_RATE=100) -DREJOIN_POLL_RATE=440   #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Components\mt\MT_ZDO.c   #
#                          -D NWK_AUTO_POLL -D ZTOOL_P1 -D MT_SYS_FUNC -D     #
#                          MT_ZDO_FUNC -D LCD_SUPPORTED=DEBUG -lC             #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\EndDeviceEB\List\ -lA           #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\EndDeviceEB\List\               #
#                          --diag_suppress Pe001,Pa010 -o                     #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\EndDeviceEB\Obj\ -e             #
#                          --no_unroll --no_inline --no_tbaa --debug          #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I C:\Users\Administrator\Des #
#                          ktop\eps\ZigBeeÕ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\ #
#                          Projects\zstack\Samples\SampleApp\CC2530DB\ -I     #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\..\SOURCE\ -I                   #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\..\..\..\ZMAIN\TI2530DB\ -I     #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\..\..\..\..\..\COMPONENTS\MT\   #
#                          -I C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ #
#                          —È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Sampl #
#                          es\SampleApp\CC2530DB\..\..\..\..\..\COMPONENTS\HA #
#                          L\INCLUDE\ -I C:\Users\Administrator\Desktop\eps\Z #
#                          igBeeÕ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\z #
#                          stack\Samples\SampleApp\CC2530DB\..\..\..\..\..\CO #
#                          MPONENTS\HAL\TARGET\CC2530EB\ -I                   #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\..\..\..\..\..\COMPONENTS\OSAL\ #
#                          MCU\CCSOC\ -I C:\Users\Administrator\Desktop\eps\Z #
#                          igBeeÕ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\z #
#                          stack\Samples\SampleApp\CC2530DB\..\..\..\..\..\CO #
#                          MPONENTS\OSAL\INCLUDE\ -I                          #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\..\..\..\..\..\COMPONENTS\STACK #
#                          \AF\ -I C:\Users\Administrator\Desktop\eps\ZigBeeÕ #
#                          ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\ #
#                          Samples\SampleApp\CC2530DB\..\..\..\..\..\COMPONEN #
#                          TS\STACK\NWK\ -I C:\Users\Administrator\Desktop\ep #
#                          s\ZigBeeÕ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Project #
#                          s\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\.. #
#                          \COMPONENTS\STACK\SEC\ -I                          #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\..\..\..\..\..\COMPONENTS\STACK #
#                          \SAPI\ -I C:\Users\Administrator\Desktop\eps\ZigBe #
#                          eÕ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstac #
#                          k\Samples\SampleApp\CC2530DB\..\..\..\..\..\COMPON #
#                          ENTS\STACK\SYS\ -I C:\Users\Administrator\Desktop\ #
#                          eps\ZigBeeÕ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\COMPONENTS\STACK\ZDO\ -I                        #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\..\..\..\..\..\COMPONENTS\ZMAC\ #
#                          F8W\ -I C:\Users\Administrator\Desktop\eps\ZigBeeÕ #
#                          ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\ #
#                          Samples\SampleApp\CC2530DB\..\..\..\..\..\COMPONEN #
#                          TS\ZMAC\ -I C:\Users\Administrator\Desktop\eps\Zig #
#                          BeeÕ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zst #
#                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\COMP #
#                          ONENTS\SERVICES\SADDR\ -I                          #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\..\..\..\..\..\COMPONENTS\SERVI #
#                          CES\SDATA\ -I C:\Users\Administrator\Desktop\eps\Z #
#                          igBeeÕ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\z #
#                          stack\Samples\SampleApp\CC2530DB\..\..\..\..\..\CO #
#                          MPONENTS\MAC\INCLUDE\ -I                           #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\H #
#                          IGH_LEVEL\ -I C:\Users\Administrator\Desktop\eps\Z #
#                          igBeeÕ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\z #
#                          stack\Samples\SampleApp\CC2530DB\..\..\..\..\..\CO #
#                          MPONENTS\MAC\LOW_LEVEL\srf04\ -I                   #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\L #
#                          OW_LEVEL\srf04\SINGLE_CHIP\ -I                     #
#                          C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\..\..\..\..\..\COMPONENTS\HARDW #
#                          ARE\ -Om                                           #
#    List file          =  C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\EndDeviceEB\List\MT_ZDO.lst     #
#    Object file        =  C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\ #
#                          4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Projects\zstack\Samples\ #
#                          SampleApp\CC2530DB\EndDeviceEB\Obj\MT_ZDO.r51      #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\Administrator\Desktop\eps\ZigBeeÕ®–≈ µ—È\4.ZigBeeÕ¯¬Á¥´ ‰PM2.5 µ—È\Components\mt\MT_ZDO.c
      1          /**************************************************************************************************
      2            Filename:       MT_ZDO.c
      3            Revised:        $Date: 2009-12-29 11:40:43 -0800 (Tue, 29 Dec 2009) $
      4            Revision:       $Revision: 21414 $
      5          
      6            Description:    MonitorTest functions for the ZDO layer.
      7          
      8          
      9            Copyright 2004-2009 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED ìAS ISî WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          #ifdef MT_ZDO_FUNC
     41          
     42          /**************************************************************************************************
     43           * INCLUDES
     44           **************************************************************************************************/
     45          #include "ZComDef.h"
     46          #include "OSAL.h"
     47          #include "MT.h"
     48          #include "MT_ZDO.h"
     49          #include "APSMEDE.h"
     50          #include "ZDConfig.h"
     51          #include "ZDProfile.h"
     52          #include "ZDObject.h"
     53          #include "ZDApp.h"
     54          
     55          #if !defined( WIN32 )
     56            #include "OnBoard.h"
     57          #endif
     58          
     59          #if defined(ZDO_LINK_KEY_MANAGEMENT)
     60            #include "ZDSecMgr.h"
     61          #endif
     62          
     63          #include "nwk_util.h"
     64          
     65          /**************************************************************************************************
     66           * CONSTANTS
     67           **************************************************************************************************/
     68          #define MT_ZDO_END_DEVICE_ANNCE_IND_LEN   0x0D
     69          #define MT_ZDO_ADDR_RSP_LEN               0x0D
     70          #define MT_ZDO_BIND_UNBIND_RSP_LEN        0x03
     71          
     72          #define MTZDO_RESPONSE_BUFFER_LEN   100
     73          
     74          #define MTZDO_MAX_MATCH_CLUSTERS    16
     75          #define MTZDO_MAX_ED_BIND_CLUSTERS  15
     76          
     77          // Conversion from ZDO Cluster Id to the RPC AREQ Id is direct as follows:
     78          #define MT_ZDO_CID_TO_AREQ_ID(CId)  ((uint8)(CId) | 0x80)
     79          
     80          /**************************************************************************************************
     81           * GLOBAL VARIABLES
     82           **************************************************************************************************/

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     83          uint32 _zdoCallbackSub;
   \                     _zdoCallbackSub:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
     84          
     85          /**************************************************************************************************
     86           * LOCAL VARIABLES
     87           **************************************************************************************************/
     88          
     89          /**************************************************************************************************
     90           * LOCAL FUNCTIONS
     91           **************************************************************************************************/
     92          #if defined (MT_ZDO_FUNC)
     93          void MT_ZdoNWKAddressRequest(uint8 *pBuf);
     94          void MT_ZdoIEEEAddrRequest(uint8 *pBuf);
     95          void MT_ZdoNodeDescRequest(uint8 *pBuf);
     96          void MT_ZdoPowerDescRequest(uint8 *pBuf);
     97          void MT_ZdoSimpleDescRequest(uint8 *pBuf);
     98          void MT_ZdoActiveEpRequest(uint8 *pBuf);
     99          void MT_ZdoMatchDescRequest(uint8 *pBuf);
    100          void MT_ZdoComplexDescRequest(uint8 *pBuf);
    101          void MT_ZdoUserDescRequest(uint8 *pBuf);
    102          void MT_ZdoEndDevAnnce(uint8 *pBuf);
    103          void MT_ZdoUserDescSet(uint8 *pBuf);
    104          void MT_ZdoServiceDiscRequest(uint8 *pBuf);
    105          void MT_ZdoEndDevBindRequest(uint8 *pBuf);
    106          void MT_ZdoBindRequest(uint8 *pBuf);
    107          void MT_ZdoUnbindRequest(uint8 *pBuf);
    108          void MT_ZdoMgmtNwkDiscRequest(uint8 *pBuf);
    109          void MT_ZdoSetLinkKey(uint8 *pBuf);
    110          void MT_ZdoRemoveLinkKey(uint8 *pBuf);
    111          void MT_ZdoGetLinkKey(uint8 *pBuf);
    112          #if defined (MT_ZDO_MGMT)
    113          void MT_ZdoMgmtLqiRequest(uint8 *pBuf);
    114          void MT_ZdoMgmtRtgRequest(uint8 *pBuf);
    115          void MT_ZdoMgmtBindRequest(uint8 *pBuf);
    116          void MT_ZdoMgmtLeaveRequest(uint8 *pBuf);
    117          void MT_ZdoMgmtDirectJoinRequest(uint8 *pBuf);
    118          void MT_ZdoMgmtPermitJoinRequest(uint8 *pBuf);
    119          void MT_ZdoMgmtNwkUpdateRequest(uint8 *pBuf);
    120          #endif /* MT_ZDO_MGMT */
    121          void MT_ZdoStartupFromApp(uint8 *pBuf);
    122          void MT_ZdoRegisterForZDOMsg(uint8 *pBuf);
    123          void MT_ZdoRemoveRegisteredCB(uint8 *pBuf);
    124          #endif /* MT_ZDO_FUNC */
    125          
    126          #if defined (MT_ZDO_CB_FUNC)
    127          uint8 MT_ZdoHandleExceptions( afIncomingMSGPacket_t *pData, zdoIncomingMsg_t *inMsg );
    128          void MT_ZdoAddrRspCB( ZDO_NwkIEEEAddrResp_t *pMsg, uint16 clusterID );
    129          void MT_ZdoEndDevAnnceCB( ZDO_DeviceAnnce_t *pMsg, uint16 srcAddr );
    130          void MT_ZdoBindUnbindRspCB( uint16 clusterID, uint16 srcAddr, uint8 status );
    131          void* MT_ZdoSrcRtgCB( void *pStr );
    132          #endif /* MT_ZDO_CB_FUNC */
    133          
    134          #if defined (MT_ZDO_FUNC)
    135          /***************************************************************************************************
    136           * @fn      MT_ZdoInit
    137           *
    138           * @brief   MT ZDO initialization
    139           *
    140           * @param   none
    141           *
    142           * @return  none
    143           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    144          void MT_ZdoInit(void)
   \                     MT_ZdoInit:
    145          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    146          #ifdef MT_ZDO_CB_FUNC
    147            /* Register with ZDO for indication callbacks */
    148            ZDO_RegisterForZdoCB(ZDO_SRC_RTG_IND_CBID, &MT_ZdoSrcRtgCB);
    149          #endif
    150          }
   \   000000   02....       LJMP    ?BRET
    151          
    152          /***************************************************************************************************
    153           * @fn      MT_ZdoCommandProcessing
    154           *
    155           * @brief
    156           *
    157           *   Process all the ZDO commands that are issued by test tool
    158           *
    159           * @param   pBuf - pointer to the msg buffer
    160           *
    161           *          | LEN  | CMD0  | CMD1  |  DATA  |
    162           *          |  1   |   1   |   1   |  0-255 |
    163           *
    164           * @return  status
    165           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    166          uint8 MT_ZdoCommandProcessing(uint8* pBuf)
   \                     MT_ZdoCommandProcessing:
    167          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    168            uint8 status = MT_RPC_SUCCESS;
   \   000005   7E00         MOV     R6,#0x0
    169          
    170            switch (pBuf[MT_RPC_POS_CMD1])
   \   000007   8A82         MOV     DPL,R2
   \   000009   8B83         MOV     DPH,R3
   \   00000B   A3           INC     DPTR
   \   00000C   A3           INC     DPTR
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   6041         JZ      ??MT_ZdoCommandProcessing_0
   \   000010   14           DEC     A
   \   000011   6043         JZ      ??MT_ZdoCommandProcessing_1
   \   000013   14           DEC     A
   \   000014   6045         JZ      ??MT_ZdoCommandProcessing_2
   \   000016   14           DEC     A
   \   000017   6047         JZ      ??MT_ZdoCommandProcessing_3
   \   000019   14           DEC     A
   \   00001A   6049         JZ      ??MT_ZdoCommandProcessing_4
   \   00001C   14           DEC     A
   \   00001D   604B         JZ      ??MT_ZdoCommandProcessing_5
   \   00001F   14           DEC     A
   \   000020   604D         JZ      ??MT_ZdoCommandProcessing_6
   \   000022   14           DEC     A
   \   000023   604F         JZ      ??MT_ZdoCommandProcessing_7
   \   000025   14           DEC     A
   \   000026   6051         JZ      ??MT_ZdoCommandProcessing_8
   \   000028   24FE         ADD     A,#-0x2
   \   00002A   6052         JZ      ??MT_ZdoCommandProcessing_9
   \   00002C   14           DEC     A
   \   00002D   6054         JZ      ??MT_ZdoCommandProcessing_10
   \   00002F   14           DEC     A
   \   000030   6056         JZ      ??MT_ZdoCommandProcessing_11
   \   000032   24EC         ADD     A,#-0x14
   \   000034   6057         JZ      ??MT_ZdoCommandProcessing_12
   \   000036   14           DEC     A
   \   000037   6059         JZ      ??MT_ZdoCommandProcessing_13
   \   000039   14           DEC     A
   \   00003A   605B         JZ      ??MT_ZdoCommandProcessing_14
   \   00003C   14           DEC     A
   \   00003D   605D         JZ      ??MT_ZdoCommandProcessing_15
   \   00003F   14           DEC     A
   \   000040   605F         JZ      ??MT_ZdoCommandProcessing_16
   \   000042   14           DEC     A
   \   000043   6061         JZ      ??MT_ZdoCommandProcessing_17
   \   000045   24E7         ADD     A,#-0x19
   \   000047   6067         JZ      ??MT_ZdoCommandProcessing_18
   \   000049   14           DEC     A
   \   00004A   6069         JZ      ??MT_ZdoCommandProcessing_19
   \   00004C   14           DEC     A
   \   00004D   605C         JZ      ??MT_ZdoCommandProcessing_20
   \   00004F   8069         SJMP    ??MT_ZdoCommandProcessing_21
    171            {
    172          #if defined ( ZDO_NWKADDR_REQUEST )
    173              case MT_ZDO_NWK_ADDR_REQ:
    174                MT_ZdoNWKAddressRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_0:
   \   000051                ; Setup parameters for call to function MT_ZdoNWKAddressRequest
   \   000051   12....       LCALL   ??MT_ZdoNWKAddressRequest?relay
    175                break;
   \   000054   8066         SJMP    ??MT_ZdoCommandProcessing_22
    176          #endif
    177          
    178          #if defined ( ZDO_IEEEADDR_REQUEST )
    179              case MT_ZDO_IEEE_ADDR_REQ:
    180                MT_ZdoIEEEAddrRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_1:
   \   000056                ; Setup parameters for call to function MT_ZdoIEEEAddrRequest
   \   000056   12....       LCALL   ??MT_ZdoIEEEAddrRequest?relay
    181                break;
   \   000059   8061         SJMP    ??MT_ZdoCommandProcessing_22
    182          #endif
    183          
    184          #if defined ( ZDO_NODEDESC_REQUEST )
    185              case MT_ZDO_NODE_DESC_REQ:
    186                MT_ZdoNodeDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_2:
   \   00005B                ; Setup parameters for call to function MT_ZdoNodeDescRequest
   \   00005B   12....       LCALL   ??MT_ZdoNodeDescRequest?relay
    187                break;
   \   00005E   805C         SJMP    ??MT_ZdoCommandProcessing_22
    188          #endif
    189          
    190          #if defined ( ZDO_POWERDESC_REQUEST )
    191              case MT_ZDO_POWER_DESC_REQ:
    192                MT_ZdoPowerDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_3:
   \   000060                ; Setup parameters for call to function MT_ZdoPowerDescRequest
   \   000060   12....       LCALL   ??MT_ZdoPowerDescRequest?relay
    193                break;
   \   000063   8057         SJMP    ??MT_ZdoCommandProcessing_22
    194          #endif
    195          
    196          #if defined ( ZDO_SIMPLEDESC_REQUEST )
    197              case MT_ZDO_SIMPLE_DESC_REQ:
    198                MT_ZdoSimpleDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_4:
   \   000065                ; Setup parameters for call to function MT_ZdoSimpleDescRequest
   \   000065   12....       LCALL   ??MT_ZdoSimpleDescRequest?relay
    199                break;
   \   000068   8052         SJMP    ??MT_ZdoCommandProcessing_22
    200          #endif
    201          
    202          #if defined ( ZDO_ACTIVEEP_REQUEST )
    203              case MT_ZDO_ACTIVE_EP_REQ:
    204                MT_ZdoActiveEpRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_5:
   \   00006A                ; Setup parameters for call to function MT_ZdoActiveEpRequest
   \   00006A   12....       LCALL   ??MT_ZdoActiveEpRequest?relay
    205                break;
   \   00006D   804D         SJMP    ??MT_ZdoCommandProcessing_22
    206          #endif
    207          
    208          #if defined ( ZDO_MATCH_REQUEST )
    209              case MT_ZDO_MATCH_DESC_REQ:
    210                MT_ZdoMatchDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_6:
   \   00006F                ; Setup parameters for call to function MT_ZdoMatchDescRequest
   \   00006F   12....       LCALL   ??MT_ZdoMatchDescRequest?relay
    211                break;
   \   000072   8048         SJMP    ??MT_ZdoCommandProcessing_22
    212          #endif
    213          
    214          #if defined ( ZDO_COMPLEXDESC_REQUEST )
    215              case MT_ZDO_COMPLEX_DESC_REQ:
    216                MT_ZdoComplexDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_7:
   \   000074                ; Setup parameters for call to function MT_ZdoComplexDescRequest
   \   000074   12....       LCALL   ??MT_ZdoComplexDescRequest?relay
    217                break;
   \   000077   8043         SJMP    ??MT_ZdoCommandProcessing_22
    218          #endif
    219          
    220          #if defined ( ZDO_USERDESC_REQUEST )
    221              case MT_ZDO_USER_DESC_REQ:
    222                MT_ZdoUserDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_8:
   \   000079                ; Setup parameters for call to function MT_ZdoUserDescRequest
   \   000079   12....       LCALL   ??MT_ZdoUserDescRequest?relay
    223                break;
   \   00007C   803E         SJMP    ??MT_ZdoCommandProcessing_22
    224          #endif
    225          
    226          #if defined ( ZDO_ENDDEVICE_ANNCE )
    227              case MT_ZDO_END_DEV_ANNCE:
    228                MT_ZdoEndDevAnnce(pBuf);
   \                     ??MT_ZdoCommandProcessing_9:
   \   00007E                ; Setup parameters for call to function MT_ZdoEndDevAnnce
   \   00007E   12....       LCALL   ??MT_ZdoEndDevAnnce?relay
    229                break;
   \   000081   8039         SJMP    ??MT_ZdoCommandProcessing_22
    230          #endif      
    231          
    232          #if defined ( ZDO_USERDESCSET_REQUEST )
    233              case MT_ZDO_USER_DESC_SET:
    234                MT_ZdoUserDescSet(pBuf);
   \                     ??MT_ZdoCommandProcessing_10:
   \   000083                ; Setup parameters for call to function MT_ZdoUserDescSet
   \   000083   12....       LCALL   ??MT_ZdoUserDescSet?relay
    235                break;
   \   000086   8034         SJMP    ??MT_ZdoCommandProcessing_22
    236          #endif
    237          
    238          #if defined ( ZDO_SERVERDISC_REQUEST )
    239              case MT_ZDO_SERVICE_DISC_REQ:
    240                MT_ZdoServiceDiscRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_11:
   \   000088                ; Setup parameters for call to function MT_ZdoServiceDiscRequest
   \   000088   12....       LCALL   ??MT_ZdoServiceDiscRequest?relay
    241                break;
   \   00008B   802F         SJMP    ??MT_ZdoCommandProcessing_22
    242          #endif
    243          
    244          #if defined ( ZDO_ENDDEVICEBIND_REQUEST )
    245              case MT_ZDO_END_DEV_BIND_REQ:
    246                MT_ZdoEndDevBindRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_12:
   \   00008D                ; Setup parameters for call to function MT_ZdoEndDevBindRequest
   \   00008D   12....       LCALL   ??MT_ZdoEndDevBindRequest?relay
    247                break;
   \   000090   802A         SJMP    ??MT_ZdoCommandProcessing_22
    248          #endif
    249          
    250          #if defined ( ZDO_BIND_UNBIND_REQUEST )
    251              case MT_ZDO_BIND_REQ:
    252                MT_ZdoBindRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_13:
   \   000092                ; Setup parameters for call to function MT_ZdoBindRequest
   \   000092   12....       LCALL   ??MT_ZdoBindRequest?relay
    253                break;
   \   000095   8025         SJMP    ??MT_ZdoCommandProcessing_22
    254          #endif
    255          
    256          #if defined ( ZDO_BIND_UNBIND_REQUEST )
    257              case MT_ZDO_UNBIND_REQ:
    258                MT_ZdoUnbindRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_14:
   \   000097                ; Setup parameters for call to function MT_ZdoUnbindRequest
   \   000097   12....       LCALL   ??MT_ZdoUnbindRequest?relay
    259                break;
   \   00009A   8020         SJMP    ??MT_ZdoCommandProcessing_22
    260          #endif
    261                
    262          #if defined ( ZDO_LINK_KEY_MANAGEMENT )
    263              case MT_ZDO_SET_LINK_KEY:
    264                MT_ZdoSetLinkKey(pBuf);
   \                     ??MT_ZdoCommandProcessing_15:
   \   00009C                ; Setup parameters for call to function MT_ZdoSetLinkKey
   \   00009C   12....       LCALL   ??MT_ZdoSetLinkKey?relay
    265                break;
   \   00009F   801B         SJMP    ??MT_ZdoCommandProcessing_22
    266          
    267              case MT_ZDO_REMOVE_LINK_KEY:
    268                MT_ZdoRemoveLinkKey(pBuf);
   \                     ??MT_ZdoCommandProcessing_16:
   \   0000A1                ; Setup parameters for call to function MT_ZdoRemoveLinkKey
   \   0000A1   12....       LCALL   ??MT_ZdoRemoveLinkKey?relay
    269                break;
   \   0000A4   8016         SJMP    ??MT_ZdoCommandProcessing_22
    270          
    271              case MT_ZDO_GET_LINK_KEY:
    272                MT_ZdoGetLinkKey(pBuf);
   \                     ??MT_ZdoCommandProcessing_17:
   \   0000A6                ; Setup parameters for call to function MT_ZdoGetLinkKey
   \   0000A6   12....       LCALL   ??MT_ZdoGetLinkKey?relay
    273                break;
   \   0000A9   8011         SJMP    ??MT_ZdoCommandProcessing_22
    274          #endif      
    275          
    276          #if defined ( ZDO_MGMT_NWKDISC_REQUEST )
    277              case MT_ZDO_MGMT_NWKDISC_REQ:
    278                MT_ZdoMgmtNwkDiscRequest(pBuf);
    279                break;
    280          #endif
    281          
    282          #if defined ( ZDO_MGMT_LQI_REQUEST )
    283              case MT_ZDO_MGMT_LQI_REQ:
    284                MT_ZdoMgmtLqiRequest(pBuf);
    285                break;
    286          #endif
    287          
    288          #if defined ( ZDO_MGMT_RTG_REQUEST )
    289              case MT_ZDO_MGMT_RTG_REQ:
    290                MT_ZdoMgmtRtgRequest(pBuf);
    291                break;
    292          #endif
    293          
    294          #if defined ( ZDO_MGMT_BIND_REQUEST )
    295              case MT_ZDO_MGMT_BIND_REQ:
    296                MT_ZdoMgmtBindRequest(pBuf);
    297                break;
    298          #endif
    299          
    300          #if defined ( ZDO_MGMT_LEAVE_REQUEST )
    301              case MT_ZDO_MGMT_LEAVE_REQ:
    302                MT_ZdoMgmtLeaveRequest(pBuf);
    303                break;
    304          #endif
    305          
    306          #if defined ( ZDO_MGMT_JOINDIRECT_REQUEST )
    307              case MT_ZDO_MGMT_DIRECT_JOIN_REQ:
    308                MT_ZdoMgmtDirectJoinRequest(pBuf);
    309                break;
    310          #endif
    311          
    312          #if defined ( ZDO_MGMT_PERMIT_JOIN_REQUEST )
    313              case MT_ZDO_MGMT_PERMIT_JOIN_REQ:
    314                MT_ZdoMgmtPermitJoinRequest(pBuf);
    315                break;
    316          #endif
    317          
    318          #if defined ( ZDO_MGMT_NWKUPDATE_REQUEST )
    319              case MT_ZDO_MGMT_NWK_UPDATE_REQ:
    320                MT_ZdoMgmtNwkUpdateRequest(pBuf);
    321                break;
    322          #endif 
    323          
    324          #if defined ( ZDO_NETWORKSTART_REQUEST )
    325              case MT_ZDO_STARTUP_FROM_APP:
    326                MT_ZdoStartupFromApp(pBuf);
   \                     ??MT_ZdoCommandProcessing_20:
   \   0000AB                ; Setup parameters for call to function MT_ZdoStartupFromApp
   \   0000AB   12....       LCALL   ??MT_ZdoStartupFromApp?relay
    327                break;
   \   0000AE   800C         SJMP    ??MT_ZdoCommandProcessing_22
    328          #endif
    329          
    330              case MT_ZDO_MSG_CB_REGISTER:
    331                MT_ZdoRegisterForZDOMsg(pBuf);
   \                     ??MT_ZdoCommandProcessing_18:
   \   0000B0                ; Setup parameters for call to function MT_ZdoRegisterForZDOMsg
   \   0000B0   12....       LCALL   ??MT_ZdoRegisterForZDOMsg?relay
    332                break;
   \   0000B3   8007         SJMP    ??MT_ZdoCommandProcessing_22
    333          
    334              case MT_ZDO_MSG_CB_REMOVE:
    335                MT_ZdoRemoveRegisteredCB(pBuf);
   \                     ??MT_ZdoCommandProcessing_19:
   \   0000B5                ; Setup parameters for call to function MT_ZdoRemoveRegisteredCB
   \   0000B5   12....       LCALL   ??MT_ZdoRemoveRegisteredCB?relay
    336                break;
   \   0000B8   8002         SJMP    ??MT_ZdoCommandProcessing_22
    337          
    338              default:
    339                status = MT_RPC_ERR_COMMAND_ID;
   \                     ??MT_ZdoCommandProcessing_21:
   \   0000BA   0E           INC     R6
   \   0000BB   0E           INC     R6
    340                break;
    341            }
    342          
    343            return status;
   \                     ??MT_ZdoCommandProcessing_22:
   \   0000BC   EE           MOV     A,R6
   \   0000BD   F9           MOV     R1,A
   \   0000BE   7F01         MOV     R7,#0x1
   \   0000C0   02....       LJMP    ?BANKED_LEAVE_XDATA
    344          }
    345          
    346          /***************************************************************************************************
    347           * @fn      MT_ZdoNwkAddrReq
    348           *
    349           * @brief   Handle a nwk address request.
    350           *
    351           * @param   pData  - MT message data
    352           *
    353           * @return  void
    354           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    355          void MT_ZdoNWKAddressRequest(uint8 *pBuf)
   \                     MT_ZdoNWKAddressRequest:
    356          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    357            uint8 cmdId;
    358            uint8 retValue;
    359            uint8 reqType;
    360            uint8 startIndex;
    361            uint8 *pExtAddr;
    362          
    363            /* parse header */
    364            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F5..         MOV     ?V0 + 0,A
    365            pBuf += MT_RPC_FRAME_HDR_SZ;
    366          
    367            /* parse parameters */
    368            pExtAddr = pBuf;
   \   000013   EA           MOV     A,R2
   \   000014   2403         ADD     A,#0x3
   \   000016   FE           MOV     R6,A
   \   000017   EB           MOV     A,R3
   \   000018   3400         ADDC    A,#0x0
   \   00001A   FF           MOV     R7,A
    369            pBuf += Z_EXTADDR_LEN;
   \   00001B   EE           MOV     A,R6
   \   00001C   2408         ADD     A,#0x8
   \   00001E   FA           MOV     R2,A
   \   00001F   EF           MOV     A,R7
   \   000020   3400         ADDC    A,#0x0
   \   000022   FB           MOV     R3,A
    370          
    371            /* Request type */
    372            reqType = *pBuf++;
   \   000023   8A82         MOV     DPL,R2
   \   000025   8B83         MOV     DPH,R3
   \   000027   E0           MOVX    A,@DPTR
   \   000028   F9           MOV     R1,A
   \   000029   A3           INC     DPTR
    373          
    374            /* Start index */
    375            startIndex = *pBuf;
    376          
    377            retValue = (uint8)ZDP_NwkAddrReq(pExtAddr, reqType, startIndex, 0);
   \   00002A                ; Setup parameters for call to function ZDP_NwkAddrReq
   \   00002A   7D00         MOV     R5,#0x0
   \   00002C   E0           MOVX    A,@DPTR
   \   00002D   FC           MOV     R4,A
   \   00002E   EE           MOV     A,R6
   \   00002F   FA           MOV     R2,A
   \   000030   EF           MOV     A,R7
   \   000031   FB           MOV     R3,A
   \   000032   12....       LCALL   ??ZDP_NwkAddrReq?relay
   \   000035   E9           MOV     A,R1
   \   000036   85..82       MOV     DPL,?XSP + 0
   \   000039   85..83       MOV     DPH,?XSP + 1
   \   00003C   F0           MOVX    @DPTR,A
    378          
    379            /* Build and send back the response */
    380            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   00003D                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00003D   AC82         MOV     R4,DPL
   \   00003F   AD83         MOV     R5,DPH
   \   000041   7B01         MOV     R3,#0x1
   \   000043   AA..         MOV     R2,?V0 + 0
   \   000045   7965         MOV     R1,#0x65
   \   000047   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    381          }
   \   00004A   7401         MOV     A,#0x1
   \   00004C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00004F   7F01         MOV     R7,#0x1
   \   000051   02....       LJMP    ?BANKED_LEAVE_XDATA
    382          
    383          /***************************************************************************************************
    384           * @fn      MT_ZdoIEEEAddrRequest
    385           *
    386           * @brief   Handle a IEEE address request.
    387           *
    388           * @param   pData  - MT message data
    389           *
    390           * @return  void
    391           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    392          void MT_ZdoIEEEAddrRequest (uint8 *pBuf)
   \                     MT_ZdoIEEEAddrRequest:
    393          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    394            uint8 cmdId;
    395            uint8 retValue;
    396            uint16 shortAddr;
    397            uint8 reqType;
    398            uint8 startIndex;
    399          
    400            /* parse header */
    401            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F5..         MOV     ?V0 + 0,A
    402            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000013   EA           MOV     A,R2
   \   000014   2403         ADD     A,#0x3
   \   000016   0A           INC     R2
   \   000017   0A           INC     R2
   \   000018   0A           INC     R2
   \   000019   EB           MOV     A,R3
   \   00001A   3400         ADDC    A,#0x0
   \   00001C   FB           MOV     R3,A
    403          
    404            /* Dev address */
    405            shortAddr = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   00001D   8A82         MOV     DPL,R2
   \   00001F   8B83         MOV     DPH,R3
   \   000021   E0           MOVX    A,@DPTR
   \   000022   FC           MOV     R4,A
   \   000023   A3           INC     DPTR
   \   000024   E0           MOVX    A,@DPTR
   \   000025   F9           MOV     R1,A
   \   000026   EC           MOV     A,R4
   \   000027   2400         ADD     A,#0x0
   \   000029   FE           MOV     R6,A
   \   00002A   E4           CLR     A
   \   00002B   39           ADDC    A,R1
   \   00002C   FF           MOV     R7,A
    406            pBuf += 2;
   \   00002D   EA           MOV     A,R2
   \   00002E   2402         ADD     A,#0x2
   \   000030   0A           INC     R2
   \   000031   0A           INC     R2
   \   000032   EB           MOV     A,R3
   \   000033   3400         ADDC    A,#0x0
   \   000035   FB           MOV     R3,A
    407          
    408            /* request type */
    409            reqType = *pBuf++;
   \   000036   8A82         MOV     DPL,R2
   \   000038   8B83         MOV     DPH,R3
   \   00003A   E0           MOVX    A,@DPTR
   \   00003B   F9           MOV     R1,A
   \   00003C   A3           INC     DPTR
    410          
    411            /* start index */
    412            startIndex = *pBuf;
    413          
    414            retValue = (uint8)ZDP_IEEEAddrReq(shortAddr, reqType, startIndex, 0);
   \   00003D                ; Setup parameters for call to function ZDP_IEEEAddrReq
   \   00003D   7D00         MOV     R5,#0x0
   \   00003F   E0           MOVX    A,@DPTR
   \   000040   FC           MOV     R4,A
   \   000041   EE           MOV     A,R6
   \   000042   FA           MOV     R2,A
   \   000043   EF           MOV     A,R7
   \   000044   FB           MOV     R3,A
   \   000045   12....       LCALL   ??ZDP_IEEEAddrReq?relay
   \   000048   E9           MOV     A,R1
   \   000049   85..82       MOV     DPL,?XSP + 0
   \   00004C   85..83       MOV     DPH,?XSP + 1
   \   00004F   F0           MOVX    @DPTR,A
    415          
    416            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   000050                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000050   AC82         MOV     R4,DPL
   \   000052   AD83         MOV     R5,DPH
   \   000054   7B01         MOV     R3,#0x1
   \   000056   AA..         MOV     R2,?V0 + 0
   \   000058   7965         MOV     R1,#0x65
   \   00005A   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    417          }
   \   00005D   7401         MOV     A,#0x1
   \   00005F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000062   7F01         MOV     R7,#0x1
   \   000064   02....       LJMP    ?BANKED_LEAVE_XDATA
    418          
    419          /***************************************************************************************************
    420           * @fn      MT_ZdoNodeDescRequest
    421           *
    422           * @brief   Handle a Node Descriptor request.
    423           *
    424           * @param   pData  - MT message data
    425           *
    426           * @return  void
    427           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    428          void MT_ZdoNodeDescRequest (uint8 *pBuf)
   \                     MT_ZdoNodeDescRequest:
    429          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    430            uint8 cmdId;
    431            uint8 retValue;
    432            zAddrType_t destAddr;
    433            uint16 shortAddr;
    434          
    435            /* parse header */
    436            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   FE           MOV     R6,A
    437            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000012   EA           MOV     A,R2
   \   000013   2403         ADD     A,#0x3
   \   000015   0A           INC     R2
   \   000016   0A           INC     R2
   \   000017   0A           INC     R2
   \   000018   EB           MOV     A,R3
   \   000019   3400         ADDC    A,#0x0
   \   00001B   FB           MOV     R3,A
    438          
    439            /* Destination address */
    440            destAddr.addrMode = Addr16Bit;
   \   00001C   7409         MOV     A,#0x9
   \   00001E   12....       LCALL   ?XSTACK_DISP0_8
   \   000021   7402         MOV     A,#0x2
   \   000023   F0           MOVX    @DPTR,A
    441            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000024   8A82         MOV     DPL,R2
   \   000026   8B83         MOV     DPH,R3
   \   000028   E0           MOVX    A,@DPTR
   \   000029   FC           MOV     R4,A
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   F9           MOV     R1,A
   \   00002D   EC           MOV     A,R4
   \   00002E   F8           MOV     R0,A
   \   00002F   7401         MOV     A,#0x1
   \   000031   12....       LCALL   ?XSTACK_DISP0_8
   \   000034   E8           MOV     A,R0
   \   000035   F0           MOVX    @DPTR,A
   \   000036   A3           INC     DPTR
   \   000037   E9           MOV     A,R1
   \   000038   F0           MOVX    @DPTR,A
    442            pBuf += 2;
   \   000039   EA           MOV     A,R2
   \   00003A   2402         ADD     A,#0x2
   \   00003C   0A           INC     R2
   \   00003D   0A           INC     R2
   \   00003E   EB           MOV     A,R3
   \   00003F   3400         ADDC    A,#0x0
   \   000041   FB           MOV     R3,A
    443          
    444            /* Network address of interest */
    445            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    446            pBuf += 2;
    447          
    448            retValue = (uint8)ZDP_NodeDescReq( &destAddr, shortAddr, 0);
   \   000042                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000042   75..00       MOV     ?V0 + 0,#0x0
   \   000045   78..         MOV     R0,#?V0 + 0
   \   000047   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00004A   7902         MOV     R1,#0x2
   \   00004C   8A82         MOV     DPL,R2
   \   00004E   8B83         MOV     DPH,R3
   \   000050   E0           MOVX    A,@DPTR
   \   000051   FC           MOV     R4,A
   \   000052   A3           INC     DPTR
   \   000053   E0           MOVX    A,@DPTR
   \   000054   FB           MOV     R3,A
   \   000055   EC           MOV     A,R4
   \   000056   2400         ADD     A,#0x0
   \   000058   E4           CLR     A
   \   000059   3B           ADDC    A,R3
   \   00005A   FD           MOV     R5,A
   \   00005B   E9           MOV     A,R1
   \   00005C   12....       LCALL   ?XSTACK_DISP0_8
   \   00005F   AA82         MOV     R2,DPL
   \   000061   AB83         MOV     R3,DPH
   \   000063   12....       LCALL   ??ZDP_NWKAddrOfInterestReq?relay
   \   000066   7401         MOV     A,#0x1
   \   000068   12....       LCALL   ?DEALLOC_XSTACK8
   \   00006B   E9           MOV     A,R1
   \   00006C   85..82       MOV     DPL,?XSP + 0
   \   00006F   85..83       MOV     DPH,?XSP + 1
   \   000072   F0           MOVX    @DPTR,A
    449          
    450            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   000073                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000073   AC82         MOV     R4,DPL
   \   000075   AD83         MOV     R5,DPH
   \   000077   7B01         MOV     R3,#0x1
   \   000079   EE           MOV     A,R6
   \   00007A   FA           MOV     R2,A
   \   00007B   7965         MOV     R1,#0x65
   \   00007D   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    451          }
   \   000080   740A         MOV     A,#0xa
   \   000082   12....       LCALL   ?DEALLOC_XSTACK8
   \   000085   7F01         MOV     R7,#0x1
   \   000087   02....       LJMP    ?BANKED_LEAVE_XDATA
    452          
    453          /***************************************************************************************************
    454           * @fn      MT_ZdoPowerDescRequest
    455           *
    456           * @brief   Handle a Power Descriptor request.
    457           *
    458           * @param   pData  - MT message data
    459           *
    460           * @return  void
    461           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    462          void MT_ZdoPowerDescRequest(uint8 *pBuf)
   \                     MT_ZdoPowerDescRequest:
    463          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    464            uint8 cmdId;
    465            uint8 retValue;
    466            zAddrType_t destAddr;
    467            uint16 shortAddr;
    468          
    469            /* parse header */
    470            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   FE           MOV     R6,A
    471            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000012   EA           MOV     A,R2
   \   000013   2403         ADD     A,#0x3
   \   000015   0A           INC     R2
   \   000016   0A           INC     R2
   \   000017   0A           INC     R2
   \   000018   EB           MOV     A,R3
   \   000019   3400         ADDC    A,#0x0
   \   00001B   FB           MOV     R3,A
    472          
    473            /* Dev address */
    474            destAddr.addrMode = Addr16Bit;
   \   00001C   7409         MOV     A,#0x9
   \   00001E   12....       LCALL   ?XSTACK_DISP0_8
   \   000021   7402         MOV     A,#0x2
   \   000023   F0           MOVX    @DPTR,A
    475            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000024   8A82         MOV     DPL,R2
   \   000026   8B83         MOV     DPH,R3
   \   000028   E0           MOVX    A,@DPTR
   \   000029   FC           MOV     R4,A
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   F9           MOV     R1,A
   \   00002D   EC           MOV     A,R4
   \   00002E   F8           MOV     R0,A
   \   00002F   7401         MOV     A,#0x1
   \   000031   12....       LCALL   ?XSTACK_DISP0_8
   \   000034   E8           MOV     A,R0
   \   000035   F0           MOVX    @DPTR,A
   \   000036   A3           INC     DPTR
   \   000037   E9           MOV     A,R1
   \   000038   F0           MOVX    @DPTR,A
    476            pBuf += 2;
   \   000039   EA           MOV     A,R2
   \   00003A   2402         ADD     A,#0x2
   \   00003C   0A           INC     R2
   \   00003D   0A           INC     R2
   \   00003E   EB           MOV     A,R3
   \   00003F   3400         ADDC    A,#0x0
   \   000041   FB           MOV     R3,A
    477          
    478            /* Network address of interest */
    479            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    480            pBuf += 2;
    481          
    482            retValue = (uint8)ZDP_PowerDescReq( &destAddr, shortAddr, 0);
   \   000042                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000042   75..00       MOV     ?V0 + 0,#0x0
   \   000045   78..         MOV     R0,#?V0 + 0
   \   000047   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00004A   7903         MOV     R1,#0x3
   \   00004C   8A82         MOV     DPL,R2
   \   00004E   8B83         MOV     DPH,R3
   \   000050   E0           MOVX    A,@DPTR
   \   000051   FC           MOV     R4,A
   \   000052   A3           INC     DPTR
   \   000053   E0           MOVX    A,@DPTR
   \   000054   FB           MOV     R3,A
   \   000055   EC           MOV     A,R4
   \   000056   2400         ADD     A,#0x0
   \   000058   E4           CLR     A
   \   000059   3B           ADDC    A,R3
   \   00005A   FD           MOV     R5,A
   \   00005B   7402         MOV     A,#0x2
   \   00005D   12....       LCALL   ?XSTACK_DISP0_8
   \   000060   AA82         MOV     R2,DPL
   \   000062   AB83         MOV     R3,DPH
   \   000064   12....       LCALL   ??ZDP_NWKAddrOfInterestReq?relay
   \   000067   7401         MOV     A,#0x1
   \   000069   12....       LCALL   ?DEALLOC_XSTACK8
   \   00006C   E9           MOV     A,R1
   \   00006D   85..82       MOV     DPL,?XSP + 0
   \   000070   85..83       MOV     DPH,?XSP + 1
   \   000073   F0           MOVX    @DPTR,A
    483          
    484            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   000074                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000074   AC82         MOV     R4,DPL
   \   000076   AD83         MOV     R5,DPH
   \   000078   7B01         MOV     R3,#0x1
   \   00007A   EE           MOV     A,R6
   \   00007B   FA           MOV     R2,A
   \   00007C   7965         MOV     R1,#0x65
   \   00007E   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    485          }
   \   000081   740A         MOV     A,#0xa
   \   000083   12....       LCALL   ?DEALLOC_XSTACK8
   \   000086   7F01         MOV     R7,#0x1
   \   000088   02....       LJMP    ?BANKED_LEAVE_XDATA
    486          
    487          /***************************************************************************************************
    488           * @fn      MT_ZdoSimpleDescRequest
    489           *
    490           * @brief   Handle a Simple Descriptor request.
    491           *
    492           * @param   pBuf  - MT message data
    493           *
    494           * @return  void
    495           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    496          void MT_ZdoSimpleDescRequest(uint8 *pBuf)
   \                     MT_ZdoSimpleDescRequest:
    497          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    498            uint8 cmdId;
    499            uint8 retValue;
    500            uint8 epInt;
    501            zAddrType_t destAddr;
    502            uint16 shortAddr;
    503          
    504            /* parse header */
    505            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   FE           MOV     R6,A
    506            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000012   EA           MOV     A,R2
   \   000013   2403         ADD     A,#0x3
   \   000015   0A           INC     R2
   \   000016   0A           INC     R2
   \   000017   0A           INC     R2
   \   000018   EB           MOV     A,R3
   \   000019   3400         ADDC    A,#0x0
   \   00001B   FB           MOV     R3,A
    507          
    508            /* Dev address */
    509            destAddr.addrMode = Addr16Bit;
   \   00001C   7409         MOV     A,#0x9
   \   00001E   12....       LCALL   ?XSTACK_DISP0_8
   \   000021   7402         MOV     A,#0x2
   \   000023   F0           MOVX    @DPTR,A
    510            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000024   8A82         MOV     DPL,R2
   \   000026   8B83         MOV     DPH,R3
   \   000028   E0           MOVX    A,@DPTR
   \   000029   FC           MOV     R4,A
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   F9           MOV     R1,A
   \   00002D   EC           MOV     A,R4
   \   00002E   F8           MOV     R0,A
   \   00002F   7401         MOV     A,#0x1
   \   000031   12....       LCALL   ?XSTACK_DISP0_8
   \   000034   E8           MOV     A,R0
   \   000035   F0           MOVX    @DPTR,A
   \   000036   A3           INC     DPTR
   \   000037   E9           MOV     A,R1
   \   000038   F0           MOVX    @DPTR,A
    511            pBuf += 2;
   \   000039   EA           MOV     A,R2
   \   00003A   2402         ADD     A,#0x2
   \   00003C   0A           INC     R2
   \   00003D   0A           INC     R2
   \   00003E   EB           MOV     A,R3
   \   00003F   3400         ADDC    A,#0x0
   \   000041   FB           MOV     R3,A
    512          
    513            /* Network address of interest */
    514            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    515            pBuf += 2;
    516          
    517            /* endpoint/interface */
    518            epInt = *pBuf++;
    519          
    520            retValue = (uint8)ZDP_SimpleDescReq( &destAddr, shortAddr, epInt, 0);
   \   000042                ; Setup parameters for call to function ZDP_SimpleDescReq
   \   000042   75..00       MOV     ?V0 + 0,#0x0
   \   000045   78..         MOV     R0,#?V0 + 0
   \   000047   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00004A   8A82         MOV     DPL,R2
   \   00004C   8B83         MOV     DPH,R3
   \   00004E   A3           INC     DPTR
   \   00004F   A3           INC     DPTR
   \   000050   E0           MOVX    A,@DPTR
   \   000051   F9           MOV     R1,A
   \   000052   8A82         MOV     DPL,R2
   \   000054   8B83         MOV     DPH,R3
   \   000056   E0           MOVX    A,@DPTR
   \   000057   FC           MOV     R4,A
   \   000058   A3           INC     DPTR
   \   000059   E0           MOVX    A,@DPTR
   \   00005A   FB           MOV     R3,A
   \   00005B   EC           MOV     A,R4
   \   00005C   2400         ADD     A,#0x0
   \   00005E   E4           CLR     A
   \   00005F   3B           ADDC    A,R3
   \   000060   FD           MOV     R5,A
   \   000061   7402         MOV     A,#0x2
   \   000063   12....       LCALL   ?XSTACK_DISP0_8
   \   000066   AA82         MOV     R2,DPL
   \   000068   AB83         MOV     R3,DPH
   \   00006A   12....       LCALL   ??ZDP_SimpleDescReq?relay
   \   00006D   7401         MOV     A,#0x1
   \   00006F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000072   E9           MOV     A,R1
   \   000073   85..82       MOV     DPL,?XSP + 0
   \   000076   85..83       MOV     DPH,?XSP + 1
   \   000079   F0           MOVX    @DPTR,A
    521          
    522            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   00007A                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00007A   AC82         MOV     R4,DPL
   \   00007C   AD83         MOV     R5,DPH
   \   00007E   7B01         MOV     R3,#0x1
   \   000080   EE           MOV     A,R6
   \   000081   FA           MOV     R2,A
   \   000082   7965         MOV     R1,#0x65
   \   000084   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    523          }
   \   000087   740A         MOV     A,#0xa
   \   000089   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008C   7F01         MOV     R7,#0x1
   \   00008E   02....       LJMP    ?BANKED_LEAVE_XDATA
    524          
    525          /***************************************************************************************************
    526           * @fn      MT_ZdoActiveEpRequest
    527           *
    528           * @brief   Handle a Active EP request.
    529           *
    530           * @param   pBuf  - MT message data
    531           *
    532           * @return  void
    533           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    534          void MT_ZdoActiveEpRequest(uint8 *pBuf)
   \                     MT_ZdoActiveEpRequest:
    535          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    536            uint8 cmdId;
    537            uint8 retValue;
    538            zAddrType_t destAddr;
    539            uint16 shortAddr;
    540          
    541            /* parse header */
    542            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   FE           MOV     R6,A
    543            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000012   EA           MOV     A,R2
   \   000013   2403         ADD     A,#0x3
   \   000015   0A           INC     R2
   \   000016   0A           INC     R2
   \   000017   0A           INC     R2
   \   000018   EB           MOV     A,R3
   \   000019   3400         ADDC    A,#0x0
   \   00001B   FB           MOV     R3,A
    544          
    545            /* Dev address */
    546            destAddr.addrMode = Addr16Bit;
   \   00001C   7409         MOV     A,#0x9
   \   00001E   12....       LCALL   ?XSTACK_DISP0_8
   \   000021   7402         MOV     A,#0x2
   \   000023   F0           MOVX    @DPTR,A
    547            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000024   8A82         MOV     DPL,R2
   \   000026   8B83         MOV     DPH,R3
   \   000028   E0           MOVX    A,@DPTR
   \   000029   FC           MOV     R4,A
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   F9           MOV     R1,A
   \   00002D   EC           MOV     A,R4
   \   00002E   F8           MOV     R0,A
   \   00002F   7401         MOV     A,#0x1
   \   000031   12....       LCALL   ?XSTACK_DISP0_8
   \   000034   E8           MOV     A,R0
   \   000035   F0           MOVX    @DPTR,A
   \   000036   A3           INC     DPTR
   \   000037   E9           MOV     A,R1
   \   000038   F0           MOVX    @DPTR,A
    548            pBuf += 2;
   \   000039   EA           MOV     A,R2
   \   00003A   2402         ADD     A,#0x2
   \   00003C   0A           INC     R2
   \   00003D   0A           INC     R2
   \   00003E   EB           MOV     A,R3
   \   00003F   3400         ADDC    A,#0x0
   \   000041   FB           MOV     R3,A
    549          
    550            /* Network address of interest */
    551            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    552            pBuf += 2;
    553          
    554            retValue = (uint8)ZDP_ActiveEPReq( &destAddr, shortAddr, 0);
   \   000042                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000042   75..00       MOV     ?V0 + 0,#0x0
   \   000045   78..         MOV     R0,#?V0 + 0
   \   000047   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00004A   7905         MOV     R1,#0x5
   \   00004C   8A82         MOV     DPL,R2
   \   00004E   8B83         MOV     DPH,R3
   \   000050   E0           MOVX    A,@DPTR
   \   000051   FC           MOV     R4,A
   \   000052   A3           INC     DPTR
   \   000053   E0           MOVX    A,@DPTR
   \   000054   FB           MOV     R3,A
   \   000055   EC           MOV     A,R4
   \   000056   2400         ADD     A,#0x0
   \   000058   E4           CLR     A
   \   000059   3B           ADDC    A,R3
   \   00005A   FD           MOV     R5,A
   \   00005B   7402         MOV     A,#0x2
   \   00005D   12....       LCALL   ?XSTACK_DISP0_8
   \   000060   AA82         MOV     R2,DPL
   \   000062   AB83         MOV     R3,DPH
   \   000064   12....       LCALL   ??ZDP_NWKAddrOfInterestReq?relay
   \   000067   7401         MOV     A,#0x1
   \   000069   12....       LCALL   ?DEALLOC_XSTACK8
   \   00006C   E9           MOV     A,R1
   \   00006D   85..82       MOV     DPL,?XSP + 0
   \   000070   85..83       MOV     DPH,?XSP + 1
   \   000073   F0           MOVX    @DPTR,A
    555          
    556            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   000074                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000074   AC82         MOV     R4,DPL
   \   000076   AD83         MOV     R5,DPH
   \   000078   7B01         MOV     R3,#0x1
   \   00007A   EE           MOV     A,R6
   \   00007B   FA           MOV     R2,A
   \   00007C   7965         MOV     R1,#0x65
   \   00007E   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    557          }
   \   000081   740A         MOV     A,#0xa
   \   000083   12....       LCALL   ?DEALLOC_XSTACK8
   \   000086   7F01         MOV     R7,#0x1
   \   000088   02....       LJMP    ?BANKED_LEAVE_XDATA
    558          
    559          /***************************************************************************************************
    560           * @fn      MT_ZdoMatchDescRequest
    561           *
    562           * @brief   Handle a Match Descriptor request.
    563           *
    564           * @param   pBuf  - MT message data
    565           *
    566           * @return  void
    567           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    568          void MT_ZdoMatchDescRequest(uint8 *pBuf)
   \                     MT_ZdoMatchDescRequest:
    569          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 74
   \   000005   74B6         MOV     A,#-0x4a
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    570            uint8 cmdId;
    571            uint8 retValue = 0;
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   E4           CLR     A
   \   000011   F0           MOVX    @DPTR,A
    572            uint8 i, numInClusters, numOutClusters;
    573            uint16 profileId;
    574            zAddrType_t destAddr;
    575            uint16 shortAddr;
    576            uint16 inClusters[MTZDO_MAX_MATCH_CLUSTERS], outClusters[MTZDO_MAX_MATCH_CLUSTERS];
    577          
    578            /* parse header */
    579            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   000012   8A82         MOV     DPL,R2
   \   000014   8B83         MOV     DPH,R3
   \   000016   A3           INC     DPTR
   \   000017   A3           INC     DPTR
   \   000018   E0           MOVX    A,@DPTR
   \   000019   FE           MOV     R6,A
    580            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   00001A   EA           MOV     A,R2
   \   00001B   2403         ADD     A,#0x3
   \   00001D   0A           INC     R2
   \   00001E   0A           INC     R2
   \   00001F   0A           INC     R2
   \   000020   EB           MOV     A,R3
   \   000021   3400         ADDC    A,#0x0
   \   000023   FB           MOV     R3,A
    581          
    582            /* Dev address */
    583            destAddr.addrMode = Addr16Bit;
   \   000024   7409         MOV     A,#0x9
   \   000026   12....       LCALL   ?XSTACK_DISP0_8
   \   000029   7402         MOV     A,#0x2
   \   00002B   F0           MOVX    @DPTR,A
    584            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   00002C   8A82         MOV     DPL,R2
   \   00002E   8B83         MOV     DPH,R3
   \   000030   E0           MOVX    A,@DPTR
   \   000031   FC           MOV     R4,A
   \   000032   A3           INC     DPTR
   \   000033   E0           MOVX    A,@DPTR
   \   000034   F9           MOV     R1,A
   \   000035   EC           MOV     A,R4
   \   000036   F8           MOV     R0,A
   \   000037   7401         MOV     A,#0x1
   \   000039   12....       LCALL   ?XSTACK_DISP0_8
   \   00003C   E8           MOV     A,R0
   \   00003D   F0           MOVX    @DPTR,A
   \   00003E   A3           INC     DPTR
   \   00003F   E9           MOV     A,R1
   \   000040   F0           MOVX    @DPTR,A
    585            pBuf += 2;
   \   000041   EA           MOV     A,R2
   \   000042   2402         ADD     A,#0x2
   \   000044   0A           INC     R2
   \   000045   0A           INC     R2
   \   000046   EB           MOV     A,R3
   \   000047   3400         ADDC    A,#0x0
   \   000049   FB           MOV     R3,A
    586          
    587            /* Network address of interest */
    588            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   00004A   8A82         MOV     DPL,R2
   \   00004C   8B83         MOV     DPH,R3
   \   00004E   E0           MOVX    A,@DPTR
   \   00004F   FC           MOV     R4,A
   \   000050   A3           INC     DPTR
   \   000051   E0           MOVX    A,@DPTR
   \   000052   F9           MOV     R1,A
   \   000053   EC           MOV     A,R4
   \   000054   2400         ADD     A,#0x0
   \   000056   E4           CLR     A
   \   000057   39           ADDC    A,R1
   \   000058   FD           MOV     R5,A
    589            pBuf += 2;
   \   000059   EA           MOV     A,R2
   \   00005A   2402         ADD     A,#0x2
   \   00005C   0A           INC     R2
   \   00005D   0A           INC     R2
   \   00005E   EB           MOV     A,R3
   \   00005F   3400         ADDC    A,#0x0
   \   000061   FB           MOV     R3,A
    590          
    591            /* Profile ID */
    592            profileId = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000062   8A82         MOV     DPL,R2
   \   000064   8B83         MOV     DPH,R3
   \   000066   E0           MOVX    A,@DPTR
   \   000067   F5..         MOV     ?V0 + 0,A
   \   000069   A3           INC     DPTR
   \   00006A   E0           MOVX    A,@DPTR
   \   00006B   F8           MOV     R0,A
   \   00006C   E4           CLR     A
   \   00006D   C8           XCH     A,R0
   \   00006E   F9           MOV     R1,A
   \   00006F   E5..         MOV     A,?V0 + 0
   \   000071   2400         ADD     A,#0x0
   \   000073   E4           CLR     A
   \   000074   39           ADDC    A,R1
   \   000075   F5..         MOV     ?V0 + 1,A
    593            pBuf += 2;
   \   000077   EA           MOV     A,R2
   \   000078   2402         ADD     A,#0x2
   \   00007A   0A           INC     R2
   \   00007B   0A           INC     R2
   \   00007C   EB           MOV     A,R3
   \   00007D   3400         ADDC    A,#0x0
   \   00007F   FB           MOV     R3,A
    594          
    595            /* NumInClusters */
    596            numInClusters = *pBuf++;
   \   000080   8A82         MOV     DPL,R2
   \   000082   8B83         MOV     DPH,R3
   \   000084   E0           MOVX    A,@DPTR
   \   000085   FF           MOV     R7,A
   \   000086   A3           INC     DPTR
   \   000087   AA82         MOV     R2,DPL
   \   000089   AB83         MOV     R3,DPH
    597            if ( numInClusters <= MTZDO_MAX_MATCH_CLUSTERS )
   \   00008B   C3           CLR     C
   \   00008C   9411         SUBB    A,#0x11
   \   00008E   5044         JNC     ??MT_ZdoMatchDescRequest_0
    598            {
    599              /* IN clusters */
    600              for ( i = 0; i < numInClusters; i++ )
   \   000090   88..         MOV     ?V0 + 2,R0
   \                     ??MT_ZdoMatchDescRequest_1:
   \   000092   E5..         MOV     A,?V0 + 2
   \   000094   C3           CLR     C
   \   000095   9F           SUBB    A,R7
   \   000096   5045         JNC     ??MT_ZdoMatchDescRequest_2
    601              {
    602                inClusters[i] = BUILD_UINT16( pBuf[0], pBuf[1]);
   \   000098   8A82         MOV     DPL,R2
   \   00009A   8B83         MOV     DPH,R3
   \   00009C   E0           MOVX    A,@DPTR
   \   00009D   F5..         MOV     ?V0 + 4,A
   \   00009F   A3           INC     DPTR
   \   0000A0   E0           MOVX    A,@DPTR
   \   0000A1   F9           MOV     R1,A
   \   0000A2   E5..         MOV     A,?V0 + 4
   \   0000A4   2400         ADD     A,#0x0
   \   0000A6   E4           CLR     A
   \   0000A7   39           ADDC    A,R1
   \   0000A8   F5..         MOV     ?V0 + 5,A
   \   0000AA   E5..         MOV     A,?V0 + 2
   \   0000AC   33           RLC     A
   \   0000AD   F8           MOV     R0,A
   \   0000AE   E4           CLR     A
   \   0000AF   33           RLC     A
   \   0000B0   F9           MOV     R1,A
   \   0000B1   742A         MOV     A,#0x2a
   \   0000B3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B6   E582         MOV     A,DPL
   \   0000B8   28           ADD     A,R0
   \   0000B9   F582         MOV     DPL,A
   \   0000BB   E583         MOV     A,DPH
   \   0000BD   39           ADDC    A,R1
   \   0000BE   F583         MOV     DPH,A
   \   0000C0   E5..         MOV     A,?V0 + 4
   \   0000C2   F0           MOVX    @DPTR,A
   \   0000C3   A3           INC     DPTR
   \   0000C4   E5..         MOV     A,?V0 + 5
   \   0000C6   F0           MOVX    @DPTR,A
    603                pBuf += 2;
   \   0000C7   EA           MOV     A,R2
   \   0000C8   2402         ADD     A,#0x2
   \   0000CA   0A           INC     R2
   \   0000CB   0A           INC     R2
   \   0000CC   EB           MOV     A,R3
   \   0000CD   3400         ADDC    A,#0x0
   \   0000CF   FB           MOV     R3,A
    604              }
   \   0000D0   05..         INC     ?V0 + 2
   \   0000D2   80BE         SJMP    ??MT_ZdoMatchDescRequest_1
    605            }
    606            else
    607            {
    608              retValue = ZDP_INVALID_REQTYPE;
   \                     ??MT_ZdoMatchDescRequest_0:
   \   0000D4   85..82       MOV     DPL,?XSP + 0
   \   0000D7   85..83       MOV     DPH,?XSP + 1
   \   0000DA   7480         MOV     A,#-0x80
   \   0000DC   F0           MOVX    @DPTR,A
    609            }
    610          
    611            /* NumOutClusters */
    612            numOutClusters = *pBuf++;
   \                     ??MT_ZdoMatchDescRequest_2:
   \   0000DD   8A82         MOV     DPL,R2
   \   0000DF   8B83         MOV     DPH,R3
   \   0000E1   E0           MOVX    A,@DPTR
   \   0000E2   F5..         MOV     ?V0 + 6,A
   \   0000E4   A3           INC     DPTR
   \   0000E5   AA82         MOV     R2,DPL
   \   0000E7   AB83         MOV     R3,DPH
    613            if ( numOutClusters <= MTZDO_MAX_MATCH_CLUSTERS )
   \   0000E9   C3           CLR     C
   \   0000EA   9411         SUBB    A,#0x11
   \   0000EC   5046         JNC     ??MT_ZdoMatchDescRequest_3
    614            {
    615              /* OUT Clusters */
    616              for ( i = 0; i < numOutClusters; i++ )
   \   0000EE   75..00       MOV     ?V0 + 2,#0x0
   \                     ??MT_ZdoMatchDescRequest_4:
   \   0000F1   E5..         MOV     A,?V0 + 2
   \   0000F3   C3           CLR     C
   \   0000F4   95..         SUBB    A,?V0 + 6
   \   0000F6   5045         JNC     ??MT_ZdoMatchDescRequest_5
    617              {
    618                outClusters[i] = BUILD_UINT16( pBuf[0], pBuf[1]);
   \   0000F8   8A82         MOV     DPL,R2
   \   0000FA   8B83         MOV     DPH,R3
   \   0000FC   E0           MOVX    A,@DPTR
   \   0000FD   F5..         MOV     ?V0 + 4,A
   \   0000FF   A3           INC     DPTR
   \   000100   E0           MOVX    A,@DPTR
   \   000101   F9           MOV     R1,A
   \   000102   E5..         MOV     A,?V0 + 4
   \   000104   2400         ADD     A,#0x0
   \   000106   E4           CLR     A
   \   000107   39           ADDC    A,R1
   \   000108   F5..         MOV     ?V0 + 5,A
   \   00010A   E5..         MOV     A,?V0 + 2
   \   00010C   33           RLC     A
   \   00010D   F8           MOV     R0,A
   \   00010E   E4           CLR     A
   \   00010F   33           RLC     A
   \   000110   F9           MOV     R1,A
   \   000111   740A         MOV     A,#0xa
   \   000113   12....       LCALL   ?XSTACK_DISP0_8
   \   000116   E582         MOV     A,DPL
   \   000118   28           ADD     A,R0
   \   000119   F582         MOV     DPL,A
   \   00011B   E583         MOV     A,DPH
   \   00011D   39           ADDC    A,R1
   \   00011E   F583         MOV     DPH,A
   \   000120   E5..         MOV     A,?V0 + 4
   \   000122   F0           MOVX    @DPTR,A
   \   000123   A3           INC     DPTR
   \   000124   E5..         MOV     A,?V0 + 5
   \   000126   F0           MOVX    @DPTR,A
    619                pBuf += 2;
   \   000127   EA           MOV     A,R2
   \   000128   2402         ADD     A,#0x2
   \   00012A   0A           INC     R2
   \   00012B   0A           INC     R2
   \   00012C   EB           MOV     A,R3
   \   00012D   3400         ADDC    A,#0x0
   \   00012F   FB           MOV     R3,A
    620              }
   \   000130   05..         INC     ?V0 + 2
   \   000132   80BD         SJMP    ??MT_ZdoMatchDescRequest_4
    621            }
    622            else
    623            {
    624              retValue = ZDP_INVALID_REQTYPE;
   \                     ??MT_ZdoMatchDescRequest_3:
   \   000134   85..82       MOV     DPL,?XSP + 0
   \   000137   85..83       MOV     DPH,?XSP + 1
   \   00013A   7480         MOV     A,#-0x80
   \   00013C   F0           MOVX    @DPTR,A
    625            }
    626          
    627            if ( retValue == 0 )
   \                     ??MT_ZdoMatchDescRequest_5:
   \   00013D   85..82       MOV     DPL,?XSP + 0
   \   000140   85..83       MOV     DPH,?XSP + 1
   \   000143   E0           MOVX    A,@DPTR
   \   000144   7051         JNZ     ??MT_ZdoMatchDescRequest_6
    628            {
    629              retValue = (uint8)ZDP_MatchDescReq( &destAddr, shortAddr, profileId, numInClusters,
    630                                                 inClusters, numOutClusters, outClusters, 0);
   \   000146                ; Setup parameters for call to function ZDP_MatchDescReq
   \   000146   75..00       MOV     ?V0 + 2,#0x0
   \   000149   78..         MOV     R0,#?V0 + 2
   \   00014B   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00014E   740B         MOV     A,#0xb
   \   000150   12....       LCALL   ?XSTACK_DISP0_8
   \   000153   8582..       MOV     ?V0 + 2,DPL
   \   000156   8583..       MOV     ?V0 + 3,DPH
   \   000159   78..         MOV     R0,#?V0 + 2
   \   00015B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00015E   E5..         MOV     A,?V0 + 6
   \   000160   F5..         MOV     ?V0 + 2,A
   \   000162   78..         MOV     R0,#?V0 + 2
   \   000164   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000167   742E         MOV     A,#0x2e
   \   000169   12....       LCALL   ?XSTACK_DISP0_8
   \   00016C   8582..       MOV     ?V0 + 2,DPL
   \   00016F   8583..       MOV     ?V0 + 3,DPH
   \   000172   78..         MOV     R0,#?V0 + 2
   \   000174   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000177   78..         MOV     R0,#?V0 + 0
   \   000179   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00017C   EF           MOV     A,R7
   \   00017D   F9           MOV     R1,A
   \   00017E   7409         MOV     A,#0x9
   \   000180   12....       LCALL   ?XSTACK_DISP0_8
   \   000183   AA82         MOV     R2,DPL
   \   000185   AB83         MOV     R3,DPH
   \   000187   12....       LCALL   ??ZDP_MatchDescReq?relay
   \   00018A   7408         MOV     A,#0x8
   \   00018C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00018F   E9           MOV     A,R1
   \   000190   85..82       MOV     DPL,?XSP + 0
   \   000193   85..83       MOV     DPH,?XSP + 1
   \   000196   F0           MOVX    @DPTR,A
    631            }
    632          
    633            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \                     ??MT_ZdoMatchDescRequest_6:
   \   000197                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000197   AC82         MOV     R4,DPL
   \   000199   AD83         MOV     R5,DPH
   \   00019B   7B01         MOV     R3,#0x1
   \   00019D   EE           MOV     A,R6
   \   00019E   FA           MOV     R2,A
   \   00019F   7965         MOV     R1,#0x65
   \   0001A1   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    634          }
   \   0001A4   744A         MOV     A,#0x4a
   \   0001A6   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001A9   7F07         MOV     R7,#0x7
   \   0001AB   02....       LJMP    ?BANKED_LEAVE_XDATA
    635          
    636          /***************************************************************************************************
    637           * @fn      MT_ZdoComplexDescRequest
    638           *
    639           * @brief   Handle a Complex Descriptor request.
    640           *
    641           * @param   pBuf  - MT message data
    642           *
    643           * @return  void
    644           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    645          void MT_ZdoComplexDescRequest(uint8 *pBuf)
   \                     MT_ZdoComplexDescRequest:
    646          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    647            uint8 cmdId;
    648            uint8 retValue;
    649            zAddrType_t destAddr;
    650            uint16 shortAddr;
    651          
    652            /* parse header */
    653            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   FE           MOV     R6,A
    654            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000012   EA           MOV     A,R2
   \   000013   2403         ADD     A,#0x3
   \   000015   0A           INC     R2
   \   000016   0A           INC     R2
   \   000017   0A           INC     R2
   \   000018   EB           MOV     A,R3
   \   000019   3400         ADDC    A,#0x0
   \   00001B   FB           MOV     R3,A
    655          
    656            /* Dev address */
    657            destAddr.addrMode = Addr16Bit;
   \   00001C   7409         MOV     A,#0x9
   \   00001E   12....       LCALL   ?XSTACK_DISP0_8
   \   000021   7402         MOV     A,#0x2
   \   000023   F0           MOVX    @DPTR,A
    658            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000024   8A82         MOV     DPL,R2
   \   000026   8B83         MOV     DPH,R3
   \   000028   E0           MOVX    A,@DPTR
   \   000029   FC           MOV     R4,A
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   F9           MOV     R1,A
   \   00002D   EC           MOV     A,R4
   \   00002E   F8           MOV     R0,A
   \   00002F   7401         MOV     A,#0x1
   \   000031   12....       LCALL   ?XSTACK_DISP0_8
   \   000034   E8           MOV     A,R0
   \   000035   F0           MOVX    @DPTR,A
   \   000036   A3           INC     DPTR
   \   000037   E9           MOV     A,R1
   \   000038   F0           MOVX    @DPTR,A
    659            pBuf += 2;
   \   000039   EA           MOV     A,R2
   \   00003A   2402         ADD     A,#0x2
   \   00003C   0A           INC     R2
   \   00003D   0A           INC     R2
   \   00003E   EB           MOV     A,R3
   \   00003F   3400         ADDC    A,#0x0
   \   000041   FB           MOV     R3,A
    660          
    661            /* Network address of interest */
    662            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    663            pBuf += 2;
    664          
    665            retValue = (uint8)ZDP_ComplexDescReq( &destAddr, shortAddr, 0);
   \   000042                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000042   75..00       MOV     ?V0 + 0,#0x0
   \   000045   78..         MOV     R0,#?V0 + 0
   \   000047   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00004A   7910         MOV     R1,#0x10
   \   00004C   8A82         MOV     DPL,R2
   \   00004E   8B83         MOV     DPH,R3
   \   000050   E0           MOVX    A,@DPTR
   \   000051   FC           MOV     R4,A
   \   000052   A3           INC     DPTR
   \   000053   E0           MOVX    A,@DPTR
   \   000054   FB           MOV     R3,A
   \   000055   EC           MOV     A,R4
   \   000056   2400         ADD     A,#0x0
   \   000058   E4           CLR     A
   \   000059   3B           ADDC    A,R3
   \   00005A   FD           MOV     R5,A
   \   00005B   7402         MOV     A,#0x2
   \   00005D   12....       LCALL   ?XSTACK_DISP0_8
   \   000060   AA82         MOV     R2,DPL
   \   000062   AB83         MOV     R3,DPH
   \   000064   12....       LCALL   ??ZDP_NWKAddrOfInterestReq?relay
   \   000067   7401         MOV     A,#0x1
   \   000069   12....       LCALL   ?DEALLOC_XSTACK8
   \   00006C   E9           MOV     A,R1
   \   00006D   85..82       MOV     DPL,?XSP + 0
   \   000070   85..83       MOV     DPH,?XSP + 1
   \   000073   F0           MOVX    @DPTR,A
    666          
    667            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   000074                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000074   AC82         MOV     R4,DPL
   \   000076   AD83         MOV     R5,DPH
   \   000078   7B01         MOV     R3,#0x1
   \   00007A   EE           MOV     A,R6
   \   00007B   FA           MOV     R2,A
   \   00007C   7965         MOV     R1,#0x65
   \   00007E   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    668          }
   \   000081   740A         MOV     A,#0xa
   \   000083   12....       LCALL   ?DEALLOC_XSTACK8
   \   000086   7F01         MOV     R7,#0x1
   \   000088   02....       LJMP    ?BANKED_LEAVE_XDATA
    669          
    670          /***************************************************************************************************
    671           * @fn      MT_ZdoUserDescRequest
    672           *
    673           * @brief   Handle a User Descriptor request.
    674           *
    675           * @param   pBuf  - MT message data
    676           *
    677           * @return  void
    678           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    679          void MT_ZdoUserDescRequest(uint8 *pBuf)
   \                     MT_ZdoUserDescRequest:
    680          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    681            uint8 cmdId;
    682            uint8 retValue;
    683            zAddrType_t destAddr;
    684            uint16 shortAddr;
    685          
    686            /* parse header */
    687            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   FE           MOV     R6,A
    688            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000012   EA           MOV     A,R2
   \   000013   2403         ADD     A,#0x3
   \   000015   0A           INC     R2
   \   000016   0A           INC     R2
   \   000017   0A           INC     R2
   \   000018   EB           MOV     A,R3
   \   000019   3400         ADDC    A,#0x0
   \   00001B   FB           MOV     R3,A
    689          
    690            /* Dev address */
    691            destAddr.addrMode = Addr16Bit;
   \   00001C   7409         MOV     A,#0x9
   \   00001E   12....       LCALL   ?XSTACK_DISP0_8
   \   000021   7402         MOV     A,#0x2
   \   000023   F0           MOVX    @DPTR,A
    692            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1]);
   \   000024   8A82         MOV     DPL,R2
   \   000026   8B83         MOV     DPH,R3
   \   000028   E0           MOVX    A,@DPTR
   \   000029   FC           MOV     R4,A
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   F9           MOV     R1,A
   \   00002D   EC           MOV     A,R4
   \   00002E   F8           MOV     R0,A
   \   00002F   7401         MOV     A,#0x1
   \   000031   12....       LCALL   ?XSTACK_DISP0_8
   \   000034   E8           MOV     A,R0
   \   000035   F0           MOVX    @DPTR,A
   \   000036   A3           INC     DPTR
   \   000037   E9           MOV     A,R1
   \   000038   F0           MOVX    @DPTR,A
    693            pBuf += 2;
   \   000039   EA           MOV     A,R2
   \   00003A   2402         ADD     A,#0x2
   \   00003C   0A           INC     R2
   \   00003D   0A           INC     R2
   \   00003E   EB           MOV     A,R3
   \   00003F   3400         ADDC    A,#0x0
   \   000041   FB           MOV     R3,A
    694          
    695            /* Network address of interest */
    696            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1]);
    697            pBuf += 2;
    698          
    699            retValue = (uint8)ZDP_UserDescReq( &destAddr, shortAddr, 0);
   \   000042                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000042   75..00       MOV     ?V0 + 0,#0x0
   \   000045   78..         MOV     R0,#?V0 + 0
   \   000047   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00004A   7911         MOV     R1,#0x11
   \   00004C   8A82         MOV     DPL,R2
   \   00004E   8B83         MOV     DPH,R3
   \   000050   E0           MOVX    A,@DPTR
   \   000051   FC           MOV     R4,A
   \   000052   A3           INC     DPTR
   \   000053   E0           MOVX    A,@DPTR
   \   000054   FB           MOV     R3,A
   \   000055   EC           MOV     A,R4
   \   000056   2400         ADD     A,#0x0
   \   000058   E4           CLR     A
   \   000059   3B           ADDC    A,R3
   \   00005A   FD           MOV     R5,A
   \   00005B   7402         MOV     A,#0x2
   \   00005D   12....       LCALL   ?XSTACK_DISP0_8
   \   000060   AA82         MOV     R2,DPL
   \   000062   AB83         MOV     R3,DPH
   \   000064   12....       LCALL   ??ZDP_NWKAddrOfInterestReq?relay
   \   000067   7401         MOV     A,#0x1
   \   000069   12....       LCALL   ?DEALLOC_XSTACK8
   \   00006C   E9           MOV     A,R1
   \   00006D   85..82       MOV     DPL,?XSP + 0
   \   000070   85..83       MOV     DPH,?XSP + 1
   \   000073   F0           MOVX    @DPTR,A
    700          
    701            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   000074                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000074   AC82         MOV     R4,DPL
   \   000076   AD83         MOV     R5,DPH
   \   000078   7B01         MOV     R3,#0x1
   \   00007A   EE           MOV     A,R6
   \   00007B   FA           MOV     R2,A
   \   00007C   7965         MOV     R1,#0x65
   \   00007E   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    702          }
   \   000081   740A         MOV     A,#0xa
   \   000083   12....       LCALL   ?DEALLOC_XSTACK8
   \   000086   7F01         MOV     R7,#0x1
   \   000088   02....       LJMP    ?BANKED_LEAVE_XDATA
    703          
    704          /***************************************************************************************************
    705           * @fn      MT_ZdoEndDevAnnce
    706           *
    707           * @brief   Handle a End Device Announce Descriptor request.
    708           *
    709           * @param   pBuf  - MT message data
    710           *
    711           * @return  void
    712           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    713          void MT_ZdoEndDevAnnce(uint8 *pBuf)
   \                     MT_ZdoEndDevAnnce:
    714          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FC           MOV     R4,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FD           MOV     R5,A
    715            uint8 cmdId;
    716            uint8 retValue;
    717            uint16 shortAddr;
    718            uint8 *pIEEEAddr;
    719          
    720            /* parse header */
    721            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000E   8C82         MOV     DPL,R4
   \   000010   8D83         MOV     DPH,R5
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   E0           MOVX    A,@DPTR
   \   000015   FE           MOV     R6,A
    722            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000016   EC           MOV     A,R4
   \   000017   2403         ADD     A,#0x3
   \   000019   0C           INC     R4
   \   00001A   0C           INC     R4
   \   00001B   0C           INC     R4
   \   00001C   ED           MOV     A,R5
   \   00001D   3400         ADDC    A,#0x0
   \   00001F   FD           MOV     R5,A
    723          
    724            /* network address */
    725            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000020   8C82         MOV     DPL,R4
   \   000022   8D83         MOV     DPH,R5
   \   000024   E0           MOVX    A,@DPTR
   \   000025   FA           MOV     R2,A
   \   000026   A3           INC     DPTR
   \   000027   E0           MOVX    A,@DPTR
   \   000028   F8           MOV     R0,A
   \   000029   E4           CLR     A
   \   00002A   C8           XCH     A,R0
   \   00002B   F9           MOV     R1,A
   \   00002C   EA           MOV     A,R2
   \   00002D   2400         ADD     A,#0x0
   \   00002F   E4           CLR     A
   \   000030   39           ADDC    A,R1
   \   000031   FB           MOV     R3,A
    726            pBuf += 2;
   \   000032   EC           MOV     A,R4
   \   000033   2402         ADD     A,#0x2
   \   000035   0C           INC     R4
   \   000036   0C           INC     R4
   \   000037   ED           MOV     A,R5
   \   000038   3400         ADDC    A,#0x0
   \   00003A   FD           MOV     R5,A
    727          
    728            /* extended address */
    729            pIEEEAddr = pBuf;
    730            pBuf += Z_EXTADDR_LEN;
    731          
    732            retValue = (uint8)ZDP_DeviceAnnce( shortAddr, pIEEEAddr, *pBuf, 0);
   \   00003B                ; Setup parameters for call to function ZDP_DeviceAnnce
   \   00003B   88..         MOV     ?V0 + 0,R0
   \   00003D   78..         MOV     R0,#?V0 + 0
   \   00003F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000042   8C82         MOV     DPL,R4
   \   000044   8D83         MOV     DPH,R5
   \   000046   A3           INC     DPTR
   \   000047   A3           INC     DPTR
   \   000048   A3           INC     DPTR
   \   000049   A3           INC     DPTR
   \   00004A   A3           INC     DPTR
   \   00004B   A3           INC     DPTR
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   E0           MOVX    A,@DPTR
   \   00004F   F9           MOV     R1,A
   \   000050   12....       LCALL   ??ZDP_DeviceAnnce?relay
   \   000053   7401         MOV     A,#0x1
   \   000055   12....       LCALL   ?DEALLOC_XSTACK8
   \   000058   E9           MOV     A,R1
   \   000059   85..82       MOV     DPL,?XSP + 0
   \   00005C   85..83       MOV     DPH,?XSP + 1
   \   00005F   F0           MOVX    @DPTR,A
    733          
    734            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   000060                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000060   AC82         MOV     R4,DPL
   \   000062   AD83         MOV     R5,DPH
   \   000064   7B01         MOV     R3,#0x1
   \   000066   EE           MOV     A,R6
   \   000067   FA           MOV     R2,A
   \   000068   7965         MOV     R1,#0x65
   \   00006A   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    735          }
   \   00006D   7401         MOV     A,#0x1
   \   00006F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000072   7F01         MOV     R7,#0x1
   \   000074   02....       LJMP    ?BANKED_LEAVE_XDATA
    736          
    737          /***************************************************************************************************
    738           * @fn      MT_ZdoUserDescSet
    739           *
    740           * @brief   Handle a User Descriptor Set.
    741           *
    742           * @param   pBuf  - MT message data
    743           *
    744           * @return  void
    745           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    746          void MT_ZdoUserDescSet(uint8 *pBuf)
   \                     MT_ZdoUserDescSet:
    747          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 27
   \   000005   74E5         MOV     A,#-0x1b
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    748            uint8 cmdId;
    749            uint8 retValue;
    750            zAddrType_t destAddr;
    751            uint16 shortAddr;
    752            UserDescriptorFormat_t userDesc;
    753          
    754            /* parse header */
    755            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F5..         MOV     ?V0 + 3,A
    756            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000013   EA           MOV     A,R2
   \   000014   2403         ADD     A,#0x3
   \   000016   0A           INC     R2
   \   000017   0A           INC     R2
   \   000018   0A           INC     R2
   \   000019   EB           MOV     A,R3
   \   00001A   3400         ADDC    A,#0x0
   \   00001C   FB           MOV     R3,A
    757          
    758            /* Dev address */
    759            destAddr.addrMode = Addr16Bit;
   \   00001D   7409         MOV     A,#0x9
   \   00001F   12....       LCALL   ?XSTACK_DISP0_8
   \   000022   7402         MOV     A,#0x2
   \   000024   F0           MOVX    @DPTR,A
    760            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000025   8A82         MOV     DPL,R2
   \   000027   8B83         MOV     DPH,R3
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   FC           MOV     R4,A
   \   00002B   A3           INC     DPTR
   \   00002C   E0           MOVX    A,@DPTR
   \   00002D   F9           MOV     R1,A
   \   00002E   EC           MOV     A,R4
   \   00002F   F8           MOV     R0,A
   \   000030   7401         MOV     A,#0x1
   \   000032   12....       LCALL   ?XSTACK_DISP0_8
   \   000035   E8           MOV     A,R0
   \   000036   F0           MOVX    @DPTR,A
   \   000037   A3           INC     DPTR
   \   000038   E9           MOV     A,R1
   \   000039   F0           MOVX    @DPTR,A
    761            pBuf += 2;
   \   00003A   EA           MOV     A,R2
   \   00003B   2402         ADD     A,#0x2
   \   00003D   0A           INC     R2
   \   00003E   0A           INC     R2
   \   00003F   EB           MOV     A,R3
   \   000040   3400         ADDC    A,#0x0
   \   000042   FB           MOV     R3,A
    762          
    763            /* Network address of interest */
    764            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000043   8A82         MOV     DPL,R2
   \   000045   8B83         MOV     DPH,R3
   \   000047   E0           MOVX    A,@DPTR
   \   000048   FC           MOV     R4,A
   \   000049   A3           INC     DPTR
   \   00004A   E0           MOVX    A,@DPTR
   \   00004B   F8           MOV     R0,A
   \   00004C   E4           CLR     A
   \   00004D   C8           XCH     A,R0
   \   00004E   F9           MOV     R1,A
   \   00004F   EC           MOV     A,R4
   \   000050   2400         ADD     A,#0x0
   \   000052   FE           MOV     R6,A
   \   000053   E4           CLR     A
   \   000054   39           ADDC    A,R1
   \   000055   FF           MOV     R7,A
    765            pBuf += 2;
   \   000056   EA           MOV     A,R2
   \   000057   2402         ADD     A,#0x2
   \   000059   0A           INC     R2
   \   00005A   0A           INC     R2
   \   00005B   EB           MOV     A,R3
   \   00005C   3400         ADDC    A,#0x0
   \   00005E   FB           MOV     R3,A
    766          
    767            /* User descriptor */
    768            userDesc.len = *pBuf++;
   \   00005F   8A82         MOV     DPL,R2
   \   000061   8B83         MOV     DPH,R3
   \   000063   E0           MOVX    A,@DPTR
   \   000064   C0E0         PUSH    A
   \   000066   740A         MOV     A,#0xa
   \   000068   12....       LCALL   ?XSTACK_DISP0_8
   \   00006B   D0E0         POP     A
   \   00006D   F0           MOVX    @DPTR,A
   \   00006E   8A82         MOV     DPL,R2
   \   000070   8B83         MOV     DPH,R3
   \   000072   A3           INC     DPTR
   \   000073   AA82         MOV     R2,DPL
   \   000075   AB83         MOV     R3,DPH
    769            osal_memcpy( userDesc.desc, pBuf, userDesc.len );
   \   000077                ; Setup parameters for call to function osal_memcpy
   \   000077   8A..         MOV     ?V0 + 0,R2
   \   000079   8B..         MOV     ?V0 + 1,R3
   \   00007B   88..         MOV     ?V0 + 2,R0
   \   00007D   78..         MOV     R0,#?V0 + 0
   \   00007F   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000082   740D         MOV     A,#0xd
   \   000084   12....       LCALL   ?XSTACK_DISP0_8
   \   000087   E0           MOVX    A,@DPTR
   \   000088   FC           MOV     R4,A
   \   000089   7D00         MOV     R5,#0x0
   \   00008B   740E         MOV     A,#0xe
   \   00008D   12....       LCALL   ?XSTACK_DISP0_8
   \   000090   AA82         MOV     R2,DPL
   \   000092   AB83         MOV     R3,DPH
   \   000094   12....       LCALL   ??osal_memcpy?relay
   \   000097   7403         MOV     A,#0x3
   \   000099   12....       LCALL   ?DEALLOC_XSTACK8
    770            pBuf += 16;
    771          
    772            retValue = (uint8)ZDP_UserDescSet( &destAddr, shortAddr, &userDesc, 0);
   \   00009C                ; Setup parameters for call to function ZDP_UserDescSet
   \   00009C   740A         MOV     A,#0xa
   \   00009E   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A1   8582..       MOV     ?V0 + 0,DPL
   \   0000A4   8583..       MOV     ?V0 + 1,DPH
   \   0000A7   78..         MOV     R0,#?V0 + 0
   \   0000A9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000AC   7900         MOV     R1,#0x0
   \   0000AE   EE           MOV     A,R6
   \   0000AF   FC           MOV     R4,A
   \   0000B0   EF           MOV     A,R7
   \   0000B1   FD           MOV     R5,A
   \   0000B2   7403         MOV     A,#0x3
   \   0000B4   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B7   AA82         MOV     R2,DPL
   \   0000B9   AB83         MOV     R3,DPH
   \   0000BB   12....       LCALL   ??ZDP_UserDescSet?relay
   \   0000BE   7402         MOV     A,#0x2
   \   0000C0   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000C3   E9           MOV     A,R1
   \   0000C4   85..82       MOV     DPL,?XSP + 0
   \   0000C7   85..83       MOV     DPH,?XSP + 1
   \   0000CA   F0           MOVX    @DPTR,A
    773          
    774            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   0000CB                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0000CB   AC82         MOV     R4,DPL
   \   0000CD   AD83         MOV     R5,DPH
   \   0000CF   7B01         MOV     R3,#0x1
   \   0000D1   AA..         MOV     R2,?V0 + 3
   \   0000D3   7965         MOV     R1,#0x65
   \   0000D5   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    775          }
   \   0000D8   741B         MOV     A,#0x1b
   \   0000DA   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000DD   7F04         MOV     R7,#0x4
   \   0000DF   02....       LJMP    ?BANKED_LEAVE_XDATA
    776          
    777          /***************************************************************************************************
    778           * @fn      MT_ZdoServiceDiscRequest
    779           *
    780           * @brief   Handle a Server Discovery request.
    781           *
    782           * @param   pBuf  - MT message data
    783           *
    784           * @return  void
    785           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    786          void MT_ZdoServiceDiscRequest(uint8 *pBuf)
   \                     MT_ZdoServiceDiscRequest:
    787          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    788            uint8 cmdId;
    789            uint8 retValue;
    790            uint16 serviceMask;
    791          
    792            /* parse header */
    793            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   FE           MOV     R6,A
    794            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000012   EA           MOV     A,R2
   \   000013   2403         ADD     A,#0x3
   \   000015   0A           INC     R2
   \   000016   0A           INC     R2
   \   000017   0A           INC     R2
   \   000018   EB           MOV     A,R3
   \   000019   3400         ADDC    A,#0x0
   \   00001B   FB           MOV     R3,A
    795          
    796            /* Service Mask */
    797            serviceMask = BUILD_UINT16( pBuf[0], pBuf[1]);
    798            pBuf += 2;
    799          
    800            retValue = (uint8)ZDP_ServerDiscReq( serviceMask, 0);
   \   00001C                ; Setup parameters for call to function ZDP_ServerDiscReq
   \   00001C   7900         MOV     R1,#0x0
   \   00001E   8A82         MOV     DPL,R2
   \   000020   8B83         MOV     DPH,R3
   \   000022   E0           MOVX    A,@DPTR
   \   000023   FC           MOV     R4,A
   \   000024   A3           INC     DPTR
   \   000025   E0           MOVX    A,@DPTR
   \   000026   FB           MOV     R3,A
   \   000027   EC           MOV     A,R4
   \   000028   FA           MOV     R2,A
   \   000029   12....       LCALL   ??ZDP_ServerDiscReq?relay
   \   00002C   E9           MOV     A,R1
   \   00002D   85..82       MOV     DPL,?XSP + 0
   \   000030   85..83       MOV     DPH,?XSP + 1
   \   000033   F0           MOVX    @DPTR,A
    801          
    802            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   000034                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000034   AC82         MOV     R4,DPL
   \   000036   AD83         MOV     R5,DPH
   \   000038   7B01         MOV     R3,#0x1
   \   00003A   EE           MOV     A,R6
   \   00003B   FA           MOV     R2,A
   \   00003C   7965         MOV     R1,#0x65
   \   00003E   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    803          }
   \   000041   7401         MOV     A,#0x1
   \   000043   12....       LCALL   ?DEALLOC_XSTACK8
   \   000046   7F01         MOV     R7,#0x1
   \   000048   02....       LJMP    ?BANKED_LEAVE_XDATA
    804          
    805          /***************************************************************************************************
    806           * @fn      MT_ZdoEndDevBindRequest
    807           *
    808           * @brief   Handle a End Device Bind request.
    809           *
    810           * @param   pBuf  - MT message data
    811           *
    812           * @return  void
    813           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    814          void MT_ZdoEndDevBindRequest(uint8 *pBuf)
   \                     MT_ZdoEndDevBindRequest:
    815          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 70
   \   000005   74BA         MOV     A,#-0x46
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    816            uint8 cmdId;
    817            uint8 retValue = 0;
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   E4           CLR     A
   \   000011   F0           MOVX    @DPTR,A
    818            uint8 i, epInt, numInClusters, numOutClusters;
    819            zAddrType_t destAddr;
    820            uint16 shortAddr;
    821            uint16 profileID, inClusters[MTZDO_MAX_ED_BIND_CLUSTERS], outClusters[MTZDO_MAX_ED_BIND_CLUSTERS];
    822          
    823            /* parse header */
    824            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   000012   8A82         MOV     DPL,R2
   \   000014   8B83         MOV     DPH,R3
   \   000016   A3           INC     DPTR
   \   000017   A3           INC     DPTR
   \   000018   E0           MOVX    A,@DPTR
   \   000019   FE           MOV     R6,A
    825            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   00001A   EA           MOV     A,R2
   \   00001B   2403         ADD     A,#0x3
   \   00001D   0A           INC     R2
   \   00001E   0A           INC     R2
   \   00001F   0A           INC     R2
   \   000020   EB           MOV     A,R3
   \   000021   3400         ADDC    A,#0x0
   \   000023   FB           MOV     R3,A
    826          
    827            /* Dev address */
    828            destAddr.addrMode = Addr16Bit;
   \   000024   7409         MOV     A,#0x9
   \   000026   12....       LCALL   ?XSTACK_DISP0_8
   \   000029   7402         MOV     A,#0x2
   \   00002B   F0           MOVX    @DPTR,A
    829            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   00002C   8A82         MOV     DPL,R2
   \   00002E   8B83         MOV     DPH,R3
   \   000030   E0           MOVX    A,@DPTR
   \   000031   FC           MOV     R4,A
   \   000032   A3           INC     DPTR
   \   000033   E0           MOVX    A,@DPTR
   \   000034   F9           MOV     R1,A
   \   000035   EC           MOV     A,R4
   \   000036   F8           MOV     R0,A
   \   000037   7401         MOV     A,#0x1
   \   000039   12....       LCALL   ?XSTACK_DISP0_8
   \   00003C   E8           MOV     A,R0
   \   00003D   F0           MOVX    @DPTR,A
   \   00003E   A3           INC     DPTR
   \   00003F   E9           MOV     A,R1
   \   000040   F0           MOVX    @DPTR,A
    830            pBuf += 2;
   \   000041   EA           MOV     A,R2
   \   000042   2402         ADD     A,#0x2
   \   000044   0A           INC     R2
   \   000045   0A           INC     R2
   \   000046   EB           MOV     A,R3
   \   000047   3400         ADDC    A,#0x0
   \   000049   FB           MOV     R3,A
    831          
    832            /* Local coordinator of the binding */
    833            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   00004A   8A82         MOV     DPL,R2
   \   00004C   8B83         MOV     DPH,R3
   \   00004E   E0           MOVX    A,@DPTR
   \   00004F   FC           MOV     R4,A
   \   000050   A3           INC     DPTR
   \   000051   E0           MOVX    A,@DPTR
   \   000052   F9           MOV     R1,A
   \   000053   EC           MOV     A,R4
   \   000054   2400         ADD     A,#0x0
   \   000056   E4           CLR     A
   \   000057   39           ADDC    A,R1
   \   000058   FD           MOV     R5,A
    834            pBuf += 2;
    835            
    836            /* For now, skip past the extended address */
    837            pBuf += Z_EXTADDR_LEN;
   \   000059   EA           MOV     A,R2
   \   00005A   240A         ADD     A,#0xa
   \   00005C   FA           MOV     R2,A
   \   00005D   EB           MOV     A,R3
   \   00005E   3400         ADDC    A,#0x0
   \   000060   FB           MOV     R3,A
    838          
    839            /* Endpoint */
    840            epInt = *pBuf++;
   \   000061   8A82         MOV     DPL,R2
   \   000063   8B83         MOV     DPH,R3
   \   000065   E0           MOVX    A,@DPTR
   \   000066   FF           MOV     R7,A
   \   000067   A3           INC     DPTR
   \   000068   AA82         MOV     R2,DPL
   \   00006A   AB83         MOV     R3,DPH
    841          
    842            /* Profile ID */
    843            profileID = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   00006C   E0           MOVX    A,@DPTR
   \   00006D   F5..         MOV     ?V0 + 0,A
   \   00006F   A3           INC     DPTR
   \   000070   E0           MOVX    A,@DPTR
   \   000071   F8           MOV     R0,A
   \   000072   E4           CLR     A
   \   000073   C8           XCH     A,R0
   \   000074   F9           MOV     R1,A
   \   000075   E5..         MOV     A,?V0 + 0
   \   000077   2400         ADD     A,#0x0
   \   000079   E4           CLR     A
   \   00007A   39           ADDC    A,R1
   \   00007B   F5..         MOV     ?V0 + 1,A
    844            pBuf += 2;
   \   00007D   EA           MOV     A,R2
   \   00007E   2402         ADD     A,#0x2
   \   000080   0A           INC     R2
   \   000081   0A           INC     R2
   \   000082   EB           MOV     A,R3
   \   000083   3400         ADDC    A,#0x0
   \   000085   FB           MOV     R3,A
    845          
    846            /* NumInClusters */
    847            numInClusters = *pBuf++;
   \   000086   8A82         MOV     DPL,R2
   \   000088   8B83         MOV     DPH,R3
   \   00008A   E0           MOVX    A,@DPTR
   \   00008B   F5..         MOV     ?V0 + 4,A
   \   00008D   A3           INC     DPTR
   \   00008E   0A           INC     R2
   \   00008F   AB83         MOV     R3,DPH
    848            if ( numInClusters <= MTZDO_MAX_ED_BIND_CLUSTERS )
   \   000091   C3           CLR     C
   \   000092   9410         SUBB    A,#0x10
   \   000094   5045         JNC     ??MT_ZdoEndDevBindRequest_0
    849            {
    850              for ( i = 0; i < numInClusters; i++ )
   \   000096   88..         MOV     ?V0 + 2,R0
   \                     ??MT_ZdoEndDevBindRequest_1:
   \   000098   E5..         MOV     A,?V0 + 2
   \   00009A   C3           CLR     C
   \   00009B   95..         SUBB    A,?V0 + 4
   \   00009D   5045         JNC     ??MT_ZdoEndDevBindRequest_2
    851              {
    852                inClusters[i] = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   00009F   8A82         MOV     DPL,R2
   \   0000A1   8B83         MOV     DPH,R3
   \   0000A3   E0           MOVX    A,@DPTR
   \   0000A4   F5..         MOV     ?V0 + 6,A
   \   0000A6   A3           INC     DPTR
   \   0000A7   E0           MOVX    A,@DPTR
   \   0000A8   F9           MOV     R1,A
   \   0000A9   E5..         MOV     A,?V0 + 6
   \   0000AB   2400         ADD     A,#0x0
   \   0000AD   E4           CLR     A
   \   0000AE   39           ADDC    A,R1
   \   0000AF   F5..         MOV     ?V0 + 7,A
   \   0000B1   E5..         MOV     A,?V0 + 2
   \   0000B3   33           RLC     A
   \   0000B4   F8           MOV     R0,A
   \   0000B5   E4           CLR     A
   \   0000B6   33           RLC     A
   \   0000B7   F9           MOV     R1,A
   \   0000B8   7428         MOV     A,#0x28
   \   0000BA   12....       LCALL   ?XSTACK_DISP0_8
   \   0000BD   E582         MOV     A,DPL
   \   0000BF   28           ADD     A,R0
   \   0000C0   F582         MOV     DPL,A
   \   0000C2   E583         MOV     A,DPH
   \   0000C4   39           ADDC    A,R1
   \   0000C5   F583         MOV     DPH,A
   \   0000C7   E5..         MOV     A,?V0 + 6
   \   0000C9   F0           MOVX    @DPTR,A
   \   0000CA   A3           INC     DPTR
   \   0000CB   E5..         MOV     A,?V0 + 7
   \   0000CD   F0           MOVX    @DPTR,A
    853                pBuf += 2;
   \   0000CE   EA           MOV     A,R2
   \   0000CF   2402         ADD     A,#0x2
   \   0000D1   0A           INC     R2
   \   0000D2   0A           INC     R2
   \   0000D3   EB           MOV     A,R3
   \   0000D4   3400         ADDC    A,#0x0
   \   0000D6   FB           MOV     R3,A
    854              }
   \   0000D7   05..         INC     ?V0 + 2
   \   0000D9   80BD         SJMP    ??MT_ZdoEndDevBindRequest_1
    855            }
    856            else
    857              retValue = ZDP_INVALID_REQTYPE;
   \                     ??MT_ZdoEndDevBindRequest_0:
   \   0000DB   85..82       MOV     DPL,?XSP + 0
   \   0000DE   85..83       MOV     DPH,?XSP + 1
   \   0000E1   7480         MOV     A,#-0x80
   \   0000E3   F0           MOVX    @DPTR,A
    858          
    859            /* NumOutClusters */
    860            numOutClusters = *pBuf++;
   \                     ??MT_ZdoEndDevBindRequest_2:
   \   0000E4   8A82         MOV     DPL,R2
   \   0000E6   8B83         MOV     DPH,R3
   \   0000E8   E0           MOVX    A,@DPTR
   \   0000E9   F5..         MOV     ?V0 + 5,A
   \   0000EB   A3           INC     DPTR
   \   0000EC   AA82         MOV     R2,DPL
   \   0000EE   AB83         MOV     R3,DPH
    861            if ( numOutClusters <= MTZDO_MAX_ED_BIND_CLUSTERS )
   \   0000F0   C3           CLR     C
   \   0000F1   9410         SUBB    A,#0x10
   \   0000F3   5046         JNC     ??MT_ZdoEndDevBindRequest_3
    862            {
    863              for ( i = 0; i < numOutClusters; i++ )
   \   0000F5   75..00       MOV     ?V0 + 2,#0x0
   \                     ??MT_ZdoEndDevBindRequest_4:
   \   0000F8   E5..         MOV     A,?V0 + 2
   \   0000FA   C3           CLR     C
   \   0000FB   95..         SUBB    A,?V0 + 5
   \   0000FD   5045         JNC     ??MT_ZdoEndDevBindRequest_5
    864              {
    865                outClusters[i] = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   0000FF   8A82         MOV     DPL,R2
   \   000101   8B83         MOV     DPH,R3
   \   000103   E0           MOVX    A,@DPTR
   \   000104   F5..         MOV     ?V0 + 6,A
   \   000106   A3           INC     DPTR
   \   000107   E0           MOVX    A,@DPTR
   \   000108   F9           MOV     R1,A
   \   000109   E5..         MOV     A,?V0 + 6
   \   00010B   2400         ADD     A,#0x0
   \   00010D   E4           CLR     A
   \   00010E   39           ADDC    A,R1
   \   00010F   F5..         MOV     ?V0 + 7,A
   \   000111   E5..         MOV     A,?V0 + 2
   \   000113   33           RLC     A
   \   000114   F8           MOV     R0,A
   \   000115   E4           CLR     A
   \   000116   33           RLC     A
   \   000117   F9           MOV     R1,A
   \   000118   740A         MOV     A,#0xa
   \   00011A   12....       LCALL   ?XSTACK_DISP0_8
   \   00011D   E582         MOV     A,DPL
   \   00011F   28           ADD     A,R0
   \   000120   F582         MOV     DPL,A
   \   000122   E583         MOV     A,DPH
   \   000124   39           ADDC    A,R1
   \   000125   F583         MOV     DPH,A
   \   000127   E5..         MOV     A,?V0 + 6
   \   000129   F0           MOVX    @DPTR,A
   \   00012A   A3           INC     DPTR
   \   00012B   E5..         MOV     A,?V0 + 7
   \   00012D   F0           MOVX    @DPTR,A
    866                pBuf += 2;
   \   00012E   EA           MOV     A,R2
   \   00012F   2402         ADD     A,#0x2
   \   000131   0A           INC     R2
   \   000132   0A           INC     R2
   \   000133   EB           MOV     A,R3
   \   000134   3400         ADDC    A,#0x0
   \   000136   FB           MOV     R3,A
    867              }
   \   000137   05..         INC     ?V0 + 2
   \   000139   80BD         SJMP    ??MT_ZdoEndDevBindRequest_4
    868            }
    869            else
    870              retValue = ZDP_INVALID_REQTYPE;
   \                     ??MT_ZdoEndDevBindRequest_3:
   \   00013B   85..82       MOV     DPL,?XSP + 0
   \   00013E   85..83       MOV     DPH,?XSP + 1
   \   000141   7480         MOV     A,#-0x80
   \   000143   F0           MOVX    @DPTR,A
    871            
    872            if ( retValue == 0 )
   \                     ??MT_ZdoEndDevBindRequest_5:
   \   000144   85..82       MOV     DPL,?XSP + 0
   \   000147   85..83       MOV     DPH,?XSP + 1
   \   00014A   E0           MOVX    A,@DPTR
   \   00014B   705A         JNZ     ??MT_ZdoEndDevBindRequest_6
    873            {
    874              retValue = (uint8)ZDP_EndDeviceBindReq( &destAddr, shortAddr, epInt, profileID,
    875                                                    numInClusters, inClusters, numOutClusters, outClusters, 0);
   \   00014D                ; Setup parameters for call to function ZDP_EndDeviceBindReq
   \   00014D   75..00       MOV     ?V0 + 2,#0x0
   \   000150   78..         MOV     R0,#?V0 + 2
   \   000152   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000155   740B         MOV     A,#0xb
   \   000157   12....       LCALL   ?XSTACK_DISP0_8
   \   00015A   8582..       MOV     ?V0 + 2,DPL
   \   00015D   8583..       MOV     ?V0 + 3,DPH
   \   000160   78..         MOV     R0,#?V0 + 2
   \   000162   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000165   E5..         MOV     A,?V0 + 5
   \   000167   F5..         MOV     ?V0 + 2,A
   \   000169   78..         MOV     R0,#?V0 + 2
   \   00016B   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00016E   742C         MOV     A,#0x2c
   \   000170   12....       LCALL   ?XSTACK_DISP0_8
   \   000173   8582..       MOV     ?V0 + 2,DPL
   \   000176   8583..       MOV     ?V0 + 3,DPH
   \   000179   78..         MOV     R0,#?V0 + 2
   \   00017B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00017E   E5..         MOV     A,?V0 + 4
   \   000180   F5..         MOV     ?V0 + 2,A
   \   000182   78..         MOV     R0,#?V0 + 2
   \   000184   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000187   78..         MOV     R0,#?V0 + 0
   \   000189   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00018C   EF           MOV     A,R7
   \   00018D   F9           MOV     R1,A
   \   00018E   740A         MOV     A,#0xa
   \   000190   12....       LCALL   ?XSTACK_DISP0_8
   \   000193   AA82         MOV     R2,DPL
   \   000195   AB83         MOV     R3,DPH
   \   000197   12....       LCALL   ??ZDP_EndDeviceBindReq?relay
   \   00019A   7409         MOV     A,#0x9
   \   00019C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00019F   E9           MOV     A,R1
   \   0001A0   85..82       MOV     DPL,?XSP + 0
   \   0001A3   85..83       MOV     DPH,?XSP + 1
   \   0001A6   F0           MOVX    @DPTR,A
    876            }
    877          
    878            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \                     ??MT_ZdoEndDevBindRequest_6:
   \   0001A7                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0001A7   AC82         MOV     R4,DPL
   \   0001A9   AD83         MOV     R5,DPH
   \   0001AB   7B01         MOV     R3,#0x1
   \   0001AD   EE           MOV     A,R6
   \   0001AE   FA           MOV     R2,A
   \   0001AF   7965         MOV     R1,#0x65
   \   0001B1   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    879          }
   \   0001B4   7446         MOV     A,#0x46
   \   0001B6   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001B9   7F08         MOV     R7,#0x8
   \   0001BB   02....       LJMP    ?BANKED_LEAVE_XDATA
    880          
    881          /***************************************************************************************************
    882           * @fn      MT_ZdoBindRequest
    883           *
    884           * @brief   Handle a Bind request.
    885           *
    886           * @param   pBuf  - MT message data
    887           *
    888           * @return  void
    889           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    890          void MT_ZdoBindRequest(uint8 *pBuf)
   \                     MT_ZdoBindRequest:
    891          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 19
   \   000005   74ED         MOV     A,#-0x13
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    892            uint8 cmdId;
    893            uint8 retValue;
    894            zAddrType_t destAddr, devAddr;
    895            uint8 *pSrcAddr, *ptr;
    896            uint8 srcEPInt, dstEPInt;
    897            uint16 clusterID;
    898          
    899            /* parse header */
    900            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   E0           MOVX    A,@DPTR
   \   000015   F5..         MOV     ?V0 + 0,A
    901            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000017   EE           MOV     A,R6
   \   000018   2403         ADD     A,#0x3
   \   00001A   0E           INC     R6
   \   00001B   0E           INC     R6
   \   00001C   0E           INC     R6
   \   00001D   EF           MOV     A,R7
   \   00001E   3400         ADDC    A,#0x0
   \   000020   FF           MOV     R7,A
    902          
    903            /* Dev address */
    904            destAddr.addrMode = Addr16Bit;
   \   000021   7412         MOV     A,#0x12
   \   000023   12....       LCALL   ?XSTACK_DISP0_8
   \   000026   7402         MOV     A,#0x2
   \   000028   F0           MOVX    @DPTR,A
    905            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000029   8E82         MOV     DPL,R6
   \   00002B   8F83         MOV     DPH,R7
   \   00002D   E0           MOVX    A,@DPTR
   \   00002E   FA           MOV     R2,A
   \   00002F   A3           INC     DPTR
   \   000030   E0           MOVX    A,@DPTR
   \   000031   F9           MOV     R1,A
   \   000032   EA           MOV     A,R2
   \   000033   F8           MOV     R0,A
   \   000034   740A         MOV     A,#0xa
   \   000036   12....       LCALL   ?XSTACK_DISP0_8
   \   000039   E8           MOV     A,R0
   \   00003A   F0           MOVX    @DPTR,A
   \   00003B   A3           INC     DPTR
   \   00003C   E9           MOV     A,R1
   \   00003D   F0           MOVX    @DPTR,A
    906            pBuf += 2;
    907          
    908            /* SrcAddress */
    909            pSrcAddr = pBuf;
   \   00003E   EE           MOV     A,R6
   \   00003F   2402         ADD     A,#0x2
   \   000041   F5..         MOV     ?V0 + 2,A
   \   000043   EF           MOV     A,R7
   \   000044   3400         ADDC    A,#0x0
   \   000046   F5..         MOV     ?V0 + 3,A
    910            pBuf += Z_EXTADDR_LEN;
   \   000048   E5..         MOV     A,?V0 + 2
   \   00004A   2408         ADD     A,#0x8
   \   00004C   FE           MOV     R6,A
   \   00004D   E5..         MOV     A,?V0 + 3
   \   00004F   3400         ADDC    A,#0x0
   \   000051   FF           MOV     R7,A
    911          
    912            /* SrcEPInt */
    913            srcEPInt = *pBuf++;
   \   000052   8E82         MOV     DPL,R6
   \   000054   8F83         MOV     DPH,R7
   \   000056   E0           MOVX    A,@DPTR
   \   000057   F5..         MOV     ?V0 + 1,A
   \   000059   A3           INC     DPTR
   \   00005A   AE82         MOV     R6,DPL
   \   00005C   AF83         MOV     R7,DPH
    914          
    915            /* ClusterID */
    916            clusterID = BUILD_UINT16( pBuf[0], pBuf[1]);
   \   00005E   E0           MOVX    A,@DPTR
   \   00005F   FA           MOV     R2,A
   \   000060   A3           INC     DPTR
   \   000061   E0           MOVX    A,@DPTR
   \   000062   F9           MOV     R1,A
   \   000063   EA           MOV     A,R2
   \   000064   2400         ADD     A,#0x0
   \   000066   F5..         MOV     ?V0 + 6,A
   \   000068   E4           CLR     A
   \   000069   39           ADDC    A,R1
   \   00006A   F5..         MOV     ?V0 + 7,A
    917            pBuf += 2;
   \   00006C   EE           MOV     A,R6
   \   00006D   2402         ADD     A,#0x2
   \   00006F   0E           INC     R6
   \   000070   0E           INC     R6
   \   000071   EF           MOV     A,R7
   \   000072   3400         ADDC    A,#0x0
   \   000074   FF           MOV     R7,A
    918          
    919            /* Destination Address mode */
    920            devAddr.addrMode = *pBuf++;
   \   000075   8E82         MOV     DPL,R6
   \   000077   8F83         MOV     DPH,R7
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   F8           MOV     R0,A
   \   00007B   C0E0         PUSH    A
   \   00007D   7409         MOV     A,#0x9
   \   00007F   12....       LCALL   ?XSTACK_DISP0_8
   \   000082   D0E0         POP     A
   \   000084   F0           MOVX    @DPTR,A
   \   000085   8E82         MOV     DPL,R6
   \   000087   8F83         MOV     DPH,R7
   \   000089   A3           INC     DPTR
   \   00008A   0E           INC     R6
   \   00008B   AF83         MOV     R7,DPH
    921          
    922            /* Destination Address */
    923            if ( devAddr.addrMode == Addr64Bit )
   \   00008D   7403         MOV     A,#0x3
   \   00008F   68           XRL     A,R0
   \   000090   7012         JNZ     ??MT_ZdoBindRequest_0
    924            {
    925              ptr = pBuf;
    926              osal_cpyExtAddr( devAddr.addr.extAddr, ptr );
   \   000092                ; Setup parameters for call to function sAddrExtCpy
   \   000092   EE           MOV     A,R6
   \   000093   FC           MOV     R4,A
   \   000094   EF           MOV     A,R7
   \   000095   FD           MOV     R5,A
   \   000096   7401         MOV     A,#0x1
   \   000098   12....       LCALL   ?XSTACK_DISP0_8
   \   00009B   AA82         MOV     R2,DPL
   \   00009D   AB83         MOV     R3,DPH
   \   00009F   12....       LCALL   ??sAddrExtCpy?relay
   \   0000A2   8011         SJMP    ??MT_ZdoBindRequest_1
    927            }
    928            else
    929            {
    930              devAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??MT_ZdoBindRequest_0:
   \   0000A4   E0           MOVX    A,@DPTR
   \   0000A5   FA           MOV     R2,A
   \   0000A6   A3           INC     DPTR
   \   0000A7   E0           MOVX    A,@DPTR
   \   0000A8   F9           MOV     R1,A
   \   0000A9   EA           MOV     A,R2
   \   0000AA   F8           MOV     R0,A
   \   0000AB   7401         MOV     A,#0x1
   \   0000AD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B0   E8           MOV     A,R0
   \   0000B1   F0           MOVX    @DPTR,A
   \   0000B2   A3           INC     DPTR
   \   0000B3   E9           MOV     A,R1
   \   0000B4   F0           MOVX    @DPTR,A
    931            }
    932            /* The short address occupies LSB two bytes */
    933            pBuf += Z_EXTADDR_LEN;
    934          
    935            /* DstEPInt */
    936            dstEPInt = *pBuf;
    937          
    938            retValue = (uint8)ZDP_BindReq( &destAddr, pSrcAddr, srcEPInt, clusterID, &devAddr, dstEPInt, 0);
   \                     ??MT_ZdoBindRequest_1:
   \   0000B5                ; Setup parameters for call to function ZDP_BindUnbindReq
   \   0000B5   75..00       MOV     ?V0 + 4,#0x0
   \   0000B8   78..         MOV     R0,#?V0 + 4
   \   0000BA   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000BD   8E82         MOV     DPL,R6
   \   0000BF   8F83         MOV     DPH,R7
   \   0000C1   A3           INC     DPTR
   \   0000C2   A3           INC     DPTR
   \   0000C3   A3           INC     DPTR
   \   0000C4   A3           INC     DPTR
   \   0000C5   A3           INC     DPTR
   \   0000C6   A3           INC     DPTR
   \   0000C7   A3           INC     DPTR
   \   0000C8   A3           INC     DPTR
   \   0000C9   E0           MOVX    A,@DPTR
   \   0000CA   F5..         MOV     ?V0 + 4,A
   \   0000CC   78..         MOV     R0,#?V0 + 4
   \   0000CE   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000D1   7403         MOV     A,#0x3
   \   0000D3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D6   8582..       MOV     ?V0 + 4,DPL
   \   0000D9   8583..       MOV     ?V0 + 5,DPH
   \   0000DC   78..         MOV     R0,#?V0 + 4
   \   0000DE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E1   78..         MOV     R0,#?V0 + 6
   \   0000E3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E6   78..         MOV     R0,#?V0 + 2
   \   0000E8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000EB   A9..         MOV     R1,?V0 + 1
   \   0000ED   7412         MOV     A,#0x12
   \   0000EF   12....       LCALL   ?XSTACK_DISP0_8
   \   0000F2   AC82         MOV     R4,DPL
   \   0000F4   AD83         MOV     R5,DPH
   \   0000F6   7A21         MOV     R2,#0x21
   \   0000F8   7B00         MOV     R3,#0x0
   \   0000FA   12....       LCALL   ??ZDP_BindUnbindReq?relay
   \   0000FD   7408         MOV     A,#0x8
   \   0000FF   12....       LCALL   ?DEALLOC_XSTACK8
   \   000102   E9           MOV     A,R1
   \   000103   85..82       MOV     DPL,?XSP + 0
   \   000106   85..83       MOV     DPH,?XSP + 1
   \   000109   F0           MOVX    @DPTR,A
    939          
    940            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   00010A                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00010A   AC82         MOV     R4,DPL
   \   00010C   AD83         MOV     R5,DPH
   \   00010E   7B01         MOV     R3,#0x1
   \   000110   AA..         MOV     R2,?V0 + 0
   \   000112   7965         MOV     R1,#0x65
   \   000114   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    941          }
   \   000117   7413         MOV     A,#0x13
   \   000119   12....       LCALL   ?DEALLOC_XSTACK8
   \   00011C   7F08         MOV     R7,#0x8
   \   00011E   02....       LJMP    ?BANKED_LEAVE_XDATA
    942          
    943          /***************************************************************************************************
    944           * @fn      MT_ZdoUnbindRequest
    945           *
    946           * @brief   Handle a Unbind request.
    947           *
    948           * @param   pBuf  - MT message data
    949           *
    950           * @return  void
    951           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    952          void MT_ZdoUnbindRequest(uint8 *pBuf)
   \                     MT_ZdoUnbindRequest:
    953          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 19
   \   000005   74ED         MOV     A,#-0x13
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    954            uint8 cmdId;
    955            uint8 retValue;
    956            zAddrType_t destAddr, devAddr;
    957            uint8 *pSrcAddr, *ptr;
    958            uint8 srcEPInt, dstEPInt;
    959            uint16 clusterID;
    960          
    961            /* parse header */
    962            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   E0           MOVX    A,@DPTR
   \   000015   F5..         MOV     ?V0 + 0,A
    963            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000017   EE           MOV     A,R6
   \   000018   2403         ADD     A,#0x3
   \   00001A   0E           INC     R6
   \   00001B   0E           INC     R6
   \   00001C   0E           INC     R6
   \   00001D   EF           MOV     A,R7
   \   00001E   3400         ADDC    A,#0x0
   \   000020   FF           MOV     R7,A
    964          
    965            /* dev address */
    966            destAddr.addrMode = Addr16Bit;
   \   000021   7412         MOV     A,#0x12
   \   000023   12....       LCALL   ?XSTACK_DISP0_8
   \   000026   7402         MOV     A,#0x2
   \   000028   F0           MOVX    @DPTR,A
    967            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000029   8E82         MOV     DPL,R6
   \   00002B   8F83         MOV     DPH,R7
   \   00002D   E0           MOVX    A,@DPTR
   \   00002E   FA           MOV     R2,A
   \   00002F   A3           INC     DPTR
   \   000030   E0           MOVX    A,@DPTR
   \   000031   F9           MOV     R1,A
   \   000032   EA           MOV     A,R2
   \   000033   F8           MOV     R0,A
   \   000034   740A         MOV     A,#0xa
   \   000036   12....       LCALL   ?XSTACK_DISP0_8
   \   000039   E8           MOV     A,R0
   \   00003A   F0           MOVX    @DPTR,A
   \   00003B   A3           INC     DPTR
   \   00003C   E9           MOV     A,R1
   \   00003D   F0           MOVX    @DPTR,A
    968            pBuf += 2;
    969          
    970            /* SrcAddress */
    971            pSrcAddr = pBuf;
   \   00003E   EE           MOV     A,R6
   \   00003F   2402         ADD     A,#0x2
   \   000041   F5..         MOV     ?V0 + 2,A
   \   000043   EF           MOV     A,R7
   \   000044   3400         ADDC    A,#0x0
   \   000046   F5..         MOV     ?V0 + 3,A
    972            pBuf += Z_EXTADDR_LEN;
   \   000048   E5..         MOV     A,?V0 + 2
   \   00004A   2408         ADD     A,#0x8
   \   00004C   FE           MOV     R6,A
   \   00004D   E5..         MOV     A,?V0 + 3
   \   00004F   3400         ADDC    A,#0x0
   \   000051   FF           MOV     R7,A
    973          
    974            /* SrcEPInt */
    975            srcEPInt = *pBuf++;
   \   000052   8E82         MOV     DPL,R6
   \   000054   8F83         MOV     DPH,R7
   \   000056   E0           MOVX    A,@DPTR
   \   000057   F5..         MOV     ?V0 + 1,A
   \   000059   A3           INC     DPTR
   \   00005A   AE82         MOV     R6,DPL
   \   00005C   AF83         MOV     R7,DPH
    976          
    977            /* ClusterID */
    978            clusterID = BUILD_UINT16( pBuf[0], pBuf[1]);
   \   00005E   E0           MOVX    A,@DPTR
   \   00005F   FA           MOV     R2,A
   \   000060   A3           INC     DPTR
   \   000061   E0           MOVX    A,@DPTR
   \   000062   F9           MOV     R1,A
   \   000063   EA           MOV     A,R2
   \   000064   2400         ADD     A,#0x0
   \   000066   F5..         MOV     ?V0 + 6,A
   \   000068   E4           CLR     A
   \   000069   39           ADDC    A,R1
   \   00006A   F5..         MOV     ?V0 + 7,A
    979            pBuf += 2;
   \   00006C   EE           MOV     A,R6
   \   00006D   2402         ADD     A,#0x2
   \   00006F   0E           INC     R6
   \   000070   0E           INC     R6
   \   000071   EF           MOV     A,R7
   \   000072   3400         ADDC    A,#0x0
   \   000074   FF           MOV     R7,A
    980          
    981            /* Destination Address mode */
    982            devAddr.addrMode = *pBuf++;
   \   000075   8E82         MOV     DPL,R6
   \   000077   8F83         MOV     DPH,R7
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   F8           MOV     R0,A
   \   00007B   C0E0         PUSH    A
   \   00007D   7409         MOV     A,#0x9
   \   00007F   12....       LCALL   ?XSTACK_DISP0_8
   \   000082   D0E0         POP     A
   \   000084   F0           MOVX    @DPTR,A
   \   000085   8E82         MOV     DPL,R6
   \   000087   8F83         MOV     DPH,R7
   \   000089   A3           INC     DPTR
   \   00008A   0E           INC     R6
   \   00008B   AF83         MOV     R7,DPH
    983          
    984            /* Destination Address */
    985            if ( devAddr.addrMode == Addr64Bit )
   \   00008D   7403         MOV     A,#0x3
   \   00008F   68           XRL     A,R0
   \   000090   7012         JNZ     ??MT_ZdoUnbindRequest_0
    986            {
    987              ptr = pBuf;
    988              osal_cpyExtAddr( devAddr.addr.extAddr, ptr );
   \   000092                ; Setup parameters for call to function sAddrExtCpy
   \   000092   EE           MOV     A,R6
   \   000093   FC           MOV     R4,A
   \   000094   EF           MOV     A,R7
   \   000095   FD           MOV     R5,A
   \   000096   7401         MOV     A,#0x1
   \   000098   12....       LCALL   ?XSTACK_DISP0_8
   \   00009B   AA82         MOV     R2,DPL
   \   00009D   AB83         MOV     R3,DPH
   \   00009F   12....       LCALL   ??sAddrExtCpy?relay
   \   0000A2   8011         SJMP    ??MT_ZdoUnbindRequest_1
    989            }
    990            else
    991            {
    992              devAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??MT_ZdoUnbindRequest_0:
   \   0000A4   E0           MOVX    A,@DPTR
   \   0000A5   FA           MOV     R2,A
   \   0000A6   A3           INC     DPTR
   \   0000A7   E0           MOVX    A,@DPTR
   \   0000A8   F9           MOV     R1,A
   \   0000A9   EA           MOV     A,R2
   \   0000AA   F8           MOV     R0,A
   \   0000AB   7401         MOV     A,#0x1
   \   0000AD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B0   E8           MOV     A,R0
   \   0000B1   F0           MOVX    @DPTR,A
   \   0000B2   A3           INC     DPTR
   \   0000B3   E9           MOV     A,R1
   \   0000B4   F0           MOVX    @DPTR,A
    993            }
    994            /* The short address occupies LSB two bytes */
    995            pBuf += Z_EXTADDR_LEN;
    996          
    997            /* dstEPInt */
    998            dstEPInt = *pBuf;
    999          
   1000            retValue = (uint8)ZDP_UnbindReq( &destAddr, pSrcAddr, srcEPInt, clusterID, &devAddr, dstEPInt, 0);
   \                     ??MT_ZdoUnbindRequest_1:
   \   0000B5                ; Setup parameters for call to function ZDP_BindUnbindReq
   \   0000B5   75..00       MOV     ?V0 + 4,#0x0
   \   0000B8   78..         MOV     R0,#?V0 + 4
   \   0000BA   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000BD   8E82         MOV     DPL,R6
   \   0000BF   8F83         MOV     DPH,R7
   \   0000C1   A3           INC     DPTR
   \   0000C2   A3           INC     DPTR
   \   0000C3   A3           INC     DPTR
   \   0000C4   A3           INC     DPTR
   \   0000C5   A3           INC     DPTR
   \   0000C6   A3           INC     DPTR
   \   0000C7   A3           INC     DPTR
   \   0000C8   A3           INC     DPTR
   \   0000C9   E0           MOVX    A,@DPTR
   \   0000CA   F5..         MOV     ?V0 + 4,A
   \   0000CC   78..         MOV     R0,#?V0 + 4
   \   0000CE   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000D1   7403         MOV     A,#0x3
   \   0000D3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D6   8582..       MOV     ?V0 + 4,DPL
   \   0000D9   8583..       MOV     ?V0 + 5,DPH
   \   0000DC   78..         MOV     R0,#?V0 + 4
   \   0000DE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E1   78..         MOV     R0,#?V0 + 6
   \   0000E3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E6   78..         MOV     R0,#?V0 + 2
   \   0000E8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000EB   A9..         MOV     R1,?V0 + 1
   \   0000ED   7412         MOV     A,#0x12
   \   0000EF   12....       LCALL   ?XSTACK_DISP0_8
   \   0000F2   AC82         MOV     R4,DPL
   \   0000F4   AD83         MOV     R5,DPH
   \   0000F6   7A22         MOV     R2,#0x22
   \   0000F8   7B00         MOV     R3,#0x0
   \   0000FA   12....       LCALL   ??ZDP_BindUnbindReq?relay
   \   0000FD   7408         MOV     A,#0x8
   \   0000FF   12....       LCALL   ?DEALLOC_XSTACK8
   \   000102   E9           MOV     A,R1
   \   000103   85..82       MOV     DPL,?XSP + 0
   \   000106   85..83       MOV     DPH,?XSP + 1
   \   000109   F0           MOVX    @DPTR,A
   1001          
   1002            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   00010A                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00010A   AC82         MOV     R4,DPL
   \   00010C   AD83         MOV     R5,DPH
   \   00010E   7B01         MOV     R3,#0x1
   \   000110   AA..         MOV     R2,?V0 + 0
   \   000112   7965         MOV     R1,#0x65
   \   000114   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1003          }
   \   000117   7413         MOV     A,#0x13
   \   000119   12....       LCALL   ?DEALLOC_XSTACK8
   \   00011C   7F08         MOV     R7,#0x8
   \   00011E   02....       LJMP    ?BANKED_LEAVE_XDATA
   1004          
   1005          /***************************************************************************************************
   1006           * @fn      MT_ZdoSetLinkKey
   1007           *
   1008           * @brief   Set an application or trust center link key.
   1009           *
   1010           * @param   pBuf  - MT message data
   1011           *
   1012           * @return  void
   1013           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1014          void MT_ZdoSetLinkKey(uint8 *pBuf)
   \                     MT_ZdoSetLinkKey:
   1015          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1016            uint8 cmdId;
   1017            uint8 retValue;
   1018            uint8 *pExtAddr;
   1019            uint8 *pKey;
   1020            uint16 shortAddr;
   1021            
   1022            /* parse header */
   1023            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F5..         MOV     ?V0 + 0,A
   1024            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000013   EA           MOV     A,R2
   \   000014   2403         ADD     A,#0x3
   \   000016   0A           INC     R2
   \   000017   0A           INC     R2
   \   000018   0A           INC     R2
   \   000019   EB           MOV     A,R3
   \   00001A   3400         ADDC    A,#0x0
   \   00001C   FB           MOV     R3,A
   1025          
   1026            /* ShortAddr */
   1027            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   00001D   8A82         MOV     DPL,R2
   \   00001F   8B83         MOV     DPH,R3
   \   000021   E0           MOVX    A,@DPTR
   \   000022   FC           MOV     R4,A
   \   000023   A3           INC     DPTR
   \   000024   E0           MOVX    A,@DPTR
   \   000025   F9           MOV     R1,A
   \   000026   EC           MOV     A,R4
   \   000027   2400         ADD     A,#0x0
   \   000029   FE           MOV     R6,A
   \   00002A   E4           CLR     A
   \   00002B   39           ADDC    A,R1
   \   00002C   FF           MOV     R7,A
   1028            pBuf += 2;
   \   00002D   EA           MOV     A,R2
   \   00002E   2402         ADD     A,#0x2
   \   000030   0A           INC     R2
   \   000031   0A           INC     R2
   \   000032   EB           MOV     A,R3
   \   000033   3400         ADDC    A,#0x0
   \   000035   FB           MOV     R3,A
   1029            
   1030            /* Extended Addr */
   1031            pExtAddr = pBuf;
   1032            pBuf += Z_EXTADDR_LEN;
   1033            
   1034            /* Key data */
   1035            pKey = pBuf;
   1036          
   1037            retValue = (uint8)ZDSecMgrAddLinkKey( shortAddr, pExtAddr, pKey);
   \   000036                ; Setup parameters for call to function ZDSecMgrAddLinkKey
   \   000036   EA           MOV     A,R2
   \   000037   2408         ADD     A,#0x8
   \   000039   F5..         MOV     ?V0 + 2,A
   \   00003B   EB           MOV     A,R3
   \   00003C   3400         ADDC    A,#0x0
   \   00003E   F5..         MOV     ?V0 + 3,A
   \   000040   78..         MOV     R0,#?V0 + 2
   \   000042   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000045   EA           MOV     A,R2
   \   000046   FC           MOV     R4,A
   \   000047   EB           MOV     A,R3
   \   000048   FD           MOV     R5,A
   \   000049   EE           MOV     A,R6
   \   00004A   FA           MOV     R2,A
   \   00004B   EF           MOV     A,R7
   \   00004C   FB           MOV     R3,A
   \   00004D   12....       LCALL   ??ZDSecMgrAddLinkKey?relay
   \   000050   7402         MOV     A,#0x2
   \   000052   12....       LCALL   ?DEALLOC_XSTACK8
   \   000055   E9           MOV     A,R1
   \   000056   85..82       MOV     DPL,?XSP + 0
   \   000059   85..83       MOV     DPH,?XSP + 1
   \   00005C   F0           MOVX    @DPTR,A
   1038          
   1039            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   00005D                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00005D   AC82         MOV     R4,DPL
   \   00005F   AD83         MOV     R5,DPH
   \   000061   7B01         MOV     R3,#0x1
   \   000063   AA..         MOV     R2,?V0 + 0
   \   000065   7965         MOV     R1,#0x65
   \   000067   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1040          }
   \   00006A   7401         MOV     A,#0x1
   \   00006C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00006F   7F04         MOV     R7,#0x4
   \   000071   02....       LJMP    ?BANKED_LEAVE_XDATA
   1041          
   1042          /***************************************************************************************************
   1043           * @fn      MT_ZdoRemoveLinkKey
   1044           *
   1045           * @brief   Remove an application or trust center link key.
   1046           *
   1047           * @param   pBuf  - MT message data
   1048           *
   1049           * @return  void
   1050           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1051          void MT_ZdoRemoveLinkKey(uint8 *pBuf)
   \                     MT_ZdoRemoveLinkKey:
   1052          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1053            uint8 cmdId;
   1054            uint8 retValue;
   1055            uint8 *pExtAddr;
   1056              
   1057            /* parse header */
   1058            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   FE           MOV     R6,A
   1059            pBuf += MT_RPC_FRAME_HDR_SZ;
   1060            
   1061            /* ShortAddr */
   1062            pExtAddr = pBuf;
   1063          
   1064            retValue = ZDSecMgrDeviceRemoveByExtAddr( pExtAddr );
   \   000012                ; Setup parameters for call to function ZDSecMgrDeviceRemoveByExtAddr
   \   000012   EA           MOV     A,R2
   \   000013   2403         ADD     A,#0x3
   \   000015   0A           INC     R2
   \   000016   0A           INC     R2
   \   000017   0A           INC     R2
   \   000018   EB           MOV     A,R3
   \   000019   3400         ADDC    A,#0x0
   \   00001B   FB           MOV     R3,A
   \   00001C   12....       LCALL   ??ZDSecMgrDeviceRemoveByExtAddr?relay
   \   00001F   E9           MOV     A,R1
   \   000020   85..82       MOV     DPL,?XSP + 0
   \   000023   85..83       MOV     DPH,?XSP + 1
   \   000026   F0           MOVX    @DPTR,A
   1065          
   1066            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \   000027                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000027   AC82         MOV     R4,DPL
   \   000029   AD83         MOV     R5,DPH
   \   00002B   7B01         MOV     R3,#0x1
   \   00002D   EE           MOV     A,R6
   \   00002E   FA           MOV     R2,A
   \   00002F   7965         MOV     R1,#0x65
   \   000031   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1067          }
   \   000034   7401         MOV     A,#0x1
   \   000036   12....       LCALL   ?DEALLOC_XSTACK8
   \   000039   7F01         MOV     R7,#0x1
   \   00003B   02....       LJMP    ?BANKED_LEAVE_XDATA
   1068          
   1069          /***************************************************************************************************
   1070           * @fn      MT_ZdoGetLinkKey
   1071           *
   1072           * @brief   Get the application or trust center link key.
   1073           *
   1074           * @param   pBuf  - MT message data
   1075           *
   1076           * @return  void
   1077           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1078          void MT_ZdoGetLinkKey(uint8 *pBuf)
   \                     MT_ZdoGetLinkKey:
   1079          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1080            uint8 cmdId;
   1081            uint8 retValue;
   1082            uint8 *pExtAddr;
   1083            uint8 *retBuf;
   1084            uint8 len;
   1085            APSME_LinkKeyData_t *pLinkKey;
   1086              
   1087            /* parse header */
   1088            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F5..         MOV     ?V0 + 2,A
   1089            pBuf += MT_RPC_FRAME_HDR_SZ;
   1090            
   1091            /* Extended Address */
   1092            pExtAddr = pBuf;
   \   000013   EA           MOV     A,R2
   \   000014   2403         ADD     A,#0x3
   \   000016   FE           MOV     R6,A
   \   000017   EB           MOV     A,R3
   \   000018   3400         ADDC    A,#0x0
   \   00001A   FF           MOV     R7,A
   1093          
   1094            /* Fetch the key data */
   1095            retValue = APSME_LinkKeyDataGet( pExtAddr, &pLinkKey );
   \   00001B                ; Setup parameters for call to function APSME_LinkKeyDataGet
   \   00001B   85..82       MOV     DPL,?XSP + 0
   \   00001E   85..83       MOV     DPH,?XSP + 1
   \   000021   AC82         MOV     R4,DPL
   \   000023   AD83         MOV     R5,DPH
   \   000025   0A           INC     R2
   \   000026   0A           INC     R2
   \   000027   0A           INC     R2
   \   000028   FB           MOV     R3,A
   \   000029   12....       LCALL   ??APSME_LinkKeyDataGet?relay
   \   00002C   E9           MOV     A,R1
   \   00002D   F5..         MOV     ?V0 + 3,A
   1096            
   1097            /* Construct the response message */
   1098            len = 1 + Z_EXTADDR_LEN + SEC_KEY_LEN; // status + extAddr + key
   1099            if ( ( retBuf = osal_mem_alloc( len ) ) == NULL )
   \   00002F                ; Setup parameters for call to function osal_mem_alloc
   \   00002F   7A19         MOV     R2,#0x19
   \   000031   7B00         MOV     R3,#0x0
   \   000033   12....       LCALL   ??osal_mem_alloc?relay
   \   000036   8A..         MOV     ?V0 + 0,R2
   \   000038   8B..         MOV     ?V0 + 1,R3
   \   00003A   EA           MOV     A,R2
   \   00003B   45..         ORL     A,?V0 + 1
   \   00003D   7005         JNZ     ??MT_ZdoGetLinkKey_0
   1100            {
   1101              retValue = ZMemError;
   \   00003F   75..10       MOV     ?V0 + 3,#0x10
   \   000042   8055         SJMP    ??MT_ZdoGetLinkKey_1
   1102            }
   1103            else
   1104            {  
   1105              if( retValue == ZSuccess )
   \                     ??MT_ZdoGetLinkKey_0:
   \   000044   E5..         MOV     A,?V0 + 3
   \   000046   7051         JNZ     ??MT_ZdoGetLinkKey_1
   1106              {
   1107                /* Extended Address */
   1108                osal_memcpy( &(retBuf[1]), pExtAddr, Z_EXTADDR_LEN );
   \   000048                ; Setup parameters for call to function osal_memcpy
   \   000048   8E..         MOV     ?V0 + 4,R6
   \   00004A   8F..         MOV     ?V0 + 5,R7
   \   00004C   75..00       MOV     ?V0 + 6,#0x0
   \   00004F   78..         MOV     R0,#?V0 + 4
   \   000051   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000054   7C08         MOV     R4,#0x8
   \   000056   7D00         MOV     R5,#0x0
   \   000058   8A82         MOV     DPL,R2
   \   00005A   8B83         MOV     DPH,R3
   \   00005C   A3           INC     DPTR
   \   00005D   AA82         MOV     R2,DPL
   \   00005F   AB83         MOV     R3,DPH
   \   000061   12....       LCALL   ??osal_memcpy?relay
   \   000064   7403         MOV     A,#0x3
   \   000066   12....       LCALL   ?DEALLOC_XSTACK8
   1109                
   1110                /* Key data */
   1111                osal_memcpy( &(retBuf[1 + Z_EXTADDR_LEN]), pLinkKey->key, SEC_KEY_LEN );      
   \   000069                ; Setup parameters for call to function osal_memcpy
   \   000069   85..82       MOV     DPL,?XSP + 0
   \   00006C   85..83       MOV     DPH,?XSP + 1
   \   00006F   E0           MOVX    A,@DPTR
   \   000070   F8           MOV     R0,A
   \   000071   A3           INC     DPTR
   \   000072   E0           MOVX    A,@DPTR
   \   000073   F583         MOV     DPH,A
   \   000075   8882         MOV     DPL,R0
   \   000077   E0           MOVX    A,@DPTR
   \   000078   F5..         MOV     ?V0 + 4,A
   \   00007A   A3           INC     DPTR
   \   00007B   E0           MOVX    A,@DPTR
   \   00007C   F5..         MOV     ?V0 + 5,A
   \   00007E   78..         MOV     R0,#?V0 + 4
   \   000080   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000083   7C10         MOV     R4,#0x10
   \   000085   7D00         MOV     R5,#0x0
   \   000087   E5..         MOV     A,?V0 + 0
   \   000089   2409         ADD     A,#0x9
   \   00008B   FA           MOV     R2,A
   \   00008C   E5..         MOV     A,?V0 + 1
   \   00008E   3400         ADDC    A,#0x0
   \   000090   FB           MOV     R3,A
   \   000091   12....       LCALL   ??osal_memcpy?relay
   \   000094   7403         MOV     A,#0x3
   \   000096   12....       LCALL   ?DEALLOC_XSTACK8
   1112              }
   1113            }
   1114              
   1115            if( retValue != ZSuccess )
   \                     ??MT_ZdoGetLinkKey_1:
   \   000099   E5..         MOV     A,?V0 + 3
   \   00009B   6014         JZ      ??MT_ZdoGetLinkKey_2
   1116            {
   1117              /* Failed case - set the rest fields to all FF */
   1118              osal_memset( &(retBuf[1]), 0xFF, Z_EXTADDR_LEN + SEC_KEY_LEN );   
   \   00009D                ; Setup parameters for call to function osal_memset
   \   00009D   7C18         MOV     R4,#0x18
   \   00009F   7D00         MOV     R5,#0x0
   \   0000A1   79FF         MOV     R1,#-0x1
   \   0000A3   85..82       MOV     DPL,?V0 + 0
   \   0000A6   85..83       MOV     DPH,?V0 + 1
   \   0000A9   A3           INC     DPTR
   \   0000AA   AA82         MOV     R2,DPL
   \   0000AC   AB83         MOV     R3,DPH
   \   0000AE   12....       LCALL   ??osal_memset?relay
   1119            }    
   1120            
   1121            retBuf[0] = retValue;  /* Status */
   \                     ??MT_ZdoGetLinkKey_2:
   \   0000B1   85..82       MOV     DPL,?V0 + 0
   \   0000B4   85..83       MOV     DPH,?V0 + 1
   \   0000B7   E5..         MOV     A,?V0 + 3
   \   0000B9   F0           MOVX    @DPTR,A
   1122            
   1123            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, len, retBuf);
   \   0000BA                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0000BA   AC..         MOV     R4,?V0 + 0
   \   0000BC   AD..         MOV     R5,?V0 + 1
   \   0000BE   7B19         MOV     R3,#0x19
   \   0000C0   AA..         MOV     R2,?V0 + 2
   \   0000C2   7965         MOV     R1,#0x65
   \   0000C4   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1124            
   1125            return;
   \   0000C7   7402         MOV     A,#0x2
   \   0000C9   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000CC   7F07         MOV     R7,#0x7
   \   0000CE   02....       LJMP    ?BANKED_LEAVE_XDATA
   1126          }
   1127          
   1128          #if defined (MT_ZDO_MGMT)
   1129          /***************************************************************************************************
   1130           * @fn      MT_ZdoMgmtNwkDiscRequest
   1131           *
   1132           * @brief   Handle a Mgmt Nwk Discovery request.
   1133           *
   1134           * @param   pBuf  - MT message data
   1135           *
   1136           * @return  void
   1137           ***************************************************************************************************/
   1138          void MT_ZdoMgmtNwkDiscRequest(uint8 *pBuf)
   1139          {
   1140            uint8 cmdId;
   1141            uint8 retValue;
   1142            zAddrType_t destAddr;
   1143            uint32 scanChannels;
   1144            uint8 scanDuration, startIndex;
   1145          
   1146            /* parse header */
   1147            cmdId = pBuf[MT_RPC_POS_CMD1];
   1148            pBuf += MT_RPC_FRAME_HDR_SZ;
   1149          
   1150            /* Dev address */
   1151            destAddr.addrMode = Addr16Bit;
   1152            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1153            pBuf += 2;
   1154          
   1155            /* Scan Channels */
   1156            scanChannels = BUILD_UINT32( pBuf[0], pBuf[1], pBuf[2], pBuf[3] );
   1157            pBuf += 4;
   1158          
   1159            /* Scan Duration */
   1160            scanDuration = *pBuf++;
   1161          
   1162            /* Start Index */
   1163            startIndex = *pBuf;
   1164          
   1165            retValue = (uint8)ZDP_MgmtNwkDiscReq( &destAddr, scanChannels, scanDuration, startIndex, 0);
   1166          
   1167            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1168          }
   1169          
   1170          /***************************************************************************************************
   1171           * @fn      MT_ZdoMgmtLqiRequest
   1172           *
   1173           * @brief   Handle a Mgmt Lqi request.
   1174           *
   1175           * @param   pBuf  - MT message data
   1176           *
   1177           * @return  void
   1178           ***************************************************************************************************/
   1179          void MT_ZdoMgmtLqiRequest(uint8 *pBuf)
   1180          {
   1181            uint8 cmdId;
   1182            uint8 retValue;
   1183            zAddrType_t destAddr;
   1184            uint8 startIndex;
   1185          
   1186            /* parse header */
   1187            cmdId = pBuf[MT_RPC_POS_CMD1];
   1188            pBuf += MT_RPC_FRAME_HDR_SZ;
   1189          
   1190            /* Dev address */
   1191            destAddr.addrMode = Addr16Bit;
   1192            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1193            pBuf += 2;
   1194          
   1195            /* Start Index */
   1196            startIndex = *pBuf;
   1197          
   1198            retValue = (uint8)ZDP_MgmtLqiReq( &destAddr, startIndex, 0);
   1199          
   1200            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1201          }
   1202          
   1203          /***************************************************************************************************
   1204           * @fn      MT_ZdoMgmtRtgRequest
   1205           *
   1206           * @brief   Handle a Mgmt Rtg request.
   1207           *
   1208           * @param   pBuf  - MT message data
   1209           *
   1210           * @return  void
   1211           ***************************************************************************************************/
   1212          void MT_ZdoMgmtRtgRequest(uint8 *pBuf)
   1213          {
   1214            uint8 cmdId;
   1215            uint8 retValue;
   1216            zAddrType_t destAddr;
   1217            uint8 startIndex;
   1218          
   1219            /* parse header */
   1220            cmdId = pBuf[MT_RPC_POS_CMD1];
   1221            pBuf += MT_RPC_FRAME_HDR_SZ;
   1222          
   1223            /* Dev Address */
   1224            destAddr.addrMode = Addr16Bit;
   1225            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1]);
   1226            pBuf += 2;
   1227          
   1228            /* Start Index */
   1229            startIndex = *pBuf;
   1230          
   1231            retValue = (byte)ZDP_MgmtRtgReq( &destAddr, startIndex, 0);
   1232          
   1233            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1234          }
   1235          
   1236          /***************************************************************************************************
   1237           * @fn      MT_ZdoMgmtBindRequest
   1238           *
   1239           * @brief   Handle a Mgmt Bind request.
   1240           *
   1241           * @param   pBuf  - MT message data
   1242           *
   1243           * @return  void
   1244           ***************************************************************************************************/
   1245          void MT_ZdoMgmtBindRequest(uint8 *pBuf)
   1246          {
   1247            uint8 cmdId;
   1248            uint8 retValue;
   1249            zAddrType_t destAddr;
   1250            uint8 startIndex;
   1251          
   1252            /* parse header */
   1253            cmdId = pBuf[MT_RPC_POS_CMD1];
   1254            pBuf += MT_RPC_FRAME_HDR_SZ;
   1255          
   1256            /* Dev Address */
   1257            destAddr.addrMode = Addr16Bit;
   1258            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1259            pBuf += 2;
   1260          
   1261            /* Start Index */
   1262            startIndex = *pBuf;
   1263          
   1264            retValue = (uint8)ZDP_MgmtBindReq( &destAddr, startIndex, 0);
   1265          
   1266            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1267          }
   1268          
   1269          /***************************************************************************************************
   1270           * @fn      MT_ZdoMgmtLeaveRequest
   1271           *
   1272           * @brief   Handle a Mgmt Leave request.
   1273           *
   1274           * @param   pBuf  - MT message data
   1275           *
   1276           * @return  void
   1277           ***************************************************************************************************/
   1278          void MT_ZdoMgmtLeaveRequest(uint8 *pBuf)
   1279          {
   1280            uint8 cmdId;
   1281            uint8 retValue;
   1282            zAddrType_t destAddr;
   1283            uint8 *pIEEEAddr;
   1284            uint8 removeChildren, rejoin;
   1285          
   1286            /* parse header */
   1287            cmdId = pBuf[MT_RPC_POS_CMD1];
   1288            pBuf += MT_RPC_FRAME_HDR_SZ;
   1289          
   1290            /* Destination Address */
   1291            destAddr.addrMode = Addr16Bit;
   1292            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1293            pBuf += 2;
   1294          
   1295            /* IEEE address */
   1296            pIEEEAddr = pBuf;
   1297            pBuf += Z_EXTADDR_LEN;
   1298          
   1299            /* Remove Children */
   1300            removeChildren = *pBuf++;
   1301          
   1302            /* Rejoin */
   1303            rejoin = *pBuf;
   1304          
   1305            retValue = (byte)ZDP_MgmtLeaveReq( &destAddr, pIEEEAddr, removeChildren, rejoin, 0);
   1306          
   1307            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1308          }
   1309          
   1310          
   1311          /***************************************************************************************************
   1312           * @fn      MT_ZdoMgmtDirectJoinRequest
   1313           *
   1314           * @brief   Handle a Mgmt Direct Join request.
   1315           *
   1316           * @param   pBuf  - MT message data
   1317           *
   1318           * @return  void
   1319           ***************************************************************************************************/
   1320          void MT_ZdoMgmtDirectJoinRequest(uint8 *pBuf)
   1321          {
   1322            uint8 cmdId;
   1323            uint8 retValue;
   1324            zAddrType_t destAddr;
   1325            uint8 *deviceAddr;
   1326            uint8 capInfo;
   1327          
   1328            /* parse header */
   1329            cmdId = pBuf[MT_RPC_POS_CMD1];
   1330            pBuf += MT_RPC_FRAME_HDR_SZ;
   1331          
   1332            /* Destination Address */
   1333            destAddr.addrMode = Addr16Bit;
   1334            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1335            pBuf += 2;
   1336          
   1337            /* Device Address */
   1338            deviceAddr = pBuf;
   1339            pBuf += Z_EXTADDR_LEN;
   1340          
   1341            /* Capability information */
   1342            capInfo = *pBuf;
   1343          
   1344            retValue = (uint8)ZDP_MgmtDirectJoinReq( &destAddr, deviceAddr, capInfo, 0);
   1345          
   1346            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1347          }
   1348          
   1349          /***************************************************************************************************
   1350           * @fn      MT_ZdoMgmtPermitJoinRequest
   1351           *
   1352           * @brief   Handle a Mgmt Permit Join request.
   1353           *
   1354           * @param   pBuf  - MT message data
   1355           *
   1356           * @return  void
   1357           ***************************************************************************************************/
   1358          void MT_ZdoMgmtPermitJoinRequest(uint8 *pBuf)
   1359          {
   1360            uint8 cmdId;
   1361            uint8 retValue;
   1362            zAddrType_t destAddr;
   1363            uint8 duration, tcSignificance;
   1364          
   1365            /* parse header */
   1366            cmdId = pBuf[MT_RPC_POS_CMD1];
   1367            pBuf += MT_RPC_FRAME_HDR_SZ;
   1368          
   1369            /* Destination Address */
   1370            destAddr.addrMode = Addr16Bit;
   1371            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1372            pBuf += 2;
   1373          
   1374            /* Duration */
   1375            duration = *pBuf++;
   1376          
   1377            /* Trust center significance */
   1378            tcSignificance = *pBuf;
   1379          
   1380            retValue = (byte)ZDP_MgmtPermitJoinReq( &destAddr, duration, tcSignificance, 0);
   1381          
   1382            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1383          }
   1384          
   1385          /***************************************************************************************************
   1386           * @fn      MT_ZdoMgmtNwkUpdateRequest
   1387           *
   1388           * @brief   Handle a Mgmt Nwk Update request.
   1389           *
   1390           * @param   pBuf  - MT message data
   1391           *
   1392           * @return  void
   1393           ***************************************************************************************************/
   1394          void MT_ZdoMgmtNwkUpdateRequest(uint8 *pBuf)
   1395          {
   1396            uint8 cmdId;
   1397            uint8 retValue;
   1398            zAddrType_t destAddr;
   1399            uint32 channelMask;
   1400            uint8 scanDuration, scanCount;
   1401            uint16 nwkManagerAddr;
   1402          
   1403              /* parse header */
   1404            cmdId = pBuf[MT_RPC_POS_CMD1];
   1405            pBuf += MT_RPC_FRAME_HDR_SZ;
   1406          
   1407            /* Destination address */
   1408            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1409            pBuf += 2;
   1410          
   1411            /* Destination address mode */
   1412            destAddr.addrMode = *pBuf++;
   1413          
   1414            channelMask = BUILD_UINT32( pBuf[0], pBuf[1], pBuf[2], pBuf[3]);
   1415            pBuf += 4;
   1416          
   1417            /* Scan duration */
   1418            scanDuration = *pBuf++;
   1419          
   1420            /* Scan count */
   1421            scanCount = *pBuf++;
   1422          
   1423            /* NWK manager address */
   1424            nwkManagerAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1425          
   1426            /* Send the Management Network Update request */
   1427            retValue = (uint8)ZDP_MgmtNwkUpdateReq( &destAddr, channelMask, scanDuration,
   1428                                                    scanCount, _NIB.nwkUpdateId+1, nwkManagerAddr );
   1429          
   1430            /*
   1431              Since we don't recevied our own broadcast messages, we should
   1432              send a unicast copy of the message to ourself.
   1433            */
   1434            if ( destAddr.addrMode == AddrBroadcast )
   1435            {
   1436              destAddr.addrMode = Addr16Bit;
   1437              destAddr.addr.shortAddr = _NIB.nwkDevAddress;
   1438              retValue = (uint8) ZDP_MgmtNwkUpdateReq( &destAddr, channelMask, scanDuration,
   1439                                                       scanCount, _NIB.nwkUpdateId+1, nwkManagerAddr );
   1440            }
   1441          
   1442            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1443          }
   1444          #endif /* MT_ZDO_MGMT */
   1445          
   1446          /***************************************************************************************************
   1447           * @fn      MT_ZdoStartupFromApp
   1448           *
   1449           * @brief   Handle a Startup from App request.
   1450           *
   1451           * @param   pBuf  - MT message data
   1452           *
   1453           * @return  void
   1454           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1455          void MT_ZdoStartupFromApp(uint8 *pBuf)
   \                     MT_ZdoStartupFromApp:
   1456          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1457            uint8 cmd0, cmd1, retValue;
   1458          
   1459            /* parse header */
   1460            cmd0 = pBuf[MT_RPC_POS_CMD0];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   FF           MOV     R7,A
   1461            cmd1 = pBuf[MT_RPC_POS_CMD1];
   \   000011   8A82         MOV     DPL,R2
   \   000013   8B83         MOV     DPH,R3
   \   000015   A3           INC     DPTR
   \   000016   A3           INC     DPTR
   \   000017   E0           MOVX    A,@DPTR
   \   000018   FE           MOV     R6,A
   1462            pBuf += MT_RPC_FRAME_HDR_SZ;
   1463          
   1464            retValue = ZDOInitDevice(100);
   \   000019                ; Setup parameters for call to function ZDOInitDevice
   \   000019   7A64         MOV     R2,#0x64
   \   00001B   7B00         MOV     R3,#0x0
   \   00001D   12....       LCALL   ??ZDOInitDevice?relay
   \   000020   E9           MOV     A,R1
   \   000021   85..82       MOV     DPL,?XSP + 0
   \   000024   85..83       MOV     DPH,?XSP + 1
   \   000027   F0           MOVX    @DPTR,A
   1465          
   1466            if (MT_RPC_CMD_SREQ == (cmd0 & MT_RPC_CMD_TYPE_MASK))
   \   000028   74E0         MOV     A,#-0x20
   \   00002A   5F           ANL     A,R7
   \   00002B   6420         XRL     A,#0x20
   \   00002D   700D         JNZ     ??MT_ZdoStartupFromApp_0
   1467            {
   1468              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP|(uint8)MT_RPC_SYS_ZDO), cmd1,1, &retValue);
   \   00002F                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00002F   AC82         MOV     R4,DPL
   \   000031   AD83         MOV     R5,DPH
   \   000033   7B01         MOV     R3,#0x1
   \   000035   EE           MOV     A,R6
   \   000036   FA           MOV     R2,A
   \   000037   7965         MOV     R1,#0x65
   \   000039   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1469            }
   1470          }
   \                     ??MT_ZdoStartupFromApp_0:
   \   00003C   7401         MOV     A,#0x1
   \   00003E   12....       LCALL   ?DEALLOC_XSTACK8
   \   000041   7F01         MOV     R7,#0x1
   \   000043   02....       LJMP    ?BANKED_LEAVE_XDATA
   1471          
   1472          /*************************************************************************************************
   1473           * @fn      MT_ZdoRegisterForZDOMsg(pBuf);
   1474           *
   1475           * @brief   MT proxy for ZDO_RegisterForZDOMsg.
   1476           *
   1477           * @param   pBuf  - MT message data
   1478           *
   1479           * @return  void
   1480           *************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1481          void MT_ZdoRegisterForZDOMsg(uint8 *pBuf)
   \                     MT_ZdoRegisterForZDOMsg:
   1482          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1483            uint8 cmd0, cmd1, tmp;
   1484            uint16 cId;
   1485          
   1486            /* parse header */
   1487            cmd0 = pBuf[MT_RPC_POS_CMD0];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   FF           MOV     R7,A
   1488            cmd1 = pBuf[MT_RPC_POS_CMD1];
   \   000011   8A82         MOV     DPL,R2
   \   000013   8B83         MOV     DPH,R3
   \   000015   A3           INC     DPTR
   \   000016   A3           INC     DPTR
   \   000017   E0           MOVX    A,@DPTR
   \   000018   FE           MOV     R6,A
   1489            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000019   EA           MOV     A,R2
   \   00001A   2403         ADD     A,#0x3
   \   00001C   0A           INC     R2
   \   00001D   0A           INC     R2
   \   00001E   0A           INC     R2
   \   00001F   EB           MOV     A,R3
   \   000020   3400         ADDC    A,#0x0
   \   000022   FB           MOV     R3,A
   1490          
   1491            cId = BUILD_UINT16(pBuf[0], pBuf[1]);
   1492            tmp = ZDO_RegisterForZDOMsg(MT_TaskID, cId);
   \   000023                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   000023   8A82         MOV     DPL,R2
   \   000025   8B83         MOV     DPH,R3
   \   000027   E0           MOVX    A,@DPTR
   \   000028   FC           MOV     R4,A
   \   000029   A3           INC     DPTR
   \   00002A   E0           MOVX    A,@DPTR
   \   00002B   F9           MOV     R1,A
   \   00002C   EC           MOV     A,R4
   \   00002D   2400         ADD     A,#0x0
   \   00002F   FA           MOV     R2,A
   \   000030   E4           CLR     A
   \   000031   39           ADDC    A,R1
   \   000032   FB           MOV     R3,A
   \   000033   90....       MOV     DPTR,#MT_TaskID
   \   000036   E0           MOVX    A,@DPTR
   \   000037   F9           MOV     R1,A
   \   000038   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay
   \   00003B   E9           MOV     A,R1
   \   00003C   85..82       MOV     DPL,?XSP + 0
   \   00003F   85..83       MOV     DPH,?XSP + 1
   \   000042   F0           MOVX    @DPTR,A
   1493          
   1494            if (MT_RPC_CMD_SREQ == (cmd0 & MT_RPC_CMD_TYPE_MASK))
   \   000043   74E0         MOV     A,#-0x20
   \   000045   5F           ANL     A,R7
   \   000046   6420         XRL     A,#0x20
   \   000048   700D         JNZ     ??MT_ZdoRegisterForZDOMsg_0
   1495            {
   1496              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP|(uint8)MT_RPC_SYS_ZDO), cmd1, 1, &tmp);
   \   00004A                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00004A   AC82         MOV     R4,DPL
   \   00004C   AD83         MOV     R5,DPH
   \   00004E   7B01         MOV     R3,#0x1
   \   000050   EE           MOV     A,R6
   \   000051   FA           MOV     R2,A
   \   000052   7965         MOV     R1,#0x65
   \   000054   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1497            }
   1498          }
   \                     ??MT_ZdoRegisterForZDOMsg_0:
   \   000057   7401         MOV     A,#0x1
   \   000059   12....       LCALL   ?DEALLOC_XSTACK8
   \   00005C   7F01         MOV     R7,#0x1
   \   00005E   02....       LJMP    ?BANKED_LEAVE_XDATA
   1499          
   1500          /*************************************************************************************************
   1501           * @fn      MT_ZdoRemoveRegisteredCB(pBuf);
   1502           *
   1503           * @brief   MT proxy for ZDO_RemoveRegisteredCB.
   1504           *
   1505           * @param   pBuf  - MT message data
   1506           *
   1507           * @return  void
   1508           *************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1509          void MT_ZdoRemoveRegisteredCB(uint8 *pBuf)
   \                     MT_ZdoRemoveRegisteredCB:
   1510          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1511            uint8 cmd0, cmd1, tmp;
   1512            uint16 cId;
   1513          
   1514            /* parse header */
   1515            cmd0 = pBuf[MT_RPC_POS_CMD0];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   FF           MOV     R7,A
   1516            cmd1 = pBuf[MT_RPC_POS_CMD1];
   \   000011   8A82         MOV     DPL,R2
   \   000013   8B83         MOV     DPH,R3
   \   000015   A3           INC     DPTR
   \   000016   A3           INC     DPTR
   \   000017   E0           MOVX    A,@DPTR
   \   000018   FE           MOV     R6,A
   1517            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000019   EA           MOV     A,R2
   \   00001A   2403         ADD     A,#0x3
   \   00001C   0A           INC     R2
   \   00001D   0A           INC     R2
   \   00001E   0A           INC     R2
   \   00001F   EB           MOV     A,R3
   \   000020   3400         ADDC    A,#0x0
   \   000022   FB           MOV     R3,A
   1518          
   1519            cId = BUILD_UINT16(pBuf[0], pBuf[1]);
   1520            tmp = ZDO_RemoveRegisteredCB(MT_TaskID, cId);
   \   000023                ; Setup parameters for call to function ZDO_RemoveRegisteredCB
   \   000023   8A82         MOV     DPL,R2
   \   000025   8B83         MOV     DPH,R3
   \   000027   E0           MOVX    A,@DPTR
   \   000028   FC           MOV     R4,A
   \   000029   A3           INC     DPTR
   \   00002A   E0           MOVX    A,@DPTR
   \   00002B   F9           MOV     R1,A
   \   00002C   EC           MOV     A,R4
   \   00002D   2400         ADD     A,#0x0
   \   00002F   FA           MOV     R2,A
   \   000030   E4           CLR     A
   \   000031   39           ADDC    A,R1
   \   000032   FB           MOV     R3,A
   \   000033   90....       MOV     DPTR,#MT_TaskID
   \   000036   E0           MOVX    A,@DPTR
   \   000037   F9           MOV     R1,A
   \   000038   12....       LCALL   ??ZDO_RemoveRegisteredCB?relay
   \   00003B   E9           MOV     A,R1
   \   00003C   85..82       MOV     DPL,?XSP + 0
   \   00003F   85..83       MOV     DPH,?XSP + 1
   \   000042   F0           MOVX    @DPTR,A
   1521          
   1522            if (MT_RPC_CMD_SREQ == (cmd0 & MT_RPC_CMD_TYPE_MASK))
   \   000043   74E0         MOV     A,#-0x20
   \   000045   5F           ANL     A,R7
   \   000046   6420         XRL     A,#0x20
   \   000048   700D         JNZ     ??MT_ZdoRemoveRegisteredCB_0
   1523            {
   1524              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP|(uint8)MT_RPC_SYS_ZDO), cmd1, 1, &tmp);
   \   00004A                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00004A   AC82         MOV     R4,DPL
   \   00004C   AD83         MOV     R5,DPH
   \   00004E   7B01         MOV     R3,#0x1
   \   000050   EE           MOV     A,R6
   \   000051   FA           MOV     R2,A
   \   000052   7965         MOV     R1,#0x65
   \   000054   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1525            }
   1526          }
   \                     ??MT_ZdoRemoveRegisteredCB_0:
   \   000057   7401         MOV     A,#0x1
   \   000059   12....       LCALL   ?DEALLOC_XSTACK8
   \   00005C   7F01         MOV     R7,#0x1
   \   00005E   02....       LJMP    ?BANKED_LEAVE_XDATA
   1527          
   1528          #endif /* MT_ZDO_FUNC */
   1529          
   1530          
   1531          /***************************************************************************************************
   1532           * Callback handling function
   1533           ***************************************************************************************************/
   1534          
   1535          #if defined (MT_ZDO_CB_FUNC)
   1536          
   1537          /***************************************************************************************************
   1538           * @fn      MT_ZdoStateChangeCB
   1539           *
   1540           * @brief   Handle state change OSAL message from ZDO.
   1541           *
   1542           * @param   pMsg  - Message data
   1543           *
   1544           * @return  void
   1545           */
   1546          void MT_ZdoStateChangeCB(osal_event_hdr_t *pMsg)
   1547          {
   1548            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO),
   1549                                                 MT_ZDO_STATE_CHANGE_IND, 1, &pMsg->status);
   1550          }
   1551          
   1552          /***************************************************************************************************
   1553           * @fn     MT_ZdoDirectCB()
   1554           *
   1555           * @brief  ZDO direct callback.  Build an MT message directly from the
   1556           *         over-the-air ZDO message.
   1557           *
   1558           * @param  pData - Incoming AF frame.
   1559           *
   1560           * @return  none
   1561           ***************************************************************************************************/
   1562          void MT_ZdoDirectCB( afIncomingMSGPacket_t *pData,  zdoIncomingMsg_t *inMsg )
   1563          {
   1564            uint8 len, *pBuf;
   1565            
   1566            // Is the message an exception or not a response?
   1567            if ( MT_ZdoHandleExceptions( pData, inMsg ) || ( (pData->clusterId & ZDO_RESPONSE_BIT) == 0 ) )
   1568            {
   1569              return;  // Handled somewhere else or not needed.
   1570            }
   1571          
   1572            /* ZDO data starts after one-byte sequence number and the msg buffer length includes
   1573             * two bytes for srcAddr.
   1574             */
   1575            len = pData->cmd.DataLength - 1 + sizeof(uint16);
   1576          
   1577            if (NULL != (pBuf = (uint8 *)osal_mem_alloc(len)))
   1578            {
   1579              uint8 id = MT_ZDO_CID_TO_AREQ_ID(pData->clusterId);
   1580          
   1581              pBuf[0] = LO_UINT16(pData->srcAddr.addr.shortAddr);
   1582              pBuf[1] = HI_UINT16(pData->srcAddr.addr.shortAddr);
   1583          
   1584              /* copy ZDO data, skipping one-byte sequence number */
   1585              osal_memcpy(pBuf+2, (pData->cmd.Data + 1), pData->cmd.DataLength-1);
   1586          
   1587              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO), id, len, pBuf);
   1588              osal_mem_free(pBuf);
   1589            }
   1590          }
   1591          
   1592          /***************************************************************************************************
   1593           * @fn     MT_ZdoHandleExceptions()
   1594           *
   1595           * @brief  Handles all messages that are an expection to the generic MT ZDO Response.
   1596           *
   1597           * @param  pData - Incoming AF frame.
   1598           *
   1599           * @return  TRUE if handled by this function, FALSE if not
   1600           ***************************************************************************************************/
   1601          uint8 MT_ZdoHandleExceptions( afIncomingMSGPacket_t *pData, zdoIncomingMsg_t *inMsg )
   1602          {
   1603            uint8 ret = TRUE;
   1604            ZDO_NwkIEEEAddrResp_t *nwkRsp = NULL;
   1605            ZDO_DeviceAnnce_t devAnnce;
   1606            uint8 doDefault = FALSE;
   1607            
   1608            switch ( inMsg->clusterID )
   1609            {
   1610              case NWK_addr_rsp:
   1611              case IEEE_addr_rsp:
   1612                nwkRsp = ZDO_ParseAddrRsp( inMsg );
   1613                MT_ZdoAddrRspCB( nwkRsp, inMsg->clusterID );
   1614                if ( nwkRsp )
   1615                  osal_mem_free( nwkRsp );
   1616                break;
   1617                
   1618              case Device_annce:
   1619                ZDO_ParseDeviceAnnce( inMsg, &devAnnce );
   1620                MT_ZdoEndDevAnnceCB( &devAnnce, inMsg->srcAddr.addr.shortAddr );
   1621                break;
   1622                
   1623              case Simple_Desc_rsp:
   1624                if ( pData->cmd.DataLength > 5 )
   1625                  ret = FALSE;
   1626                else
   1627                  doDefault = TRUE;        
   1628                break;  
   1629                
   1630              default:
   1631                ret = FALSE;
   1632                break;
   1633            }
   1634            
   1635            if ( doDefault )
   1636            {
   1637              ret = FALSE;
   1638              pData->clusterId = MtZdoDef_rsp;
   1639              pData->cmd.DataLength = 2;
   1640            }
   1641          
   1642            return ( ret );
   1643          }
   1644          
   1645          /***************************************************************************************************
   1646           * @fn      MT_ZdoAddrRspCB
   1647           *
   1648           * @brief   Handle IEEE or nwk address response OSAL message from ZDO.
   1649           *
   1650           * @param   pMsg  - Message data
   1651           *
   1652           * @return  void
   1653           */
   1654          void MT_ZdoAddrRspCB( ZDO_NwkIEEEAddrResp_t *pMsg, uint16 clusterID )
   1655          {
   1656            uint8   listLen, len, *pBuf;
   1657          
   1658            /* both ZDO_NwkAddrResp_t and ZDO_IEEEAddrResp_t must be the same */
   1659          
   1660            /* get length, sanity check length */
   1661            listLen = pMsg->numAssocDevs;
   1662            
   1663            /* calculate msg length */
   1664            len = MT_ZDO_ADDR_RSP_LEN + (listLen * sizeof(uint16));
   1665          
   1666            /* get buffer */
   1667            if (NULL != (pBuf = (uint8 *)osal_mem_alloc(len)))
   1668            {
   1669              uint8 id = MT_ZDO_CID_TO_AREQ_ID(clusterID);
   1670              uint8 *pTmp = pBuf;
   1671          
   1672              *pTmp++ = pMsg->status;
   1673          
   1674              osal_cpyExtAddr(pTmp, pMsg->extAddr);
   1675              pTmp += Z_EXTADDR_LEN;
   1676          
   1677              *pTmp++ = LO_UINT16(pMsg->nwkAddr);
   1678              *pTmp++ = HI_UINT16(pMsg->nwkAddr);
   1679          
   1680              *pTmp++ = pMsg->startIndex;
   1681              *pTmp++ = listLen;
   1682          
   1683              MT_Word2Buf(pTmp, pMsg->devList, listLen);
   1684          
   1685              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO), id, len, pBuf);
   1686              osal_mem_free(pBuf);
   1687            }
   1688          }
   1689          
   1690          /***************************************************************************************************
   1691           * @fn      MT_ZdoEndDevAnnceCB
   1692           *
   1693           * @brief   Handle end device announce OSAL message from ZDO.
   1694           *
   1695           * @param   pMsg  - Message data
   1696           *
   1697           * @return  void
   1698           */
   1699          void MT_ZdoEndDevAnnceCB( ZDO_DeviceAnnce_t *pMsg, uint16 srcAddr )
   1700          {
   1701            uint8 *pBuf;
   1702          
   1703            if (NULL != (pBuf = (uint8 *)osal_mem_alloc(MT_ZDO_END_DEVICE_ANNCE_IND_LEN)))
   1704            {
   1705              uint8 *pTmp = pBuf;
   1706          
   1707              *pTmp++ = LO_UINT16(srcAddr);
   1708              *pTmp++ = HI_UINT16(srcAddr);
   1709          
   1710              *pTmp++ = LO_UINT16(pMsg->nwkAddr);
   1711              *pTmp++ = HI_UINT16(pMsg->nwkAddr);
   1712          
   1713              osal_cpyExtAddr(pTmp, pMsg->extAddr);
   1714              pTmp += Z_EXTADDR_LEN;
   1715          
   1716              *pTmp = pMsg->capabilities;
   1717          
   1718              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO), 
   1719                                                   MT_ZDO_END_DEVICE_ANNCE_IND, 
   1720                                                   MT_ZDO_END_DEVICE_ANNCE_IND_LEN, pBuf);
   1721              osal_mem_free(pBuf);
   1722            }
   1723          }
   1724          
   1725          /***************************************************************************************************
   1726           * @fn      MT_ZdoSrcRtgCB
   1727           *
   1728           * @brief   Handle Src Route from ZDO.
   1729           *
   1730           * @param   pStr  - pointer to the data structure for the src route
   1731           *
   1732           * @return  void* 
   1733           */
   1734          void* MT_ZdoSrcRtgCB( void *pStr )
   1735          {
   1736            uint8 len, *pBuf;
   1737            zdoSrcRtg_t *pSrcRtg = pStr;
   1738            
   1739            // srcAddr (2) + relayCnt (1) + relayList( relaycnt * 2 )
   1740            len = 2 + 1 + pSrcRtg->relayCnt * sizeof(uint16);
   1741          
   1742            if (NULL != (pBuf = (uint8 *)osal_mem_alloc(len)))
   1743            {
   1744              uint8 idx, *pTmp = pBuf;
   1745              uint16 *pRelay;
   1746          
   1747              // Packet payload
   1748              *pTmp++ = LO_UINT16(pSrcRtg->srcAddr);
   1749              *pTmp++ = HI_UINT16(pSrcRtg->srcAddr);
   1750              *pTmp++ = pSrcRtg->relayCnt;
   1751              
   1752              // Relay List
   1753              if( ( pRelay = pSrcRtg->pRelayList ) != NULL )
   1754              {
   1755                for( idx = 0; idx < pSrcRtg->relayCnt; idx ++ )
   1756                {
   1757                  *pTmp++ = LO_UINT16(*pRelay);
   1758                  *pTmp++ = HI_UINT16(*pRelay);
   1759                  pRelay++;
   1760                }
   1761              }
   1762              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO),
   1763                                                   MT_ZDO_SRC_RTG_IND, len, pBuf);
   1764              osal_mem_free(pBuf);
   1765            }
   1766            
   1767            return NULL;
   1768          }
   1769          #endif // MT_ZDO_CB_FUNC
   1770          
   1771          /***************************************************************************************************
   1772           * @fn      MT_ZdoSendMsgCB
   1773           *
   1774           * @brief   Proxy the ZDO_SendMsgCBs one message at a time.
   1775           *
   1776           * @param   pMsg  - Message data
   1777           *
   1778           * @return  void
   1779           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1780          void MT_ZdoSendMsgCB(zdoIncomingMsg_t *pMsg)
   \                     MT_ZdoSendMsgCB:
   1781          {
   \   000000   74ED         MOV     A,#-0x13
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 19
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   1782            uint8 len = pMsg->asduLen + 9;
   \   000009   EE           MOV     A,R6
   \   00000A   2410         ADD     A,#0x10
   \   00000C   F8           MOV     R0,A
   \   00000D   EF           MOV     A,R7
   \   00000E   3400         ADDC    A,#0x0
   \   000010   F9           MOV     R1,A
   \   000011   88..         MOV     ?V0 + 2,R0
   \   000013   89..         MOV     ?V0 + 3,R1
   \   000015   8882         MOV     DPL,R0
   \   000017   F583         MOV     DPH,A
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   2409         ADD     A,#0x9
   \   00001C   F5..         MOV     ?V0 + 4,A
   1783            uint8 *pBuf = (uint8 *)osal_mem_alloc(len);
   \   00001E                ; Setup parameters for call to function osal_mem_alloc
   \   00001E   FA           MOV     R2,A
   \   00001F   7B00         MOV     R3,#0x0
   \   000021   12....       LCALL   ??osal_mem_alloc?relay
   \   000024   8A..         MOV     ?V0 + 0,R2
   \   000026   8B..         MOV     ?V0 + 1,R3
   1784          
   1785            if (pBuf != NULL)
   \   000028   EA           MOV     A,R2
   \   000029   45..         ORL     A,?V0 + 1
   \   00002B   7003         JNZ     $+5
   \   00002D   02....       LJMP    ??MT_ZdoSendMsgCB_0 & 0xFFFF
   1786            {
   1787              uint8 *pTmp = pBuf;
   1788          
   1789              // Assuming exclusive use of network short addresses.
   1790              *pTmp++ = LO_UINT16(pMsg->srcAddr.addr.shortAddr);
   \   000030   EE           MOV     A,R6
   \   000031   2402         ADD     A,#0x2
   \   000033   F8           MOV     R0,A
   \   000034   EF           MOV     A,R7
   \   000035   3400         ADDC    A,#0x0
   \   000037   F9           MOV     R1,A
   \   000038   8882         MOV     DPL,R0
   \   00003A   8983         MOV     DPH,R1
   \   00003C   E0           MOVX    A,@DPTR
   \   00003D   8A82         MOV     DPL,R2
   \   00003F   8B83         MOV     DPH,R3
   \   000041   F0           MOVX    @DPTR,A
   \   000042   A3           INC     DPTR
   \   000043   AA82         MOV     R2,DPL
   \   000045   AB83         MOV     R3,DPH
   1791              *pTmp++ = HI_UINT16(pMsg->srcAddr.addr.shortAddr);
   \   000047   8882         MOV     DPL,R0
   \   000049   8983         MOV     DPH,R1
   \   00004B   A3           INC     DPTR
   \   00004C   E0           MOVX    A,@DPTR
   \   00004D   8A82         MOV     DPL,R2
   \   00004F   8B83         MOV     DPH,R3
   \   000051   F0           MOVX    @DPTR,A
   \   000052   A3           INC     DPTR
   \   000053   0A           INC     R2
   \   000054   AB83         MOV     R3,DPH
   1792              *pTmp++ = pMsg->wasBroadcast;
   \   000056   EE           MOV     A,R6
   \   000057   240B         ADD     A,#0xb
   \   000059   F582         MOV     DPL,A
   \   00005B   EF           MOV     A,R7
   \   00005C   3400         ADDC    A,#0x0
   \   00005E   F583         MOV     DPH,A
   \   000060   E0           MOVX    A,@DPTR
   \   000061   8A82         MOV     DPL,R2
   \   000063   8B83         MOV     DPH,R3
   \   000065   F0           MOVX    @DPTR,A
   \   000066   A3           INC     DPTR
   \   000067   0A           INC     R2
   \   000068   AB83         MOV     R3,DPH
   1793              *pTmp++ = LO_UINT16(pMsg->clusterID);
   \   00006A   EE           MOV     A,R6
   \   00006B   240C         ADD     A,#0xc
   \   00006D   F8           MOV     R0,A
   \   00006E   EF           MOV     A,R7
   \   00006F   3400         ADDC    A,#0x0
   \   000071   F9           MOV     R1,A
   \   000072   8882         MOV     DPL,R0
   \   000074   8983         MOV     DPH,R1
   \   000076   E0           MOVX    A,@DPTR
   \   000077   8A82         MOV     DPL,R2
   \   000079   8B83         MOV     DPH,R3
   \   00007B   F0           MOVX    @DPTR,A
   \   00007C   A3           INC     DPTR
   \   00007D   0A           INC     R2
   \   00007E   AB83         MOV     R3,DPH
   1794              *pTmp++ = HI_UINT16(pMsg->clusterID);
   \   000080   8882         MOV     DPL,R0
   \   000082   8983         MOV     DPH,R1
   \   000084   A3           INC     DPTR
   \   000085   E0           MOVX    A,@DPTR
   \   000086   8A82         MOV     DPL,R2
   \   000088   8B83         MOV     DPH,R3
   \   00008A   F0           MOVX    @DPTR,A
   \   00008B   A3           INC     DPTR
   \   00008C   0A           INC     R2
   \   00008D   AB83         MOV     R3,DPH
   1795              *pTmp++ = pMsg->SecurityUse;
   \   00008F   EE           MOV     A,R6
   \   000090   240E         ADD     A,#0xe
   \   000092   F582         MOV     DPL,A
   \   000094   EF           MOV     A,R7
   \   000095   3400         ADDC    A,#0x0
   \   000097   F583         MOV     DPH,A
   \   000099   E0           MOVX    A,@DPTR
   \   00009A   8A82         MOV     DPL,R2
   \   00009C   8B83         MOV     DPH,R3
   \   00009E   F0           MOVX    @DPTR,A
   \   00009F   A3           INC     DPTR
   \   0000A0   0A           INC     R2
   \   0000A1   AB83         MOV     R3,DPH
   1796              *pTmp++ = pMsg->TransSeq;
   \   0000A3   EE           MOV     A,R6
   \   0000A4   240F         ADD     A,#0xf
   \   0000A6   F582         MOV     DPL,A
   \   0000A8   EF           MOV     A,R7
   \   0000A9   3400         ADDC    A,#0x0
   \   0000AB   F583         MOV     DPH,A
   \   0000AD   E0           MOVX    A,@DPTR
   \   0000AE   8A82         MOV     DPL,R2
   \   0000B0   8B83         MOV     DPH,R3
   \   0000B2   F0           MOVX    @DPTR,A
   \   0000B3   A3           INC     DPTR
   \   0000B4   0A           INC     R2
   \   0000B5   AB83         MOV     R3,DPH
   1797              // Skipping asduLen since it can be deduced from the RPC packet length.
   1798              *pTmp++ = LO_UINT16(pMsg->macDestAddr);
   \   0000B7   EE           MOV     A,R6
   \   0000B8   2411         ADD     A,#0x11
   \   0000BA   F8           MOV     R0,A
   \   0000BB   EF           MOV     A,R7
   \   0000BC   3400         ADDC    A,#0x0
   \   0000BE   F9           MOV     R1,A
   \   0000BF   8882         MOV     DPL,R0
   \   0000C1   8983         MOV     DPH,R1
   \   0000C3   E0           MOVX    A,@DPTR
   \   0000C4   8A82         MOV     DPL,R2
   \   0000C6   8B83         MOV     DPH,R3
   \   0000C8   F0           MOVX    @DPTR,A
   \   0000C9   A3           INC     DPTR
   \   0000CA   0A           INC     R2
   \   0000CB   AB83         MOV     R3,DPH
   1799              *pTmp++ = HI_UINT16(pMsg->macDestAddr);
   \   0000CD   8882         MOV     DPL,R0
   \   0000CF   8983         MOV     DPH,R1
   \   0000D1   A3           INC     DPTR
   \   0000D2   E0           MOVX    A,@DPTR
   \   0000D3   8A82         MOV     DPL,R2
   \   0000D5   8B83         MOV     DPH,R3
   \   0000D7   F0           MOVX    @DPTR,A
   \   0000D8   A3           INC     DPTR
   \   0000D9   0A           INC     R2
   \   0000DA   AB83         MOV     R3,DPH
   1800              (void)osal_memcpy(pTmp, pMsg->asdu, pMsg->asduLen);
   \   0000DC                ; Setup parameters for call to function osal_memcpy
   \   0000DC   EE           MOV     A,R6
   \   0000DD   2413         ADD     A,#0x13
   \   0000DF   F582         MOV     DPL,A
   \   0000E1   EF           MOV     A,R7
   \   0000E2   3400         ADDC    A,#0x0
   \   0000E4   F583         MOV     DPH,A
   \   0000E6   E0           MOVX    A,@DPTR
   \   0000E7   F5..         MOV     ?V0 + 8,A
   \   0000E9   A3           INC     DPTR
   \   0000EA   E0           MOVX    A,@DPTR
   \   0000EB   F5..         MOV     ?V0 + 9,A
   \   0000ED   75..00       MOV     ?V0 + 10,#0x0
   \   0000F0   78..         MOV     R0,#?V0 + 8
   \   0000F2   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000F5   85..82       MOV     DPL,?V0 + 2
   \   0000F8   85..83       MOV     DPH,?V0 + 3
   \   0000FB   E0           MOVX    A,@DPTR
   \   0000FC   FC           MOV     R4,A
   \   0000FD   7D00         MOV     R5,#0x0
   \   0000FF   12....       LCALL   ??osal_memcpy?relay
   \   000102   7403         MOV     A,#0x3
   \   000104   12....       LCALL   ?DEALLOC_XSTACK8
   1801          
   1802              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO),
   1803                                                   MT_ZDO_MSG_CB_INCOMING, len, pBuf);
   \   000107                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000107   AC..         MOV     R4,?V0 + 0
   \   000109   AD..         MOV     R5,?V0 + 1
   \   00010B   AB..         MOV     R3,?V0 + 4
   \   00010D   7AFF         MOV     R2,#-0x1
   \   00010F   7945         MOV     R1,#0x45
   \   000111   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1804            }
   1805          }
   \                     ??MT_ZdoSendMsgCB_0:
   \   000114   7F0B         MOV     R7,#0xb
   \   000116   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoCommandProcessing?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoCommandProcessing

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoNWKAddressRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoNWKAddressRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoIEEEAddrRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoIEEEAddrRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoNodeDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoNodeDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoPowerDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoPowerDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoSimpleDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoSimpleDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoActiveEpRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoActiveEpRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoMatchDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoMatchDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoComplexDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoComplexDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoUserDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoUserDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoEndDevAnnce?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoEndDevAnnce

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoUserDescSet?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoUserDescSet

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoServiceDiscRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoServiceDiscRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoEndDevBindRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoEndDevBindRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoBindRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoBindRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoUnbindRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoUnbindRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoSetLinkKey?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoSetLinkKey

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoRemoveLinkKey?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoRemoveLinkKey

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoGetLinkKey?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoGetLinkKey

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoStartupFromApp?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoStartupFromApp

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoRegisterForZDOMsg?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoRegisterForZDOMsg

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoRemoveRegisteredCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoRemoveRegisteredCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoSendMsgCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoSendMsgCB
   1806          
   1807          #endif   /*ZDO Command Processing in MT*/
   1808          /***************************************************************************************************
   1809          ***************************************************************************************************/

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     MT_ZdoActiveEpRequest              1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoBindRequest                  1      0     52
       -> sAddrExtCpy                   0      0     70
       -> ZDP_BindUnbindReq             0      0     86
       -> MT_BuildAndSendZToolResponse
                                        0      0     70
     MT_ZdoCommandProcessing            0      0      9
       -> MT_ZdoNWKAddressRequest       0      0     18
       -> MT_ZdoIEEEAddrRequest         0      0     18
       -> MT_ZdoNodeDescRequest         0      0     18
       -> MT_ZdoPowerDescRequest        0      0     18
       -> MT_ZdoSimpleDescRequest       0      0     18
       -> MT_ZdoActiveEpRequest         0      0     18
       -> MT_ZdoMatchDescRequest        0      0     18
       -> MT_ZdoComplexDescRequest      0      0     18
       -> MT_ZdoUserDescRequest         0      0     18
       -> MT_ZdoEndDevAnnce             0      0     18
       -> MT_ZdoUserDescSet             0      0     18
       -> MT_ZdoServiceDiscRequest      0      0     18
       -> MT_ZdoEndDevBindRequest       0      0     18
       -> MT_ZdoBindRequest             0      0     18
       -> MT_ZdoUnbindRequest           0      0     18
       -> MT_ZdoSetLinkKey              0      0     18
       -> MT_ZdoRemoveLinkKey           0      0     18
       -> MT_ZdoGetLinkKey              0      0     18
       -> MT_ZdoStartupFromApp          0      0     18
       -> MT_ZdoRegisterForZDOMsg       0      0     18
       -> MT_ZdoRemoveRegisteredCB      0      0     18
     MT_ZdoComplexDescRequest           1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoEndDevAnnce                  1      0     20
       -> ZDP_DeviceAnnce               0      0     22
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoEndDevBindRequest            1      0    104
       -> ZDP_EndDeviceBindReq          0      0    190
       -> MT_BuildAndSendZToolResponse
                                        0      0    172
     MT_ZdoGetLinkKey                   1      0     29
       -> APSME_LinkKeyDataGet          0      0     34
       -> osal_mem_alloc                0      0     34
       -> osal_memcpy                   0      0     40
       -> osal_memcpy                   0      0     40
       -> osal_memset                   0      0     34
       -> MT_BuildAndSendZToolResponse
                                        0      0     34
     MT_ZdoIEEEAddrRequest              1      0     19
       -> ZDP_IEEEAddrReq               0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoInit                         0      0      0
     MT_ZdoMatchDescRequest             1      0    106
       -> ZDP_MatchDescReq              0      0    194
       -> MT_BuildAndSendZToolResponse
                                        0      0    178
     MT_ZdoNWKAddressRequest            1      0     19
       -> ZDP_NwkAddrReq                0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoNodeDescRequest              1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoPowerDescRequest             1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoRegisterForZDOMsg            1      0     19
       -> ZDO_RegisterForZDOMsg         0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoRemoveLinkKey                1      0     19
       -> ZDSecMgrDeviceRemoveByExtAddr
                                        0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoRemoveRegisteredCB           1      0     19
       -> ZDO_RemoveRegisteredCB        0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoSendMsgCB                    1      0     22
       -> osal_mem_alloc                0      0     38
       -> osal_memcpy                   0      0     44
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoServiceDiscRequest           1      0     19
       -> ZDP_ServerDiscReq             0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoSetLinkKey                   1      0     24
       -> ZDSecMgrAddLinkKey            0      0     30
       -> MT_BuildAndSendZToolResponse
                                        0      0     26
     MT_ZdoSimpleDescRequest            1      0     29
       -> ZDP_SimpleDescReq             0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoStartupFromApp               1      0     19
       -> ZDOInitDevice                 0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoUnbindRequest                1      0     52
       -> sAddrExtCpy                   0      0     70
       -> ZDP_BindUnbindReq             0      0     86
       -> MT_BuildAndSendZToolResponse
                                        0      0     70
     MT_ZdoUserDescRequest              1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoUserDescSet                  1      0     51
       -> osal_memcpy                   0      0     84
       -> ZDP_UserDescSet               0      0     82
       -> MT_BuildAndSendZToolResponse
                                        0      0     78


   Segment part sizes:

     Function/Label                   Bytes
     --------------                   -----
     _zdoCallbackSub                     4
     MT_ZdoInit                          3
     MT_ZdoCommandProcessing           195
     MT_ZdoNWKAddressRequest            84
     MT_ZdoIEEEAddrRequest             103
     MT_ZdoNodeDescRequest             138
     MT_ZdoPowerDescRequest            139
     MT_ZdoSimpleDescRequest           145
     MT_ZdoActiveEpRequest             139
     MT_ZdoMatchDescRequest            430
     MT_ZdoComplexDescRequest          139
     MT_ZdoUserDescRequest             139
     MT_ZdoEndDevAnnce                 119
     MT_ZdoUserDescSet                 226
     MT_ZdoServiceDiscRequest           75
     MT_ZdoEndDevBindRequest           446
     MT_ZdoBindRequest                 289
     MT_ZdoUnbindRequest               289
     MT_ZdoSetLinkKey                  116
     MT_ZdoRemoveLinkKey                62
     MT_ZdoGetLinkKey                  209
     MT_ZdoStartupFromApp               70
     MT_ZdoRegisterForZDOMsg            97
     MT_ZdoRemoveRegisteredCB           97
     MT_ZdoSendMsgCB                   281
     ??MT_ZdoInit?relay                  6
     ??MT_ZdoCommandProcessing?relay     6
     ??MT_ZdoNWKAddressRequest?relay     6
     ??MT_ZdoIEEEAddrRequest?relay       6
     ??MT_ZdoNodeDescRequest?relay       6
     ??MT_ZdoPowerDescRequest?relay      6
     ??MT_ZdoSimpleDescRequest?relay     6
     ??MT_ZdoActiveEpRequest?relay       6
     ??MT_ZdoMatchDescRequest?relay      6
     ??MT_ZdoComplexDescRequest?relay    6
     ??MT_ZdoUserDescRequest?relay       6
     ??MT_ZdoEndDevAnnce?relay           6
     ??MT_ZdoUserDescSet?relay           6
     ??MT_ZdoServiceDiscRequest?relay    6
     ??MT_ZdoEndDevBindRequest?relay     6
     ??MT_ZdoBindRequest?relay           6
     ??MT_ZdoUnbindRequest?relay         6
     ??MT_ZdoSetLinkKey?relay            6
     ??MT_ZdoRemoveLinkKey?relay         6
     ??MT_ZdoGetLinkKey?relay            6
     ??MT_ZdoStartupFromApp?relay        6
     ??MT_ZdoRegisterForZDOMsg?relay     6
     ??MT_ZdoRemoveRegisteredCB?relay    6
     ??MT_ZdoSendMsgCB?relay             6

 
 4 030 bytes in segment BANKED_CODE
   144 bytes in segment BANK_RELAYS
     4 bytes in segment XDATA_Z
 
 4 174 bytes of CODE  memory
     4 bytes of XDATA memory

Errors: none
Warnings: none
