///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V8.10.3.10338/W32 for 8051        26/Feb/2019  22:54:02 /
// Copyright 2004-2011 IAR Systems AB.                                        /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  banked                                            /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data_rom                                          /
//    Dptr setup         =  1,16                                              /
//    Source file        =  D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Components\HARDWARE\WiFiGate.c       /
//    Command line       =  -f D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\p /
//                          oint2point-bind\Projects\zstack\Samples\SampleApp /
//                          \CC2530DB\..\..\..\Tools\CC2530DB\f8wEndev.cfg    /
//                          (-DCPU32MHZ -DROOT=__near_func -DBLINK_LEDS) -f   /
//                          D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Projects\zstack\Samples\SampleApp\CC /
//                          2530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg      /
//                          (-DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR     /
//                          -DDEFAULT_CHANLIST=0x00000800                     /
//                          -DZDAPP_CONFIG_PAN_ID=0xFF11                      /
//                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_M /
//                          ASK=0x007F -DBEACON_REQUEST_DELAY=100             /
//                          -DBEACON_REQ_DELAY_MASK=0x00FF                    /
//                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_P /
//                          OLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7           /
//                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3   /
//                          -DNWK_MAX_DATA_RETRIES=2                          /
//                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9        /
//                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40          /
//                          -DNWK_MAX_BINDING_ENTRIES=4                       /
//                          -DMAX_BINDING_CLUSTER_IDS=4                       /
//                          "-DDEFAULT_KEY={0x01, 0x03, 0x05, 0x07, 0x09,     /
//                          0x0B, 0x0D, 0x0F, 0x00, 0x02, 0x04, 0x06, 0x08,   /
//                          0x0A, 0x0C, 0x0D}" -DMAC_MAX_FRAME_SIZE=116       /
//                          "-DCONST=const __code" -DGENERIC=__generic        /
//                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000       /
//                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)  /
//                          -DREJOIN_POLL_RATE=440 D:\ZigBee\KJXY-ZigBee\usef /
//                          ul_code\ZigBee-Ext\point2point-bind\Components\HA /
//                          RDWARE\WiFiGate.c -D NWK_AUTO_POLL -D ZTOOL_P1    /
//                          -D MT_SYS_FUNC -D MT_ZDO_FUNC -D                  /
//                          LCD_SUPPORTED=DEBUG -lC                           /
//                          D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Projects\zstack\Samples\SampleApp\CC /
//                          2530DB\EndDeviceEB\List\ -lA                      /
//                          D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Projects\zstack\Samples\SampleApp\CC /
//                          2530DB\EndDeviceEB\List\ --diag_suppress          /
//                          Pe001,Pa010 -o D:\ZigBee\KJXY-ZigBee\useful_code\ /
//                          ZigBee-Ext\point2point-bind\Projects\zstack\Sampl /
//                          es\SampleApp\CC2530DB\EndDeviceEB\Obj\ -e         /
//                          --no_unroll --no_inline --no_tbaa --debug         /
//                          --core=plain --dptr=16,1 --data_model=large       /
//                          --code_model=banked --calling_convention=xdata_re /
//                          entrant --place_constants=data_rom                /
//                          --nr_virtual_regs 16 -I                           /
//                          D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Projects\zstack\Samples\SampleApp\CC /
//                          2530DB\ -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigB /
//                          ee-Ext\point2point-bind\Projects\zstack\Samples\S /
//                          ampleApp\CC2530DB\..\SOURCE\ -I                   /
//                          D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Projects\zstack\Samples\SampleApp\CC /
//                          2530DB\..\..\..\ZMAIN\TI2530DB\ -I                /
//                          D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Projects\zstack\Samples\SampleApp\CC /
//                          2530DB\..\..\..\..\..\COMPONENTS\MT\ -I           /
//                          D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Projects\zstack\Samples\SampleApp\CC /
//                          2530DB\..\..\..\..\..\COMPONENTS\HAL\INCLUDE\ -I  /
//                          D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Projects\zstack\Samples\SampleApp\CC /
//                          2530DB\..\..\..\..\..\COMPONENTS\HAL\TARGET\CC253 /
//                          0EB\ -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee- /
//                          Ext\point2point-bind\Projects\zstack\Samples\Samp /
//                          leApp\CC2530DB\..\..\..\..\..\COMPONENTS\OSAL\MCU /
//                          \CCSOC\ -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigB /
//                          ee-Ext\point2point-bind\Projects\zstack\Samples\S /
//                          ampleApp\CC2530DB\..\..\..\..\..\COMPONENTS\OSAL\ /
//                          INCLUDE\ -I D:\ZigBee\KJXY-ZigBee\useful_code\Zig /
//                          Bee-Ext\point2point-bind\Projects\zstack\Samples\ /
//                          SampleApp\CC2530DB\..\..\..\..\..\COMPONENTS\STAC /
//                          K\AF\ -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee /
//                          -Ext\point2point-bind\Projects\zstack\Samples\Sam /
//                          pleApp\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\N /
//                          WK\ -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-E /
//                          xt\point2point-bind\Projects\zstack\Samples\Sampl /
//                          eApp\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\SEC /
//                          \ -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext /
//                          \point2point-bind\Projects\zstack\Samples\SampleA /
//                          pp\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\SAPI\ /
//                           -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\ /
//                          point2point-bind\Projects\zstack\Samples\SampleAp /
//                          p\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\SYS\   /
//                          -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\p /
//                          oint2point-bind\Projects\zstack\Samples\SampleApp /
//                          \CC2530DB\..\..\..\..\..\COMPONENTS\STACK\ZDO\    /
//                          -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\p /
//                          oint2point-bind\Projects\zstack\Samples\SampleApp /
//                          \CC2530DB\..\..\..\..\..\COMPONENTS\ZMAC\F8W\ -I  /
//                          D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Projects\zstack\Samples\SampleApp\CC /
//                          2530DB\..\..\..\..\..\COMPONENTS\ZMAC\ -I         /
//                          D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Projects\zstack\Samples\SampleApp\CC /
//                          2530DB\..\..\..\..\..\COMPONENTS\SERVICES\SADDR\  /
//                          -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\p /
//                          oint2point-bind\Projects\zstack\Samples\SampleApp /
//                          \CC2530DB\..\..\..\..\..\COMPONENTS\SERVICES\SDAT /
//                          A\ -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ex /
//                          t\point2point-bind\Projects\zstack\Samples\Sample /
//                          App\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\INCLUD /
//                          E\ -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ex /
//                          t\point2point-bind\Projects\zstack\Samples\Sample /
//                          App\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\HIGH_L /
//                          EVEL\ -I D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee /
//                          -Ext\point2point-bind\Projects\zstack\Samples\Sam /
//                          pleApp\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\LOW /
//                          _LEVEL\srf04\ -I D:\ZigBee\KJXY-ZigBee\useful_cod /
//                          e\ZigBee-Ext\point2point-bind\Projects\zstack\Sam /
//                          ples\SampleApp\CC2530DB\..\..\..\..\..\COMPONENTS /
//                          \MAC\LOW_LEVEL\srf04\SINGLE_CHIP\ -I              /
//                          D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Projects\zstack\Samples\SampleApp\CC /
//                          2530DB\..\..\..\..\..\COMPONENTS\HARDWARE\ -Om    /
//    List file          =  D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\poin /
//                          t2point-bind\Projects\zstack\Samples\SampleApp\CC /
//                          2530DB\EndDeviceEB\List\WiFiGate.s51              /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME WiFiGate

        RTMODEL "__SystemLibrary", "CLib"
        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "banked"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN ?BANKED_ENTER_XDATA
        EXTERN ?BANKED_LEAVE_XDATA
        EXTERN ?BDISPATCH
        EXTERN ?DEALLOC_XSTACK8
        EXTERN ?PUSH_XSTACK_I_TWO
        EXTERN ?US_SWITCH_SPARSE
        EXTERN ?V0
        EXTERN __INIT_XDATA_Z

        PUBLIC ??ConfigWiFiArg?relay
        FUNCTION ??ConfigWiFiArg?relay,0203H
        PUBLIC ??SendToWiFiNetwork?relay
        FUNCTION ??SendToWiFiNetwork?relay,0203H
        PUBLIC ??WiFiGate_Init?relay
        FUNCTION ??WiFiGate_Init?relay,0203H
        PUBLIC ??WiFiGate_ProcessEvent?relay
        FUNCTION ??WiFiGate_ProcessEvent?relay,0203H
        PUBLIC ConfigWiFiArg
        FUNCTION ConfigWiFiArg,021203H
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 14, STACK
        PUBLIC NextEvent
        PUBLIC SendToWiFiNetwork
        FUNCTION SendToWiFiNetwork,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        PUBLIC WiFiCmdHandle
        PUBLIC WiFiGate_Init
        FUNCTION WiFiGate_Init,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC WiFiGate_ProcessEvent
        FUNCTION WiFiGate_ProcessEvent,0a1203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        PUBLIC WiFiGate_TaskId
        PUBLIC WiFiModeInitDone
        PUBLIC WiFiRecvDataBuffer
        PUBLIC WiFiRecvLenght
        
        CFI Names cfiNames0
        CFI StackFrame CFA_SP SP IDATA
        CFI StackFrame CFA_PSP16 PSP16 XDATA
        CFI StackFrame CFA_XSP16 XSP16 XDATA
        CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
        CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
        CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
        CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
        CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
        CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
        CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
        CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
        CFI Resource V8:8, V9:8, V10:8, V11:8, V12:8, V13:8, V14:8, V15:8, SP:8
        CFI Resource PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
        CFI VirtualResource ?RET:24
        CFI Resource ?BRET_EXT:8
        CFI VirtualResource ?RET_HIGH:8, ?RET_LOW:8
        CFI ResourceParts PSP16 PSPH, PSPL
        CFI ResourceParts XSP16 XSPH, XSPL
        CFI ResourceParts ?RET ?BRET_EXT, ?RET_HIGH, ?RET_LOW
        CFI EndNames cfiNames0
        
        CFI Common cfiCommon0 Using cfiNames0
        CFI CodeAlign 1
        CFI DataAlign -1
        CFI ReturnAddress ?RET CODE
        CFI CFA_DOVERLAY Used
        CFI CFA_IOVERLAY Used
        CFI CFA_SP SP+-3
        CFI CFA_PSP16 PSP16+0
        CFI CFA_XSP16 XSP16+0
        CFI `PSW.CY` SameValue
        CFI `B.BR0` SameValue
        CFI `B.BR1` SameValue
        CFI `B.BR2` SameValue
        CFI `B.BR3` SameValue
        CFI `B.BR4` SameValue
        CFI `B.BR5` SameValue
        CFI `B.BR6` SameValue
        CFI `B.BR7` SameValue
        CFI `VB.BR8` SameValue
        CFI `VB.BR9` SameValue
        CFI `VB.BR10` SameValue
        CFI `VB.BR11` SameValue
        CFI `VB.BR12` SameValue
        CFI `VB.BR13` SameValue
        CFI `VB.BR14` SameValue
        CFI `VB.BR15` SameValue
        CFI VB SameValue
        CFI B Undefined
        CFI A Undefined
        CFI PSW SameValue
        CFI DPL0 SameValue
        CFI DPH0 SameValue
        CFI R0 Undefined
        CFI R1 Undefined
        CFI R2 Undefined
        CFI R3 Undefined
        CFI R4 Undefined
        CFI R5 Undefined
        CFI R6 SameValue
        CFI R7 SameValue
        CFI V0 SameValue
        CFI V1 SameValue
        CFI V2 SameValue
        CFI V3 SameValue
        CFI V4 SameValue
        CFI V5 SameValue
        CFI V6 SameValue
        CFI V7 SameValue
        CFI V8 SameValue
        CFI V9 SameValue
        CFI V10 SameValue
        CFI V11 SameValue
        CFI V12 SameValue
        CFI V13 SameValue
        CFI V14 SameValue
        CFI V15 SameValue
        CFI PSPH Undefined
        CFI PSPL Undefined
        CFI XSPH Undefined
        CFI XSPL Undefined
        CFI ?RET Concat
        CFI ?BRET_EXT Frame(CFA_SP, 3)
        CFI ?RET_HIGH Frame(CFA_SP, 2)
        CFI ?RET_LOW Frame(CFA_SP, 1)
        CFI EndCommon cfiCommon0
        
osal_start_timerEx  SYMBOL "osal_start_timerEx"
UartInit            SYMBOL "UartInit"
memset              SYMBOL "memset"
HalUARTResetRxQueue SYMBOL "HalUARTResetRxQueue"
strlen              SYMBOL "strlen"
HalUARTWrite        SYMBOL "HalUARTWrite"
printf              SYMBOL "printf"
Hal_UART_RxBufLen   SYMBOL "Hal_UART_RxBufLen"
HalUARTRead         SYMBOL "HalUARTRead"
strstr              SYMBOL "strstr"
osal_set_event      SYMBOL "osal_set_event"
PointToPoint_FanControl SYMBOL "PointToPoint_FanControl"
osal_msg_receive    SYMBOL "osal_msg_receive"
??HalUARTRead?relay SYMBOL "?relay", HalUARTRead
??HalUARTResetRxQueue?relay SYMBOL "?relay", HalUARTResetRxQueue
??HalUARTWrite?relay SYMBOL "?relay", HalUARTWrite
??Hal_UART_RxBufLen?relay SYMBOL "?relay", Hal_UART_RxBufLen
??PointToPoint_FanControl?relay SYMBOL "?relay", PointToPoint_FanControl
??UartInit?relay    SYMBOL "?relay", UartInit
??memset?relay      SYMBOL "?relay", memset
??osal_msg_receive?relay SYMBOL "?relay", osal_msg_receive
??osal_set_event?relay SYMBOL "?relay", osal_set_event
??osal_start_timerEx?relay SYMBOL "?relay", osal_start_timerEx
??printf?relay      SYMBOL "?relay", printf
??strlen?relay      SYMBOL "?relay", strlen
??strstr?relay      SYMBOL "?relay", strstr
ConfigWiFiArg       SYMBOL "ConfigWiFiArg"
??ConfigWiFiArg?relay SYMBOL "?relay", ConfigWiFiArg
SendToWiFiNetwork   SYMBOL "SendToWiFiNetwork"
??SendToWiFiNetwork?relay SYMBOL "?relay", SendToWiFiNetwork
WiFiGate_Init       SYMBOL "WiFiGate_Init"
??WiFiGate_Init?relay SYMBOL "?relay", WiFiGate_Init
WiFiGate_ProcessEvent SYMBOL "WiFiGate_ProcessEvent"
??WiFiGate_ProcessEvent?relay SYMBOL "?relay", WiFiGate_ProcessEvent

        EXTERN osal_start_timerEx
        FUNCTION osal_start_timerEx,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN UartInit
        FUNCTION UartInit,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN memset
        FUNCTION memset,010202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalUARTResetRxQueue
        FUNCTION HalUARTResetRxQueue,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN strlen
        FUNCTION strlen,010202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalUARTWrite
        FUNCTION HalUARTWrite,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN printf
        FUNCTION printf,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN Hal_UART_RxBufLen
        FUNCTION Hal_UART_RxBufLen,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalUARTRead
        FUNCTION HalUARTRead,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN strstr
        FUNCTION strstr,010202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_set_event
        FUNCTION osal_set_event,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN PointToPoint_FanControl
        FUNCTION PointToPoint_FanControl,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_msg_receive
        FUNCTION osal_msg_receive,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ??HalUARTRead?relay
        FUNCTION ??HalUARTRead?relay,00H
        EXTERN ??HalUARTResetRxQueue?relay
        FUNCTION ??HalUARTResetRxQueue?relay,00H
        EXTERN ??HalUARTWrite?relay
        FUNCTION ??HalUARTWrite?relay,00H
        EXTERN ??Hal_UART_RxBufLen?relay
        FUNCTION ??Hal_UART_RxBufLen?relay,00H
        EXTERN ??PointToPoint_FanControl?relay
        FUNCTION ??PointToPoint_FanControl?relay,00H
        EXTERN ??UartInit?relay
        FUNCTION ??UartInit?relay,00H
        EXTERN ??memset?relay
        FUNCTION ??memset?relay,00H
        EXTERN ??osal_msg_receive?relay
        FUNCTION ??osal_msg_receive?relay,00H
        EXTERN ??osal_set_event?relay
        FUNCTION ??osal_set_event?relay,00H
        EXTERN ??osal_start_timerEx?relay
        FUNCTION ??osal_start_timerEx?relay,00H
        EXTERN ??printf?relay
        FUNCTION ??printf?relay,00H
        EXTERN ??strlen?relay
        FUNCTION ??strlen?relay,00H
        EXTERN ??strstr?relay
        FUNCTION ??strstr?relay,00H

// D:\ZigBee\KJXY-ZigBee\useful_code\ZigBee-Ext\point2point-bind\Components\HARDWARE\WiFiGate.c
//    1 #include "WiFiGate.h"
//    2 
//    3 #define SEND_TO_WIFI(d,l)        HalUARTWrite(HAL_UART_PORT_0,d,l);
//    4 #define WIFI_RECV_DATA_BUFFER_LEN 100

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//    5 uint8 WiFiRecvDataBuffer[ WIFI_RECV_DATA_BUFFER_LEN ];
WiFiRecvDataBuffer:
        DS 100
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//    6 uint8 WiFiRecvLenght = 0;
WiFiRecvLenght:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//    7 uint8 NextEvent=0;
NextEvent:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//    8 uint8 WiFiCmdHandle = 0;
WiFiCmdHandle:
        DS 1
        REQUIRE __INIT_XDATA_Z
//    9 
//   10 #define GET_RECV_LENGHT()        Hal_UART_RxBufLen(HAL_UART_PORT_0);
//   11 #define GET_RECV_DATA(b,l)       HalUARTRead(HAL_UART_PORT_0,b,l);
//   12 /*
//   13 WiFi网关功能初始化，并不是直正的初始化WiFi模块，WiFi模块的初始化在WiFiGate_ProcessEvent()中
//   14 这里主要是启动WiFi的初始化以及收发数据。
//   15 osal_start_timerEx( SampleApp_TaskID, SAMPLEAPP_SEND_PERIODIC_MSG_EVT,TIME);
//   16 uint8 osal_msg_send( uint8 destination_task, uint8 *msg_ptr )
//   17 osal_set_event();
//   18 */

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   19 uint8 WiFiGate_TaskId = 0;
WiFiGate_TaskId:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   20 uint8 WiFiModeInitDone = 0;
WiFiModeInitDone:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG BANKED_CODE:CODE:NOROOT(0)
//   21 void WiFiGate_Init( uint8 task_id )
WiFiGate_Init:
        CFI Block cfiBlock0 Using cfiCommon0
        CFI Function WiFiGate_Init
        CODE
//   22 {
        FUNCALL WiFiGate_Init, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_Init, UartInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R1
//   23   WiFiGate_TaskId = task_id;
        MOV     DPTR,#WiFiGate_TaskId
        MOVX    @DPTR,A
//   24 //  osal_set_event(WiFiGate_TaskId,WIFI_INIT_SEND_AT_EVT);
//   25   osal_start_timerEx( WiFiGate_TaskId, WIFI_INIT_SEND_AT_EVT,2000); 
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x30
        MOV     R5,#0x7
        MOV     R2,#-0x80
        MOV     R3,#0x0
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
//   26   UartInit(HAL_UART_PORT_0,HAL_UART_BR_115200);
        ; Setup parameters for call to function UartInit
        MOV     R2,#0x4
        MOV     R1,#0x0
        LCALL   ??UartInit?relay
//   27 }
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock0
//   28 /*
//   29 配置WIFI参数
//   30 */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//   31 void ConfigWiFiArg(uint8 *pConfig,uint16 NextSta)
ConfigWiFiArg:
        CFI Block cfiBlock1 Using cfiCommon0
        CFI Function ConfigWiFiArg
        CODE
//   32 {
        FUNCALL ConfigWiFiArg, memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ConfigWiFiArg, HalUARTResetRxQueue
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ConfigWiFiArg, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ConfigWiFiArg, HalUARTWrite
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ConfigWiFiArg, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        MOV     ?V0 + 0,R4
//   33   memset((void*)WiFiRecvDataBuffer,0,WIFI_RECV_DATA_BUFFER_LEN);
        ; Setup parameters for call to function memset
        MOV     ?V0 + 2,#0x64
        MOV     ?V0 + 3,#0x0
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 14)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#WiFiRecvDataBuffer & 0xff
        MOV     R3,#(WiFiRecvDataBuffer >> 8) & 0xff
        LCALL   ??memset?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 12)
//   34   WiFiRecvLenght = 0;
        MOV     DPTR,#WiFiRecvLenght
        CLR     A
        MOVX    @DPTR,A
//   35   HalUARTResetRxQueue();
        ; Setup parameters for call to function HalUARTResetRxQueue
        LCALL   ??HalUARTResetRxQueue?relay
//   36   SEND_TO_WIFI(pConfig,strlen(pConfig)); 
        ; Setup parameters for call to function HalUARTWrite
        ; Setup parameters for call to function strlen
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??strlen?relay
        MOV     A,R2
        MOV     R4,A
        MOV     A,R3
        MOV     R5,A
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        MOV     R1,#0x0
        LCALL   ??HalUARTWrite?relay
//   37   osal_start_timerEx( WiFiGate_TaskId, WIFI_GET_RSPONE,500);
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0xc
        MOV     R5,#0x1
        MOV     R2,#-0x70
        MOV     R3,#0x0
        MOV     DPTR,#WiFiGate_TaskId
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
//   38   NextEvent = NextSta;
        MOV     A,?V0 + 0
        MOV     DPTR,#NextEvent
        MOVX    @DPTR,A
//   39 }
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock1
//   40 /*
//   41 wifi网关处理任务，包括初始化WiFi模块，收发数据
//   42 */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//   43 uint16 WiFiGate_ProcessEvent( uint8 task_id, uint16 events )
WiFiGate_ProcessEvent:
        CFI Block cfiBlock2 Using cfiCommon0
        CFI Function WiFiGate_ProcessEvent
        CODE
//   44 {
        FUNCALL WiFiGate_ProcessEvent, printf
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, ConfigWiFiArg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, printf
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, ConfigWiFiArg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, printf
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, ConfigWiFiArg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, printf
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, ConfigWiFiArg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, printf
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, ConfigWiFiArg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, printf
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, ConfigWiFiArg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, printf
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, HalUARTWrite
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, Hal_UART_RxBufLen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, HalUARTRead
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, strstr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, osal_set_event
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, Hal_UART_RxBufLen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, HalUARTRead
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, strstr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, printf
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, PointToPoint_FanControl
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, strstr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, printf
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, PointToPoint_FanControl
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL WiFiGate_ProcessEvent, osal_msg_receive
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
//   45   uint8 len=0;
//   46   (void)task_id;  // Intentionally unreferenced parameter
//   47 
//   48   if ( events & SYS_EVENT_MSG )
        MOV     A,R3
        ANL     A,#0x80
        JZ      $+5
        LJMP    ??WiFiGate_ProcessEvent_0 & 0xFFFF
//   49   {//如果是系统任务
//   50     
//   51   }
//   52   else
//   53   {//如果是用户自定义任务
//   54     switch(events)
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     R0,#?V0 + 0
        LCALL   ?US_SWITCH_SPARSE
`?<Jumptable for WiFiGate_ProcessEvent>_0`:
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        0
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        10
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        128
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??WiFiGate_ProcessEvent_1
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        129
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??WiFiGate_ProcessEvent_2
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        130
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??WiFiGate_ProcessEvent_3
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        131
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??WiFiGate_ProcessEvent_4
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        132
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??WiFiGate_ProcessEvent_5
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        133
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??WiFiGate_ProcessEvent_6
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        134
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??WiFiGate_ProcessEvent_7
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        137
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??WiFiGate_ProcessEvent_8
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        144
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??WiFiGate_ProcessEvent_9
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        32903
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??WiFiGate_ProcessEvent_10
        DATA
        DATA16
        DATA
        DATA16
        DW        ??WiFiGate_ProcessEvent_0
        CODE
//   55     {
//   56       case WIFI_INIT_SEND_AT_EVT:
//   57            printf("WifiConfig:Send AT\r\n");
??WiFiGate_ProcessEvent_1:
        ; Setup parameters for call to function printf
        MOV     R2,#`?<Constant "WifiConfig:Send AT\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "WifiConfig:Send AT\\r\\n">` >> 8) & 0xff
        LCALL   ??printf?relay
//   58            ConfigWiFiArg("AT\r\n",WIFI_INIT_SET_MODE_EVT);
        ; Setup parameters for call to function ConfigWiFiArg
        MOV     R4,#-0x7f
        MOV     R5,#0x0
        MOV     R2,#`?<Constant "AT\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "AT\\r\\n">` >> 8) & 0xff
??WiFiGate_ProcessEvent_11:
        LCALL   ??ConfigWiFiArg?relay
//   59         break;
        LJMP    ??WiFiGate_ProcessEvent_0 & 0xFFFF
//   60       case WIFI_INIT_SET_MODE_EVT:
//   61            printf("WifiConfig:AT+CWMODE\r\n");
??WiFiGate_ProcessEvent_2:
        ; Setup parameters for call to function printf
        MOV     R2,#`?<Constant "WifiConfig:AT+CWMODE\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "WifiConfig:AT+CWMODE\\r\\n">` >> 8) & 0xff
        LCALL   ??printf?relay
//   62            ConfigWiFiArg("AT+CWMODE=3\r\n",WIFI_INIT_CONNECT_AP_EVT);
        ; Setup parameters for call to function ConfigWiFiArg
        MOV     R4,#-0x7e
        MOV     R5,#0x0
        MOV     R2,#`?<Constant "AT+CWMODE=3\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "AT+CWMODE=3\\r\\n">` >> 8) & 0xff
        SJMP    ??WiFiGate_ProcessEvent_11
//   63         break;
//   64       case WIFI_INIT_CONNECT_AP_EVT:
//   65            printf("WifiConfig:AT+CWJAP\r\n");
??WiFiGate_ProcessEvent_3:
        ; Setup parameters for call to function printf
        MOV     R2,#`?<Constant "WifiConfig:AT+CWJAP\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "WifiConfig:AT+CWJAP\\r\\n">` >> 8) & 0xff
        LCALL   ??printf?relay
//   66            ConfigWiFiArg("AT+CWJAP=\"Honor 8X\",\"1234567890\"\r\n",WIFI_INIT_CONNECT_SERVER_EVT);
        ; Setup parameters for call to function ConfigWiFiArg
        MOV     R4,#-0x7d
        MOV     R5,#0x0
        MOV     R2,#`?<Constant "AT+CWJAP=\\"Honor 8X\\",\\"...">` & 0xff
        MOV     R3,#(`?<Constant "AT+CWJAP=\\"Honor 8X\\",\\"...">` >> 8) & 0xff
        SJMP    ??WiFiGate_ProcessEvent_11
//   67         break;
//   68       case WIFI_INIT_CONNECT_SERVER_EVT:
//   69            printf("WifiConfig:AT+CIPSTART\r\n");
??WiFiGate_ProcessEvent_4:
        ; Setup parameters for call to function printf
        MOV     R2,#`?<Constant "WifiConfig:AT+CIPSTART\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "WifiConfig:AT+CIPSTART\\r\\n">` >> 8) & 0xff
        LCALL   ??printf?relay
//   70            ConfigWiFiArg("AT+CIPSTART=\"TCP\",\"183.230.40.40\",1811\r\n",WIFI_INIT_TRANSMIT_MODE_EVT);
        ; Setup parameters for call to function ConfigWiFiArg
        MOV     R4,#-0x7c
        MOV     R5,#0x0
        MOV     R2,#`?<Constant "AT+CIPSTART=\\"TCP\\",\\"18...">` & 0xff
        MOV     R3,#(`?<Constant "AT+CIPSTART=\\"TCP\\",\\"18...">` >> 8) & 0xff
        SJMP    ??WiFiGate_ProcessEvent_11
//   71         break;
//   72       case WIFI_INIT_TRANSMIT_MODE_EVT:
//   73            printf("WifiConfig:AT+CIPMODE\r\n");
??WiFiGate_ProcessEvent_5:
        ; Setup parameters for call to function printf
        MOV     R2,#`?<Constant "WifiConfig:AT+CIPMODE\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "WifiConfig:AT+CIPMODE\\r\\n">` >> 8) & 0xff
        LCALL   ??printf?relay
//   74            ConfigWiFiArg("AT+CIPMODE=1\r\n",WIFI_INIT_START_SEND_EVT);
        ; Setup parameters for call to function ConfigWiFiArg
        MOV     R4,#-0x7b
        MOV     R5,#0x0
        MOV     R2,#`?<Constant "AT+CIPMODE=1\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "AT+CIPMODE=1\\r\\n">` >> 8) & 0xff
        SJMP    ??WiFiGate_ProcessEvent_11
//   75         break;
//   76       case WIFI_INIT_START_SEND_EVT:
//   77            printf("WifiConfig:AT+CIPSEND\r\n");
??WiFiGate_ProcessEvent_6:
        ; Setup parameters for call to function printf
        MOV     R2,#`?<Constant "WifiConfig:AT+CIPSEND\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "WifiConfig:AT+CIPSEND\\r\\n">` >> 8) & 0xff
        LCALL   ??printf?relay
//   78            ConfigWiFiArg("AT+CIPSEND\r\n",WIFI_INIT_CONNECT_ONENET);
        ; Setup parameters for call to function ConfigWiFiArg
        MOV     R4,#-0x77
        MOV     R5,#0x0
        MOV     R2,#`?<Constant "AT+CIPSEND\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "AT+CIPSEND\\r\\n">` >> 8) & 0xff
        SJMP    ??WiFiGate_ProcessEvent_11
//   79         break;
//   80       case WIFI_INIT_CONNECT_ONENET:
//   81            osal_start_timerEx( WiFiGate_TaskId, WIFI_RECEIVE_MSG_EVT,50);
??WiFiGate_ProcessEvent_8:
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0x32
        MOV     R5,#0x0
        MOV     R2,#-0x7a
        MOV     R3,#0x0
        MOV     DPTR,#WiFiGate_TaskId
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
//   82            printf("Try to connect OneNET\r\n");
        ; Setup parameters for call to function printf
        MOV     R2,#`?<Constant "Try to connect OneNET\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "Try to connect OneNET\\r\\n">` >> 8) & 0xff
        LCALL   ??printf?relay
//   83            
//   84            //发送连接OneNET的命令连接到OneNET平台
//   85            SEND_TO_WIFI(CONNECT_ONENET_KEYSTRING,strlen(CONNECT_ONENET_KEYSTRING));
        ; Setup parameters for call to function HalUARTWrite
        MOV     R4,#0x1a
        MOV     R5,#0x0
        MOV     R2,#`?<Constant "*201298#1234567890#sa...">` & 0xff
        MOV     R3,#(`?<Constant "*201298#1234567890#sa...">` >> 8) & 0xff
        MOV     R1,#0x0
        LCALL   ??HalUARTWrite?relay
//   86            WiFiModeInitDone = 1;//wifi模块初始化正常，并连接到oneNET上。
        MOV     DPTR,#WiFiModeInitDone
??WiFiGate_ProcessEvent_12:
        MOV     A,#0x1
        MOVX    @DPTR,A
//   87         break;        
        LJMP    ??WiFiGate_ProcessEvent_0 & 0xFFFF
//   88       case WIFI_GET_RSPONE:
//   89            len = GET_RECV_LENGHT();
??WiFiGate_ProcessEvent_9:
        ; Setup parameters for call to function Hal_UART_RxBufLen
        MOV     R1,#0x0
        LCALL   ??Hal_UART_RxBufLen?relay
        MOV     A,R2
        MOV     R6,A
//   90             if(len)
        JZ      ??WiFiGate_ProcessEvent_13
//   91             {              
//   92               GET_RECV_DATA(&WiFiRecvDataBuffer[WiFiRecvLenght],len);
        ; Setup parameters for call to function HalUARTRead
        MOV     R4,A
        MOV     R5,#0x0
        MOV     DPTR,#WiFiRecvLenght
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,#WiFiRecvDataBuffer & 0xff
        ADD     A,R0
        MOV     R2,A
        MOV     A,#(WiFiRecvDataBuffer >> 8) & 0xff
        ADDC    A,#0x0
        MOV     R3,A
        MOV     R1,#0x0
        LCALL   ??HalUARTRead?relay
//   93               WiFiRecvLenght = WiFiRecvLenght + len;
        MOV     DPTR,#WiFiRecvLenght
        MOVX    A,@DPTR
        ADD     A,R6
        MOVX    @DPTR,A
//   94               //printf("%s",WiFiRecvDataBuffer);
//   95               if(WiFiRecvLenght >= WIFI_RECV_DATA_BUFFER_LEN)
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x64
        JC      ??WiFiGate_ProcessEvent_13
//   96               {
//   97                 WiFiRecvLenght = 0;
        CLR     A
        MOVX    @DPTR,A
//   98               }
//   99             }
//  100             if(strstr(WiFiRecvDataBuffer,"OK\r\n"))
??WiFiGate_ProcessEvent_13:
        ; Setup parameters for call to function strstr
        MOV     R4,#`?<Constant "OK\\r\\n">` & 0xff
        MOV     R5,#(`?<Constant "OK\\r\\n">` >> 8) & 0xff
        MOV     R2,#WiFiRecvDataBuffer & 0xff
        MOV     R3,#(WiFiRecvDataBuffer >> 8) & 0xff
        LCALL   ??strstr?relay
        MOV     ?V0 + 1,R3
        MOV     A,R2
        ORL     A,?V0 + 1
        JZ      ??WiFiGate_ProcessEvent_14
//  101             {
//  102                 osal_set_event(WiFiGate_TaskId,NextEvent);
        ; Setup parameters for call to function osal_set_event
        MOV     DPTR,#NextEvent
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     R3,#0x0
        MOV     DPTR,#WiFiGate_TaskId
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_set_event?relay
        LJMP    ??WiFiGate_ProcessEvent_0 & 0xFFFF
//  103             }
//  104             else
//  105             {
//  106                 osal_start_timerEx( WiFiGate_TaskId, WIFI_GET_RSPONE,100); 
??WiFiGate_ProcessEvent_14:
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0x64
        MOV     R5,#0x0
        MOV     R2,#-0x70
??WiFiGate_ProcessEvent_15:
        MOV     R3,#0x0
        MOV     DPTR,#WiFiGate_TaskId
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        LJMP    ??WiFiGate_ProcessEvent_0 & 0xFFFF
//  107             }
//  108         break;
//  109       case WIFI_RECEIVE_MSG_EVT:
//  110            len = GET_RECV_LENGHT();
??WiFiGate_ProcessEvent_7:
        ; Setup parameters for call to function Hal_UART_RxBufLen
        MOV     R1,#0x0
        LCALL   ??Hal_UART_RxBufLen?relay
        MOV     A,R2
        MOV     R6,A
//  111             if(len)
        JZ      ??WiFiGate_ProcessEvent_16
//  112             {              
//  113               GET_RECV_DATA(&WiFiRecvDataBuffer[WiFiRecvLenght],len);
        ; Setup parameters for call to function HalUARTRead
        MOV     R4,A
        MOV     R5,#0x0
        MOV     DPTR,#WiFiRecvLenght
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,#WiFiRecvDataBuffer & 0xff
        ADD     A,R0
        MOV     R2,A
        MOV     A,#(WiFiRecvDataBuffer >> 8) & 0xff
        ADDC    A,#0x0
        MOV     R3,A
        MOV     R1,#0x0
        LCALL   ??HalUARTRead?relay
//  114               WiFiRecvLenght = WiFiRecvLenght + len;
        MOV     DPTR,#WiFiRecvLenght
        MOVX    A,@DPTR
        ADD     A,R6
        MOVX    @DPTR,A
//  115               if(WiFiRecvLenght >= WIFI_RECV_DATA_BUFFER_LEN)
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x64
        JC      ??WiFiGate_ProcessEvent_16
//  116               {
//  117                 WiFiRecvLenght = 0;
        CLR     A
        MOVX    @DPTR,A
//  118               }
//  119             }
//  120             if(WiFiCmdHandle)
??WiFiGate_ProcessEvent_16:
        MOV     DPTR,#WiFiCmdHandle
        MOVX    A,@DPTR
        JZ      ??WiFiGate_ProcessEvent_17
//  121             {
//  122               if(strstr(WiFiRecvDataBuffer,"~BUTTON_ON"))
        ; Setup parameters for call to function strstr
        MOV     R4,#`?<Constant "~BUTTON_ON">` & 0xff
        MOV     R5,#(`?<Constant "~BUTTON_ON">` >> 8) & 0xff
        MOV     R2,#WiFiRecvDataBuffer & 0xff
        MOV     R3,#(WiFiRecvDataBuffer >> 8) & 0xff
        LCALL   ??strstr?relay
        MOV     ?V0 + 1,R3
        MOV     A,R2
        ORL     A,?V0 + 1
        JZ      ??WiFiGate_ProcessEvent_18
//  123               {
//  124 		  printf("CMD:~BUTTON_ON\r\n");
        ; Setup parameters for call to function printf
        MOV     R2,#`?<Constant "CMD:~BUTTON_ON\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "CMD:~BUTTON_ON\\r\\n">` >> 8) & 0xff
        LCALL   ??printf?relay
//  125                   PointToPoint_FanControl(1);                  
        ; Setup parameters for call to function PointToPoint_FanControl
        MOV     R1,#0x1
        SJMP    ??WiFiGate_ProcessEvent_19
//  126               }
//  127               else if(strstr(WiFiRecvDataBuffer,"~BUTTON_OFF"))
??WiFiGate_ProcessEvent_18:
        ; Setup parameters for call to function strstr
        MOV     R4,#`?<Constant "~BUTTON_OFF">` & 0xff
        MOV     R5,#(`?<Constant "~BUTTON_OFF">` >> 8) & 0xff
        MOV     R2,#WiFiRecvDataBuffer & 0xff
        MOV     R3,#(WiFiRecvDataBuffer >> 8) & 0xff
        LCALL   ??strstr?relay
        MOV     ?V0 + 1,R3
        MOV     A,R2
        ORL     A,?V0 + 1
        JZ      ??WiFiGate_ProcessEvent_20
//  128               {
//  129                   printf("CMD:~BUTTON_OFF\r\n");
        ; Setup parameters for call to function printf
        MOV     R2,#`?<Constant "CMD:~BUTTON_OFF\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "CMD:~BUTTON_OFF\\r\\n">` >> 8) & 0xff
        LCALL   ??printf?relay
//  130                   PointToPoint_FanControl(0); 
        ; Setup parameters for call to function PointToPoint_FanControl
        MOV     R1,#0x0
??WiFiGate_ProcessEvent_19:
        LCALL   ??PointToPoint_FanControl?relay
//  131               }
//  132               WiFiCmdHandle = 0;
??WiFiGate_ProcessEvent_20:
        MOV     DPTR,#WiFiCmdHandle
        CLR     A
        MOVX    @DPTR,A
//  133               WiFiRecvLenght = 0;
        MOV     DPTR,#WiFiRecvLenght
        MOVX    @DPTR,A
//  134             }
//  135             if(!len)
??WiFiGate_ProcessEvent_17:
        MOV     A,R6
        JNZ     ??WiFiGate_ProcessEvent_21
//  136             {
//  137               osal_start_timerEx( WiFiGate_TaskId, WIFI_RECEIVE_MSG_EVT,100);
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0x64
        MOV     R5,#0x0
        MOV     R2,#-0x7a
        LJMP    ??WiFiGate_ProcessEvent_15 & 0xFFFF
//  138             }
//  139             else
//  140             {
//  141               osal_start_timerEx( WiFiGate_TaskId, WIFI_RECEIVE_MSG_EVT,10);
??WiFiGate_ProcessEvent_21:
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0xa
        MOV     R5,#0x0
        MOV     R2,#-0x7a
        MOV     R3,#0x0
        MOV     DPTR,#WiFiGate_TaskId
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
//  142               WiFiCmdHandle = 1;
        MOV     DPTR,#WiFiCmdHandle
        LJMP    ??WiFiGate_ProcessEvent_12 & 0xFFFF
//  143             }
//  144       break;
//  145       case WIFI_SEND_DATA_MSG_EVT:
//  146            osal_msg_receive( WiFiGate_TaskId );
??WiFiGate_ProcessEvent_10:
        ; Setup parameters for call to function osal_msg_receive
        MOV     DPTR,#WiFiGate_TaskId
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_msg_receive?relay
//  147            //SEND_TO_WIFI();
//  148       break;
//  149       
//  150     }
//  151     
//  152   }
//  153   return 0;
??WiFiGate_ProcessEvent_0:
        MOV     R2,#0x0
        MOV     R3,#0x0
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock2
//  154 } 
//  155 /*
//  156 发送数据到WIFI网络上
//  157 */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  158 void SendToWiFiNetwork(uint8 *pData,uint8 len)
SendToWiFiNetwork:
        CFI Block cfiBlock3 Using cfiCommon0
        CFI Function SendToWiFiNetwork
        CODE
//  159 {
        FUNCALL SendToWiFiNetwork, HalUARTWrite
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
//  160   if(WiFiModeInitDone)
        MOV     DPTR,#WiFiModeInitDone
        MOVX    A,@DPTR
        JZ      ??SendToWiFiNetwork_0
//  161   {
//  162     SEND_TO_WIFI(pData,len);
        ; Setup parameters for call to function HalUARTWrite
        MOV     ?V0 + 0,R6
        MOV     R4,?V0 + 0
        MOV     R5,#0x0
        MOV     R1,#0x0
        LCALL   ??HalUARTWrite?relay
//  163   }
//  164 }
??SendToWiFiNetwork_0:
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock3

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??WiFiGate_Init?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    WiFiGate_Init

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ConfigWiFiArg?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ConfigWiFiArg

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??WiFiGate_ProcessEvent?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    WiFiGate_ProcessEvent

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SendToWiFiNetwork?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    SendToWiFiNetwork

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "WifiConfig:Send AT\\r\\n">`:
        DB "WifiConfig:Send AT\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "AT\\r\\n">`:
        DB "AT\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "WifiConfig:AT+CWMODE\\r\\n">`:
        DB "WifiConfig:AT+CWMODE\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "AT+CWMODE=3\\r\\n">`:
        DB "AT+CWMODE=3\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "WifiConfig:AT+CWJAP\\r\\n">`:
        DB "WifiConfig:AT+CWJAP\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "AT+CWJAP=\\"Honor 8X\\",\\"...">`:
        DB "AT+CWJAP=\"Honor 8X\",\"1234567890\"\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "WifiConfig:AT+CIPSTART\\r\\n">`:
        DB "WifiConfig:AT+CIPSTART\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "AT+CIPSTART=\\"TCP\\",\\"18...">`:
        DB "AT+CIPSTART=\"TCP\",\"183.230.40.40\",1811\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "WifiConfig:AT+CIPMODE\\r\\n">`:
        DB "WifiConfig:AT+CIPMODE\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "AT+CIPMODE=1\\r\\n">`:
        DB "AT+CIPMODE=1\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "WifiConfig:AT+CIPSEND\\r\\n">`:
        DB "WifiConfig:AT+CIPSEND\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "AT+CIPSEND\\r\\n">`:
        DB "AT+CIPSEND\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "Try to connect OneNET\\r\\n">`:
        DB "Try to connect OneNET\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "*201298#1234567890#sa...">`:
        DB "*201298#1234567890#sample*"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "OK\\r\\n">`:
        DB "OK\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "~BUTTON_ON">`:
        DB "~BUTTON_ON"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "CMD:~BUTTON_ON\\r\\n">`:
        DB "CMD:~BUTTON_ON\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "~BUTTON_OFF">`:
        DB "~BUTTON_OFF"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "CMD:~BUTTON_OFF\\r\\n">`:
        DB "CMD:~BUTTON_OFF\015\012"

        END
// 
// 646 bytes in segment BANKED_CODE
//  24 bytes in segment BANK_RELAYS
// 376 bytes in segment XDATA_ROM_C
// 105 bytes in segment XDATA_Z
// 
// 670 bytes of CODE  memory
// 376 bytes of CONST memory
// 105 bytes of XDATA memory
//
//Errors: none
//Warnings: 4
